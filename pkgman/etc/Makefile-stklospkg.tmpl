#  -*- Makefile -*- Automatically generated for STklos packages

# The main package
PKG=@PKG@
PKGVERS=@PKGVERS@
PKGSRC=@PKGSRC@
VERSION=@VERSION@â‚¬

# Compiler 
SCC=stklos-compile
SFLAGS=

SO=@SO@
SCOMP=@SCOMP@
SLINK=@SLINK@

# Targets 
OSTK=@OSTK@

# General rules 
#all: $(OSTK) $(PKGVERS).$(SO)
all: $(OSTK)

clean: 
#	/bin/rm -f $(OSTK) $(PKGVERS).{c,stk,$(SO),o}
	/bin/rm -f $(OSTK)

$(PKGVERS).ostk: $(PKG)/$(PKGSRC)
	(cd $(PKG); $(SCC) $(SFLAGS) -L .. -o ../$(PKG).ostk $(PKGSRC))

# $(PKGVERS).$(SO): $(PKGVERS).c
# 	$(SCOMP) -c -DMODULE_ENTRY=1 -o $(PKGVERS).o $(PKGVERS).c
# 	$(SLINK) $(PKGVERS).so $(PKGVERS).o
# 	/bin/rm -f $(PKGVERS).o
# 
# $(PKGVERS).c: $(PKGVERS).stk
# 	$(SCC) -C -o $(PKGVERS).c $(PKGVERS).stk
# 

# Rules for imported packages 
