<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=ISO-8859-1">
 <style type="text/css">
  <!--
  tt { font-family: monospace }
  code { font-family: monospace }
  -->
 </style>
<link href="doc-style.css" rel="stylesheet" type="text/css">
</head>
<body >
<table width='100%' cellpadding='0' cellspacing='0'><tr><td bgcolor="#E6F2E6"><center><h1>STklos Reference Manual<hr align="center" width="10%">4. Standard Procedures</h1></center></table><table cellpadding="3" cellspacing="0" width="100%"><tr>
<td align="left" valign="top" width="20%" bgcolor="#E6F2E6">
<br /><table width="97%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse;" frame="box" rules="none"><tbody>
<tr><th align="center" colspan="2" bgcolor="darkolivegreen"><font color="white">Contents</font></th></tr>
<tr class="navnorm"><td align="center"></td><td align="left"><a href="stklos-ref.html#-document-19777">*Top*</a></td></tr>
<tr class="navnorm"><td width="8%" align="left" valign="top">1&nbsp;</td><td align="left"><a href="stklos-ref-1.html#Introduction">Introduction</a></td></tr>
<tr class="navnorm"><td width="8%" align="left" valign="top">2&nbsp;</td><td align="left"><a href="stklos-ref-2.html#Expressions">Expressions</a></td></tr>
<tr class="navnorm"><td width="8%" align="left" valign="top">3&nbsp;</td><td align="left"><a href="stklos-ref-3.html#Program-structure">Program structure</a></td></tr>
<tr class="navsel"><td width="8%" align="left" valign="top">4&nbsp;</td><td align="left"><a href="stklos-ref-4.html#Standard-Procedures">Standard Procedures</a><br /><table cellspacing="1" cellpadding="1" width="100%">
<tbody>
 <tr><td valign="top" align="left">4.1</td><td colspan="4" width="100%"><a href="stklos-ref-4.html#Equivalence-predicates">Equivalence predicates</td></tr>
 <tr><td valign="top" align="left">4.2</td><td colspan="4" width="100%"><a href="stklos-ref-4.html#Numbers">Numbers</td></tr>
 <tr><td valign="top" align="left">4.3</td><td colspan="4" width="100%"><a href="stklos-ref-4.html#Booleans">Booleans</td></tr>
 <tr><td valign="top" align="left">4.4</td><td colspan="4" width="100%"><a href="stklos-ref-4.html#Pairs-and-lists">Pairs and lists</td></tr>
 <tr><td valign="top" align="left">4.5</td><td colspan="4" width="100%"><a href="stklos-ref-4.html#Symbols">Symbols</td></tr>
 <tr><td valign="top" align="left">4.6</td><td colspan="4" width="100%"><a href="stklos-ref-4.html#Characters">Characters</td></tr>
 <tr><td valign="top" align="left">4.7</td><td colspan="4" width="100%"><a href="stklos-ref-4.html#Strings">Strings</td></tr>
 <tr><td valign="top" align="left">4.8</td><td colspan="4" width="100%"><a href="stklos-ref-4.html#Vectors">Vectors</td></tr>
 <tr><td valign="top" align="left">4.9</td><td colspan="4" width="100%"><a href="stklos-ref-4.html#Structures">Structures</td></tr>
 <tr><td valign="top" align="left">4.10</td><td colspan="4" width="100%"><a href="stklos-ref-4.html#Control-features">Control features</td></tr>
 <tr><td valign="top" align="left">4.11</td><td colspan="4" width="100%"><a href="stklos-ref-4.html#Input-and-Output">Input and Output</td></tr>
 <tr><td valign="top" align="left">4.12</td><td colspan="4" width="100%"><a href="stklos-ref-4.html#Keywords">Keywords</td></tr>
 <tr><td valign="top" align="left">4.13</td><td colspan="4" width="100%"><a href="stklos-ref-4.html#Hash-Tables">Hash Tables</td></tr>
 <tr><td valign="top" align="left">4.14</td><td colspan="4" width="100%"><a href="stklos-ref-4.html#Dates-and-Times">Dates and Times</td></tr>
 <tr><td valign="top" align="left">4.15</td><td colspan="4" width="100%"><a href="stklos-ref-4.html#Processes">Processes</td></tr>
 <tr><td valign="top" align="left">4.16</td><td colspan="4" width="100%"><a href="stklos-ref-4.html#Sockets">Sockets</td></tr>
 <tr><td valign="top" align="left">4.17</td><td colspan="4" width="100%"><a href="stklos-ref-4.html#System-Procedures">System Procedures</td></tr>
 <tr><td valign="top" align="left">4.18</td><td colspan="4" width="100%"><a href="stklos-ref-4.html#Signals">Signals</td></tr>
 <tr><td valign="top" align="left">4.19</td><td colspan="4" width="100%"><a href="stklos-ref-4.html#Parameter-Objects">Parameter Objects</td></tr>
 <tr><td valign="top" align="left">4.20</td><td colspan="4" width="100%"><a href="stklos-ref-4.html#Misc">Misc</td></tr>
</tbody>
</table>
</td></tr>
<tr class="navnorm"><td width="8%" align="left" valign="top">5&nbsp;</td><td align="left"><a href="stklos-ref-5.html#Regular-Expressions">Regular Expressions</a></td></tr>
<tr class="navnorm"><td width="8%" align="left" valign="top">6&nbsp;</td><td align="left"><a href="stklos-ref-6.html#Pattern-Matching">Pattern Matching</a></td></tr>
<tr class="navnorm"><td width="8%" align="left" valign="top">7&nbsp;</td><td align="left"><a href="stklos-ref-7.html#Exceptions-and-Conditions">Exceptions and Conditions</a></td></tr>
<tr class="navnorm"><td width="8%" align="left" valign="top">8&nbsp;</td><td align="left"><a href="stklos-ref-8.html#STklos-Object-System">STklos Object System</a></td></tr>
<tr class="navnorm"><td width="8%" align="left" valign="top">9&nbsp;</td><td align="left"><a href="stklos-ref-9.html#Customizations">Customizations</a></td></tr>
<tr class="navnorm"><td width="8%" align="left" valign="top">10&nbsp;</td><td align="left"><a href="stklos-ref-10.html#Using-the-SLIB-package">Using the SLIB package</a></td></tr>
<tr class="navnorm"><td width="8%" align="left" valign="top">11&nbsp;</td><td align="left"><a href="stklos-ref-11.html#SRFIs">SRFIs</a></td></tr>
<tr class="navnorm"><td width="8%" align="left" valign="top">12&nbsp;</td><td align="left"><a href="stklos-ref-12.html#Index">Index</a></td></tr>
<tr class="navnorm"><td width="8%" align="left" valign="top">&nbsp;</td><td align="left"><a href="stklos-ref-13.html#Bibliography">Bibliography</a></td></tr>
</tbody></table>
</td>
<td align="left" valign="top">
<a name="Equivalence-predicates"></a>
<table width="100%"><tr><td bgcolor="#E6F2E6"><h3 id="Equivalence-predicates"><font color="#000000">4.1 Equivalence predicates</font></h3></table>
<p>A predicate is a procedure that always returns a boolean value 
(<code>#t</code> or <code>#f</code>). An equivalence predicate is the
computational analogue of a mathematical equivalence relation (it
is symmetric, reflexive, and transitive).  Of the equivalence
predicates described in this section, <code>eq?</code> is the finest
or most discriminating, and <code>equal?</code> is the coarsest.
<code>Eqv?</code> is slightly less discriminating than <code>eq?</code>.</p><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="eqv-"></a><a name="--index-entry-3375"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(eqv? obj1 obj2)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />The <code>eqv?</code> procedure defines a useful equivalence relation on objects. 
Briefly, it returns <code>#t</code> if <code>obj1</code> and <code>obj2</code> should normally be regarded 
as the same object. This relation is left slightly open to interpretation, 
but the following partial specification of <code>eqv?</code> holds for all 
implementations of Scheme.

The <code>eqv?</code> procedure returns <code>#t</code> if:
<ul><li>
<code>obj1</code> and <code>obj2</code> are both <code>#t</code> or both <code>#f</code>.
</li>
<li>
<code>obj1</code> and <code>obj2</code> are both symbols and 
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(string=? (symbol-&gt;string obj1)
          (symbol-&gt;string obj2))
                     &#8658;  #t
</pre></td></tr>
</tbody></table></blockquote>


<strong>Note:</strong> This assumes that neither <code>obj1</code> nor <code>obj2</code> is an
&quot;uninterned symbol&quot;.
</li>
<li>
<code>obj1</code> and <code>obj2</code> are both keywords and 
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(string=? (keyword-&gt;string obj1)
          (keyword-&gt;string obj2))
                     &#8658;  #t
</pre></td></tr>
</tbody></table></blockquote>

</li>
<li>
<code>obj1</code> and <code>obj2</code> are both numbers, are numerically equal 
(see <a href="stklos-ref-4.html#-">???</a>), and are either both exact or both inexact. 
</li>
<li>
<code>obj1</code> and <code>obj2</code> are both characters and are the same character
according to the <code>char=?</code> procedure (see <a href="stklos-ref-4.html#char--">???</a>). 
</li>
<li>
both <code>obj1</code> and <code>obj2</code> are the empty list.
</li>
<li>
<code>obj1</code> and <code>obj2</code> are pairs, vectors, or strings that denote
the same locations in the store.
</li>
<li>
<code>obj1</code> and <code>obj2</code> are procedures whose location tags are equal.
</li>
</ul>

<strong>Note:</strong> <span style="font-variant: small-caps">STklos</span> extends <span style="font-variant: small-caps">R<sup>5</sup>RS</span> <code>eqv?</code> to take into account 
the keyword type.
<br /><br />
Here are some examples: 
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(eqv? 'a 'a)                     &#8658;  #t
(eqv? 'a 'b)                     &#8658;  #f
(eqv? 2 2)                       &#8658;  #t
(eqv? <font color="#00cf00">:foo</font> <font color="#00cf00">:foo</font>)                 &#8658;  #t
(eqv? <font color="#00cf00">:foo</font> <font color="#00cf00">:bar</font>)                 &#8658;  #f
(eqv? '() '())                   &#8658;  #t
(eqv? 100000000 100000000)       &#8658;  #t
(eqv? (cons 1 2) (cons 1 2))     &#8658;  #f
(eqv? (<strong>lambda</strong> () 1)
      (<strong>lambda</strong> () 2))             &#8658;  #f
(eqv? #f 'nil)                   &#8658;  #f
(<strong>let</strong> ((p (<strong>lambda</strong> (x) x)))
  (eqv? p p))                    &#8658;  #t
</pre></td></tr>
</tbody></table></blockquote>


The following examples illustrate cases in which the above rules do
not fully specify the behavior of <code>eqv?</code>. All that can be said about 
such cases is that the value returned by eqv? must be a boolean.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(eqv? <font color="red">&quot;&quot;</font> <font color="red">&quot;&quot;</font>)             &#8658;  unspecified
(eqv? '#() '#())         &#8658;  unspecified
(eqv? (<strong>lambda</strong> (x) x)
      (<strong>lambda</strong> (x) x))    &#8658;  unspecified
(eqv? (<strong>lambda</strong> (x) x)
      (<strong>lambda</strong> (y) y))    &#8658;  unspecified
</pre></td></tr>
</tbody></table></blockquote>


<strong>Note:</strong> In fact, the value returned by <span style="font-variant: small-caps">STklos</span> depends of 
the way code is entered and can yield <code>#t</code> in some cases and <code>#f</code> 
in others.
<br /><br />
See <span style="font-variant: small-caps">R<sup>5</sup>RS</span> for more details on <code>eqv?</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="eq-"></a><a name="--index-entry-3538"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(eq? obj1 obj2)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br /><code>Eq?</code> is similar to <code>eqv?</code> except that in some cases it is capable of
discerning distinctions finer than those detectable by <code>eqv?</code>.
<br /><br />
<code>Eq?</code> and <code>eqv?</code> are guaranteed to have the same behavior on symbols, 
keywords, booleans, the empty list, pairs, procedures, and non-empty strings 
and vectors. <code>Eq?</code>'s behavior on numbers and characters is 
implementation-dependent, but it will always return either true or false,
and will return true only when <code>eqv?</code> would also return true.
<code>Eq?</code> may also behave differently from <code>eqv?</code> on empty vectors
and empty strings.
<br /><br />
<strong>Note:</strong> <span style="font-variant: small-caps">STklos</span> extends <span style="font-variant: small-caps">R<sup>5</sup>RS</span> <code>eq?</code> to take into account
the keyword type.
<br /><br />
<strong>Note:</strong> In <span style="font-variant: small-caps">STklos</span>, comparison of character returns <code>#t</code> for identical
characters and <code>#f</code> otherwise.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre> 
(eq? 'a 'a)                     &#8658;  #t
(eq? '(a) '(a))                 &#8658;  unspecified
(eq? (list 'a) (list 'a))       &#8658;  #f
(eq? <font color="red">&quot;a&quot;</font> <font color="red">&quot;a&quot;</font>)                   &#8658;  unspecified
(eq? <font color="red">&quot;&quot;</font> <font color="red">&quot;&quot;</font>)                     &#8658;  unspecified
(eq? <font color="#00cf00">:foo</font> <font color="#00cf00">:foo</font>)                 &#8658;  #t
(eq? <font color="#00cf00">:foo</font> <font color="#00cf00">:bar</font>)                 &#8658;  #f
(eq? '() '())                   &#8658;  #t
(eq? 2 2)                       &#8658;  unspecified
(eq? #\A #\A)                   &#8658;  #t (unspecified in <span style="font-variant: small-caps">R<sup>5</sup>RS</span>)
(eq? car car)                   &#8658;  #t
(<strong>let</strong> ((n (+ 2 3)))
  (eq? n n))                    &#8658;  #t (unspecified in <span style="font-variant: small-caps">R<sup>5</sup>RS</span>)
(<strong>let</strong> ((x '(a)))
  (eq? x x))                    &#8658;  #t
(<strong>let</strong> ((x '#()))
  (eq? x x))                    &#8658;  #t
(<strong>let</strong> ((p (<strong>lambda</strong> (x) x)))
  (eq? p p))                    &#8658;  #t
(eq? <font color="#00cf00">:foo</font> <font color="#00cf00">:foo</font>)                 &#8658;  #t
(eq? <font color="#00cf00">:bar</font> <font color="#00cf00">bar:</font>)                 &#8658;  #t
(eq? <font color="#00cf00">:bar</font> <font color="#00cf00">:foo</font>)                 &#8658;  #f
</pre></td></tr>
</tbody></table></blockquote>
 
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="equal-"></a><a name="--index-entry-3664"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(equal? obj1 obj2)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br /><code>Equal?</code> recursively compares the contents of pairs, vectors, and 
strings, applying <code>eqv?</code> on other objects such as numbers and symbols. 
A rule of thumb is that objects are generally <code>equal?</code> if they print the
same. <code>Equal?</code> may fail to terminate if its arguments are circular
data structures.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(equal? 'a 'a)                  &#8658;  #t
(equal? '(a) '(a))              &#8658;  #t
(equal? '(a (b) c)
        '(a (b) c))             &#8658;  #t
(equal? <font color="red">&quot;abc&quot;</font> <font color="red">&quot;abc&quot;</font>)            &#8658;  #t
(equal? 2 2)                    &#8658;  #t
(equal? (make-vector 5 'a)
        (make-vector 5 'a))     &#8658;  #t
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><a name="Numbers"></a>
<table width="100%"><tr><td bgcolor="#E6F2E6"><h3 id="Numbers"><font color="#000000">4.2 Numbers</font></h3></table>
<p><span style="font-variant: small-caps">R<sup>5</sup>RS</span> description of numbers is quite long and will not be given here. 
STklos support the full number tower as described in <span style="font-variant: small-caps">R<sup>5</sup>RS</span>; see this 
document for a complete description.</p><p><span style="font-variant: small-caps">STklos</span> extends the number syntax of R5RS with the
following inexact numerical constants:
<code>+inf.0</code> (infinity), <code>-inf.0</code> (negative
infinity), <code>+nan.0</code> (not a number), and
<code>-nan.0</code> (same as +nan.0).</p><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="integer-"></a><a name="rational-"></a><a name="real-"></a><a name="complex-"></a><a name="number-"></a><a name="--index-entry-3731"></a><a name="--index-entry-3735"></a><a name="--index-entry-3739"></a><a name="--index-entry-3743"></a><a name="--index-entry-3747"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(number? obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(complex? obj)</font></strong></code><br /><code><strong><font color="IndianRed">(real? obj)</font></strong></code><br /><code><strong><font color="IndianRed">(rational? obj)</font></strong></code><br /><code><strong><font color="IndianRed">(integer? obj)</font></strong></code><br /><br />These numerical type predicates can be applied to any kind of
argument, including non-numbers. They return <code>#t</code> if the object is of
the named type, and otherwise they return <code>#f</code>. In general, if a type
predicate is true of a number then all higher type predicates are
also true of that number. Consequently, if a type predicate is
false of a number, then all lower type predicates are also false of
that number.

If <code>z</code> is an inexact complex number, then <code>(real? z)</code> is true if and
only if <code>(zero? (imag-part z))</code> is true. If <code>x</code> is an inexact real
number, then <code>(integer? x)</code> is true if and only if 
<code>(and (finite? x) (= x (round x)))</code>


<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>  (complex? 3+4i)         &#8658;  #t
  (complex? 3)            &#8658;  #t
  (real? 3)               &#8658;  #t
  (real? -2.5+0.0i)       &#8658;  #t
  (real? #e1e10)          &#8658;  #t
  (rational? 6/10)        &#8658;  #t
  (rational? 6/3)         &#8658;  #t
  (integer? 3+0i)         &#8658;  #t
  (integer? 3.0)          &#8658;  #t
  (integer? 3.2)          &#8658;  #f
  (integer? 8/4)          &#8658;  #t
  (integer? <font color="red">&quot;no&quot;</font>)         &#8658;  #f
  (complex? +inf.0)       &#8658;  #t
  (real? -inf.0)          &#8658;  #t
  (rational? +inf.0)      &#8658;  #f
  (integer? -inf.0)       &#8658;  #f
</pre></td></tr>
</tbody></table></blockquote>

</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="inexact-"></a><a name="exact-"></a><a name="--index-entry-3844"></a><a name="--index-entry-3848"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(exact? z)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(inexact? z)</font></strong></code><br /><br />These numerical predicates provide tests for the exactness of a
quantity. For any Scheme number, precisely one of these predicates
is true. </td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="bignum-"></a><a name="--index-entry-3871"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(bignum? x)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />This predicates returns <code>#t</code> if <code>x</code> is an integer number too large to be 
represented with a native integer. 
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(bignum? (expt 2 300))     &#8658; <code>#t</code>   (very likely)
(bignum? 12)               &#8658; <code>#f</code>
(bignum? <font color="red">&quot;no&quot;</font>)             &#8658; <code>#f</code>
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="--"></a><a name="--"></a><a name="-"></a><a name="-"></a><a name="-"></a><a name="--index-entry-3912"></a><a name="--index-entry-3916"></a><a name="--index-entry-3920"></a><a name="--index-entry-3924"></a><a name="--index-entry-3928"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(= z1 z2 z3 ...)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(&lt; x1 x2 x3 ...)</font></strong></code><br /><code><strong><font color="IndianRed">(&gt; x1 x2 x3 ...)</font></strong></code><br /><code><strong><font color="IndianRed">(&lt;= x1 x2 x3 ...)</font></strong></code><br /><code><strong><font color="IndianRed">(&gt;= x1 x2 x3 ...)</font></strong></code><br /><br />These procedures return <code>#t</code> if their arguments are (respectively):
equal, monotonically increasing, monotonically decreasing,
monotonically nondecreasing, or monotonically nonincreasing.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(= +inf.0 +inf.0)           &#8658;  #t
(= -inf.0 +inf.0)           &#8658;  #f
(= -inf.0 -inf.0)           &#8658;  #t
<br /><br />
For any finite real number <font color="#00cf00">x:</font>
<br /><br />
(&lt; -inf.0 x +inf.0)         &#8658;  #t
(&gt; +inf.0 x -inf.0)         &#8658;  #t
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="even-"></a><a name="odd-"></a><a name="negative-"></a><a name="positive-"></a><a name="zero-"></a><a name="infinite-"></a><a name="finite-"></a><a name="--index-entry-3995"></a><a name="--index-entry-3999"></a><a name="--index-entry-4003"></a><a name="--index-entry-4007"></a><a name="--index-entry-4011"></a><a name="--index-entry-4015"></a><a name="--index-entry-4019"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(finite? z)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(infinite? z)</font></strong></code><br /><code><strong><font color="IndianRed">(zero? z)</font></strong></code><br /><code><strong><font color="IndianRed">(positive? x)</font></strong></code><br /><code><strong><font color="IndianRed">(negative? x)</font></strong></code><br /><code><strong><font color="IndianRed">(odd? n)</font></strong></code><br /><code><strong><font color="IndianRed">(even? n)</font></strong></code><br /><br />These numerical predicates test a number for a particular property,
returning <code>#t</code> or <code>#f</code>.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(positive? +inf.0)          =&#8658;  #t
(negative? -inf.0)          =&#8658;  #t
(finite? -inf.0)            =&#8658;  #f
(infinite? +inf.0)          =&#8658;  #t
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="min"></a><a name="max"></a><a name="--index-entry-4081"></a><a name="--index-entry-4085"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(max x1 x2 ...)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(min x1 x2 ...)</font></strong></code><br /><br />These procedures return the maximum or minimum of their arguments.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(max 3 4)              &#8658;  4    <font color="#ffa600"><i>; exact</i></font>
(max 3.9 4)            &#8658;  4.0  <font color="#ffa600"><i>; inexact</i></font>
</pre></td></tr>
</tbody></table></blockquote>

For any real number x:
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(max +inf.0 x)         &#8658;  +inf.0
(min -inf.0 x)         &#8658;  -inf.0
</pre></td></tr>
</tbody></table></blockquote>
 
<br /><br />
<strong>Note:</strong> If any argument is inexact, then the result will also be
inexact</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="-"></a><a name="-"></a><a name="--index-entry-4133"></a><a name="--index-entry-4137"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(+ z1 ...)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(* z1 ...)</font></strong></code><br /><br />These procedures return the sum or product of their arguments.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(+ 3 4)                 &#8658;  7
(+ 3)                   &#8658;  3
(+)                     &#8658;  0
(+ +inf.0 +inf.0)       &#8658;  +inf.0
(+ +inf.0 -inf.0)       &#8658;  +nan.0
(* 4)                   &#8658;  4
(*)                     &#8658;  1
(* 5 +inf.0)            &#8658;  +inf.0
(* -5 +inf.0)           &#8658;  -inf.0
(* +inf.0 +inf.0)       &#8658;  +inf.0
(* +inf.0 -inf.0)       &#8658;  -inf.0
(* 0 +inf.0)            &#8658;  +nan.0
</pre></td></tr>
</tbody></table></blockquote>

<strong>Note:</strong> For any finite number z:
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(+ +inf.0 z)            &#8658;  +inf.0
(+ -inf.0 z)            &#8658;  -inf.0
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="-"></a><a name="-"></a><a name="--index-entry-4212"></a><a name="--index-entry-4216"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(- z)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(- z1 z2)</font></strong></code><br /><code><strong><font color="IndianRed">(/ z)</font></strong></code><br /><code><strong><font color="IndianRed">(/ z1 z2 ...)</font></strong></code><br /><br />With two or more arguments, these procedures return the difference or quotient
of their arguments, associating to the left. With one argument, however,
they return the additive or multiplicative inverse of their argument.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(- 3 4)                 &#8658;  -1
(- 3 4 5)               &#8658;  -6
(- 3)                   &#8658;  -3
(- +inf.0 +inf.0)       &#8658; +nan.0
(/ 3 4 5)               &#8658;  3/20
(/ 3)                   &#8658;  1/3
(/ 0.0)                 &#8658; +inf.0
(/ 0)                   &#8658; <font color="red"><strong>error</strong></font> (division by 0)
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="abs"></a><a name="--index-entry-4276"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(abs x)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br /><code>Abs</code> returns the absolute value of its argument.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(abs -7)                &#8658;  7
(abs -inf.0)            &#8658; +inf.0
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="modulo"></a><a name="remainder"></a><a name="quotient"></a><a name="--index-entry-4308"></a><a name="--index-entry-4312"></a><a name="--index-entry-4316"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(quotient n1 n2)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(remainder n1 n2)</font></strong></code><br /><code><strong><font color="IndianRed">(modulo n1 n2)</font></strong></code><br /><br />These procedures implement number-theoretic (integer) division. n2 should
be non-zero. All three procedures return integers. 
<br /><br />
If <code>n1/n2</code> is an integer:

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(quotient n1 n2)   &#8658; n1/n2
(remainder n1 n2)  &#8658; 0
(modulo n1 n2)     &#8658; 0
</pre></td></tr>
</tbody></table></blockquote>


If n1/n2 is not an integer:

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(quotient n1 n2)   &#8658; nq
(remainder n1 n2)  &#8658; nr
(modulo n1 n2)     &#8658; nm
</pre></td></tr>
</tbody></table></blockquote>
 

where <code>nq</code> is <code>n1/n2</code> rounded towards zero, 0 &lt; abs(nr) &lt; abs(n2), 
0 &lt; abs(nm) &lt; abs(n2), <code>nr</code> and <code>nm</code> differ from n1 by a multiple of n2, 
<code>nr</code> has the same sign as n1, and <code>nm</code> has the same sign as n2.
<br /><br />
From this we can conclude that for integers <code>n1</code> and <code>n2</code> with <code>n2</code> not 
equal to 0,
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre> (= n1 (+ (* n2 (quotient n1 n2))
          (remainder n1 n2)))   &#8658;  #t
</pre></td></tr>
</tbody></table></blockquote>

provided all numbers involved in that computation are exact.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(modulo 13 4)           &#8658;  1
(remainder 13 4)        &#8658;  1

(modulo -13 4)          &#8658;  3
(remainder -13 4)       &#8658;  -1

(modulo 13 -4)          &#8658;  -3
(remainder 13 -4)       &#8658;  1

(modulo -13 -4)         &#8658;  -1
(remainder -13 -4)      &#8658;  -1

(remainder -13 -4.0)    &#8658;  -1.0  <font color="#ffa600"><i>; inexact</i></font>
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="lcm"></a><a name="gcd"></a><a name="--index-entry-4426"></a><a name="--index-entry-4430"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(gcd n1 ...)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(lcm n1 ...)</font></strong></code><br /><br />These procedures return the greatest common divisor or least common 
multiple of their arguments. The result is always non-negative.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(gcd 32 -36)            &#8658;  4
(gcd)                   &#8658;  0
(lcm 32 -36)            &#8658;  288
(lcm 32.0 -36)          &#8658;  288.0  <font color="#ffa600"><i>; inexact</i></font>
(lcm)                   &#8658;  1
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="denominator"></a><a name="numerator"></a><a name="--index-entry-4474"></a><a name="--index-entry-4478"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(numerator q)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(denominator q)</font></strong></code><br /><br />These procedures return the numerator or denominator of their argument; the
result is computed as if the argument was represented as a fraction in
lowest terms. The denominator is always positive. The denominator of
0 is defined to be 1.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(numerator (/ 6 4))  &#8658;  3
(denominator (/ 6 4))  &#8658;  2
(denominator
(exact-&gt;inexact (/ 6 4))) &#8658; 2.0
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="round"></a><a name="truncate"></a><a name="ceiling"></a><a name="floor"></a><a name="--index-entry-4518"></a><a name="--index-entry-4522"></a><a name="--index-entry-4526"></a><a name="--index-entry-4530"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(floor x)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(ceiling x)</font></strong></code><br /><code><strong><font color="IndianRed">(truncate x)</font></strong></code><br /><code><strong><font color="IndianRed">(round x)</font></strong></code><br /><br />These procedures return integers. <code>Floor</code> returns the largest integer not
larger than <code>x</code>. <code>Ceiling</code> returns the smallest integer not smaller than <code>x</code>. 
<code>Truncate</code> returns the integer closest to <code>x</code> whose absolute value is not
larger than the absolute value of <code>x</code>. <code>Round</code> returns the closest integer 
to <code>x</code>, rounding to even when <code>x</code> is halfway between two integers.
<br /><br />
<strong>Rationale:</strong> <code>Round</code> rounds to even for consistency with the default 
rounding mode specified by the IEEE floating point standard.
<br /><br />
<strong>Note:</strong> If the argument to one of these procedures is inexact, then the
result will also be inexact. If an exact value is needed, the result should 
be passed to the <code>inexact-&gt;exact</code> procedure.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(floor -4.3)          &#8658;  -5.0
(ceiling -4.3)        &#8658;  -4.0
(truncate -4.3)       &#8658;  -4.0
(round -4.3)          &#8658;  -4.0

(floor 3.5)           &#8658;  3.0
(ceiling 3.5)         &#8658;  4.0
(truncate 3.5)        &#8658;  3.0
(round 3.5)           &#8658;  4.0  <font color="#ffa600"><i>; inexact</i></font>

(round 7/2)           &#8658;  4    <font color="#ffa600"><i>; exact</i></font>
(round 7)             &#8658;  7
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="rationalize"></a><a name="--index-entry-4615"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(rationalize x y)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Rationalize returns the simplest rational number differing from <code>x</code>
by no more than <code>y</code>. A rational number <code>r1</code> is simpler than another
rational number <code>r2</code> if <code>r1</code> = <code>p1/q1</code> and <code>r2</code> = <code>p2/q2</code> (in lowest
terms) and abs(p1) &lt;= abs(p2) and abs(q1) &lt;= abs(q2). Thus <code>3/5</code> is 
simpler than <code>4/7</code>. Although not all rationals are comparable in 
this ordering  (consider <code>2/7</code> and <code>3/5</code>) any interval contains a
rational number that
is simpler than every other rational number in that interval (the
simpler <code>2/5</code> lies between <code>2/7</code> and <code>3/5</code>). Note that <code>0</code> = <code>0/1</code> is the
simplest rational of all.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(rationalize
   (inexact-&gt;exact .3) 1/10)  &#8658; 1/3    <font color="#ffa600"><i>; exact</i></font>
(rationalize .3 1/10)         &#8658; #i1/3  <font color="#ffa600"><i>; inexact</i></font>
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="atan"></a><a name="acos"></a><a name="asin"></a><a name="tan"></a><a name="cos"></a><a name="sin"></a><a name="log"></a><a name="exp"></a><a name="--index-entry-4671"></a><a name="--index-entry-4675"></a><a name="--index-entry-4679"></a><a name="--index-entry-4683"></a><a name="--index-entry-4687"></a><a name="--index-entry-4691"></a><a name="--index-entry-4695"></a><a name="--index-entry-4699"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(exp z)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(log z)</font></strong></code><br /><code><strong><font color="IndianRed">(sin z)</font></strong></code><br /><code><strong><font color="IndianRed">(cos z)</font></strong></code><br /><code><strong><font color="IndianRed">(tan z)</font></strong></code><br /><code><strong><font color="IndianRed">(asin z)</font></strong></code><br /><code><strong><font color="IndianRed">(acos z)</font></strong></code><br /><code><strong><font color="IndianRed">(atan z)</font></strong></code><br /><code><strong><font color="IndianRed">(atan y x)</font></strong></code><br /><br />These procedures compute the usual transcendental functions. <code>Log</code> computes the
natural logarithm of z (not the base ten logarithm). <code>Asin</code>, <code>acos</code>, 
and <code>atan</code> compute arcsine, arccosine, and  arctangent, respectively. 
The two-argument variant of <code>atan</code> computes 
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(angle (make-rectangular x y))
</pre></td></tr>
</tbody></table></blockquote>
 

When it is possible these procedures produce a real result from a real 
argument.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="sqrt"></a><a name="--index-entry-4760"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(sqrt z)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the principal square root of <code>z</code>. The result will have either
positive real part, or zero real part and non-negative imaginary part.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="expt"></a><a name="--index-entry-4780"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(expt z1 z2)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns <code>z1</code> raised to the power <code>z2</code>. 
<br /><br />
<strong>Note:</strong> <code>0<sup>z</sup></code> is 1 if <code>z = 0</code> and <code>0</code> otherwise.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="angle"></a><a name="magnitude"></a><a name="imag-part"></a><a name="real-part"></a><a name="make-polar"></a><a name="make-rectangular"></a><a name="--index-entry-4812"></a><a name="--index-entry-4816"></a><a name="--index-entry-4820"></a><a name="--index-entry-4824"></a><a name="--index-entry-4828"></a><a name="--index-entry-4832"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(make-rectangular x1 x2)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(make-polar x3 x)</font></strong></code><br /><code><strong><font color="IndianRed">(real-part z)</font></strong></code><br /><code><strong><font color="IndianRed">(imag-part z)</font></strong></code><br /><code><strong><font color="IndianRed">(magnitude z)</font></strong></code><br /><code><strong><font color="IndianRed">(angle z)</font></strong></code><br /><br />If x1, x2, x3, and x4 are real numbers and z is a complex number such that
<br /><br />
<code>z = x1 + x2.i = x3 . e<sup>i.x4</sup></code>
<br /><br />
Then
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(make-rectangular x1 x2)       &#8658; z
(make-polar x3 x4)             &#8658; z
(real-part z)                  &#8658; x1
(imag-part z)                  &#8658; x2
(magnitude z)                  &#8658; abs(x3)
(angle z)                      &#8658; xa
</pre></td></tr>
</tbody></table></blockquote>

where 
<code>-&#960; &lt; xa &lt;= &#960;</code> with <code>xa = x4 + 2&#960;n</code>
for some integer n.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre> 
(angle +inf.0)                 &#8658; 0.0
(angle -inf.0)                 &#8658; 3.14159265358979
</pre></td></tr>
</tbody></table></blockquote>

<br /><br />
<strong>Note:</strong> <code>Magnitude</code> is the same as <code>abs</code> for a real argument.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="inexact--exact"></a><a name="exact--inexact"></a><a name="--index-entry-4921"></a><a name="--index-entry-4925"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(exact-&gt;inexact z)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(inexact-&gt;exact z)</font></strong></code><br /><br /><code>Exact-&gt;inexact</code> returns an inexact representation of z.  
The value returned is the inexact number that is numerically closest to 
the argument. 
<code>Inexact-&gt;exact</code> returns an exact representation of z.
The value returned is the exact number that is numerically closest to 
the argument.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="number--string"></a><a name="--index-entry-4950"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(number-&gt;string z)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(number-&gt;string z radix)</font></strong></code><br /><br /><code>Radix</code> must be an exact integer, either 2, 8, 10, or 16. If omitted, radix
defaults to 10. The procedure <code>number-&gt;string</code> takes a number and a radix 
and returns as a string an external representation of the given number in 
the given radix such that
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<strong>let</strong> ((number number)
      (radix radix))
  (eqv? number
       (string-&gt;number (number-&gt;string number radix) radix)))
</pre></td></tr>
</tbody></table></blockquote>

is true. It is an error if no possible result makes this expression true.
<br /><br />
If <code>z</code> is inexact, the radix is 10, and the above expression can be 
satisfied by a result that contains a decimal point, then the result 
contains a decimal point and is expressed using the minimum number of digits 
(exclusive of exponent and trailing zeroes) needed to make the above expression
true; otherwise the format of the result is unspecified.
<br /><br />
The result returned by <code>number-&gt;string</code> never contains an explicit radix 
prefix.
<br /><br />
<strong>Note:</strong> The error case can occur only when <code>z</code> is not a complex number or
is a complex number with a non-rational real or imaginary part.
<br /><br />
<strong>Rationale:</strong> If <code>z</code> is an inexact number represented using flonums, and 
the radix is 10, then the above expression is normally satisfied by a result
containing a decimal point. The unspecified case allows for infinities, 
NaNs, and non-flonum representations.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="string--number"></a><a name="--index-entry-4994"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(string-&gt;number string)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(string-&gt;number string radix)</font></strong></code><br /><br />Returns a number of the maximally precise representation expressed by the
given <code>string</code>. <code>Radix</code> must be an exact integer, either 2, 8, 10, or 16. 
If supplied, <code>radix</code> is a default radix that may be overridden by an explicit
radix prefix in <code>string</code> (e.g. <code>&quot;#o177&quot;</code>). If <code>radix</code> is not
 supplied, then
the default radix is 10. If <code>string</code> is not a syntactically valid notation
for a number, then <code>string-&gt;number</code> returns <code>#f</code>.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(string-&gt;number <font color="red">&quot;100&quot;</font>)        &#8658;  100
(string-&gt;number <font color="red">&quot;100&quot;</font> 16)     &#8658;  256
(string-&gt;number <font color="red">&quot;1e2&quot;</font>)        &#8658;  100.0
(string-&gt;number <font color="red">&quot;15##&quot;</font>)       &#8658;  1500.0
(string-&gt;number <font color="red">&quot;+inf.0&quot;</font>)     &#8658;  +inf.0
(string-&gt;number <font color="red">&quot;-inf.0&quot;</font>)     &#8658;  -inf.0  
</pre></td></tr>
</tbody></table></blockquote>

</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="bit-shift"></a><a name="bit-not"></a><a name="bit-xor"></a><a name="bit-or"></a><a name="bit-and"></a><a name="--index-entry-5058"></a><a name="--index-entry-5062"></a><a name="--index-entry-5066"></a><a name="--index-entry-5070"></a><a name="--index-entry-5074"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(bit-and n1 n2 ...)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(bit-or n1 n2 ...)</font></strong></code><br /><code><strong><font color="IndianRed">(bit-xor n1 n2 ...)</font></strong></code><br /><code><strong><font color="IndianRed">(bit-not n)</font></strong></code><br /><code><strong><font color="IndianRed">(bit-shift n m)</font></strong></code><br /><br />These procedures allow the manipulation of integers as bit fields.
The integers can be of arbitrary length. <code>Bit-and</code>, <code>bit-or</code> and
<code>bit-xor</code> respectively compute the bitwise <em>and</em>, inclusive and
exclusive <em>or</em>. <code>bit-not</code> eturns the bitwise <em>not</em> of <code>n</code>.
<code>bit-shift</code> returns the bitwise <em>shift</em> of <code>n</code>. The integer <code>n</code>
is shifted left by <code>m</code> bits; If <code>m</code> is negative, <code>n</code> is shifted right by
<code>-m</code> bits.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(bit-or 5 3)       &#8658; 7
(bit-xor 5 3)      &#8658; 6
(bit-and 5 3)      &#8658; 1 
(bit-not 5)        &#8658; -6
(bit-or 1 2 4 8)   &#8658; 15
(bit-shift 5 3)    &#8658; 40
(bit-shift 5 -1)   &#8658; 2
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="random-integer"></a><a name="--index-entry-5149"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(random-integer n)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Return an integer in the range [0, ..., <code>n</code>[.  Subsequent results of
this procedure appear to be independent uniformly distributed over
the range [0, ..., <code>n</code>[. The argument <code>n</code> must be a positive integer,
otherwise an error is signaled. This function is equivalent to the eponym
function of SRFI-27 (see <strong><a href="http://srfi.schemers.org/srfi-27/srfi-27.html">SRFI-27</a></strong>
     (<em>Source of random bits</em>) definition for more details).</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="random-real"></a><a name="--index-entry-5174"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(random-real)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Return a real number <code>r</code> such that <code>0 &lt; r &lt; 1</code>.
Subsequent results of this procedure appear to be independent uniformly
distributed. This function is equivalent to the eponym
function of SRFI-27 (see <strong><a href="http://srfi.schemers.org/srfi-27/srfi-27.html">SRFI-27</a></strong>
     (<em>Source of random bits</em>) definition for more details).</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="decode-float"></a><a name="--index-entry-5198"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(decode-float n)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br /><code>decode-float</code> returns three exact integers: <code>significand</code>, <code>exponent</code>
and <code>sign</code> (where <code>-1 &lt;= sign &lt;= 1</code>). The values returned by <code>decode-float</code>
satisfy: 
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>n = (* sign significand (expt 2 exponent))
</pre></td></tr>
</tbody></table></blockquote>

Here is an example of <code>decode-float</code> usage.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(receive l (decode-float -1.234) l)
                    &#8658; (5557441940175192 -52 -1)
(exact-&gt;inexact (* -1 
                    5557441940175192 
                    (expt 2 -52))
                    &#8658; -1.234
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><a name="Booleans"></a>
<table width="100%"><tr><td bgcolor="#E6F2E6"><h3 id="Booleans"><font color="#000000">4.3 Booleans</font></h3></table>
<a name="--index-entry-5243"></a><a name="--index-entry-5247"></a><a name="--index-entry-5251"></a><p>Of all the standard Scheme values, only <code>#f</code> counts as false in
conditional expressions.  Except for <code>#f</code>, all standard Scheme values,
including <code>#t</code>, pairs, the empty list, symbols, numbers, strings,
vectors, and procedures, count as true.</p><p>Boolean constants evaluate to themselves, so they do not need to be
quoted in programs.</p><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="not"></a><a name="--index-entry-5262"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(not obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Not returns <code>#t</code> if <code>obj</code> is false, and returns <code>#f</code> otherwise.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>  (not #t)         &#8658;  #f
  (not 3)          &#8658;  #f
  (not (list 3))   &#8658;  #f
  (not #f)         &#8658;  #t
  (not '())        &#8658;  #f
  (not (list))     &#8658;  #f
  (not 'nil)       &#8658;  #f
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="boolean-"></a><a name="--index-entry-5309"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(boolean? obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br /><code>Boolean?</code> returns <code>#t</code> if <code>obj</code> is either <code>#t</code> or <code>#f</code> and returns
<code>#f</code> otherwise.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>  (boolean? #f)         &#8658;  #t
  (boolean? 0)          &#8658;  #f
  (boolean? '())        &#8658;  #f
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><a name="Pairs-and-lists"></a>
<table width="100%"><tr><td bgcolor="#E6F2E6"><h3 id="Pairs-and-lists"><font color="#000000">4.4 Pairs and lists</font></h3></table>
<a name="--index-entry-5348"></a><a name="--index-entry-5352"></a><a name="lists"></a><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="pair-"></a><a name="--index-entry-5359"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(pair? obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br /><code>Pair?</code> returns <code>#t</code> if <code>obj</code> is a pair, and otherwise returns <code>#f</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="cons"></a><a name="--index-entry-5382"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(cons obj1 obj2)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns a newly allocated pair whose car is obj1 and whose cdr is obj2.
The pair is guaranteed to be different (in the sense of eqv?) from every
existing object.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>    (cons 'a '())           &#8658;  (a)
    (cons '(a) '(b c d))    &#8658;  ((a) b c d)
    (cons <font color="red">&quot;a&quot;</font> '(b c))       &#8658;  (<font color="red">&quot;a&quot;</font> b c)
    (cons 'a 3)             &#8658;  (a . 3)
    (cons '(a b) 'c)        &#8658;  ((a b) . c)
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="car"></a><a name="--index-entry-5422"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(car pair)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the contents of the car field of pair.
Note that it is an error to take the <code>car</code> of the empty list.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>    (car '(a b c))          &#8658;  a
    (car '((a) b c d))      &#8658;  (a)
    (car '(1 . 2))          &#8658;  1
    (car '())               &#8658;  <font color="red"><strong>error</strong></font>
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="cdr"></a><a name="--index-entry-5459"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(cdr pair)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the contents of the cdr field of pair.
Note that it is an error to take the <code>cdr</code> of the empty list.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>    (cdr '((a) b c d))      &#8658;  (b c d)
    (cdr '(1 . 2))          &#8658;  2
    (cdr '())               &#8658;  <font color="red"><strong>error</strong></font>
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="set-car-"></a><a name="--index-entry-5493"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(set-car! pair obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Stores <code>obj</code> in the car field of <code>pair</code>.
The value returned by <code>set-car!</code> is <em>void</em>.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>   (<font color="#6959cf"><strong>define</strong></font> (f) (list 'not-a-constant-list))
   (<font color="#6959cf"><strong>define</strong></font> (g) '(constant-list))
   (set-car! (f) 3)
   (set-car! (g) 3)             &#8658;  <font color="red"><strong>error</strong></font>
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="set-cdr-"></a><a name="--index-entry-5529"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(set-cdr! pair obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Stores <code>obj</code> in the cdr field of <code>pair</code>.
The value returned by <code>set-cdr!</code> is <em>void</em>.
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="cddddr"></a><a name="cadddr"></a><a name="cdaddr"></a><a name="caaddr"></a><a name="cddadr"></a><a name="cadadr"></a><a name="cdaadr"></a><a name="caaadr"></a><a name="cdddar"></a><a name="caddar"></a><a name="cdadar"></a><a name="caadar"></a><a name="cddaar"></a><a name="cadaar"></a><a name="cdaaar"></a><a name="caaaar"></a><a name="cdddr"></a><a name="caddr"></a><a name="cdadr"></a><a name="caadr"></a><a name="cddar"></a><a name="cadar"></a><a name="cdaar"></a><a name="caaar"></a><a name="cddr"></a><a name="cadr"></a><a name="cdar"></a><a name="caar"></a><a name="--index-entry-5579"></a><a name="--index-entry-5583"></a><a name="--index-entry-5587"></a><a name="--index-entry-5591"></a><a name="--index-entry-5595"></a><a name="--index-entry-5599"></a><a name="--index-entry-5603"></a><a name="--index-entry-5607"></a><a name="--index-entry-5611"></a><a name="--index-entry-5615"></a><a name="--index-entry-5619"></a><a name="--index-entry-5623"></a><a name="--index-entry-5627"></a><a name="--index-entry-5631"></a><a name="--index-entry-5635"></a><a name="--index-entry-5639"></a><a name="--index-entry-5643"></a><a name="--index-entry-5647"></a><a name="--index-entry-5651"></a><a name="--index-entry-5655"></a><a name="--index-entry-5659"></a><a name="--index-entry-5663"></a><a name="--index-entry-5667"></a><a name="--index-entry-5671"></a><a name="--index-entry-5675"></a><a name="--index-entry-5679"></a><a name="--index-entry-5683"></a><a name="--index-entry-5687"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(caar pair)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(cadr pair)</font></strong></code><br /><code><strong><font color="IndianRed">...</font></strong></code><br /><code><strong><font color="IndianRed">(cdddar pair)</font></strong></code><br /><code><strong><font color="IndianRed">(cddddr pair)</font></strong></code><br /><br />These procedures are compositions of <code>car</code> and <code>cdr</code>, where for example
<code>caddr</code> could be defined by
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>   (<font color="#6959cf"><strong>define</strong></font> caddr (<strong>lambda</strong> (x) (car (cdr (cdr x)))))
</pre></td></tr>
</tbody></table></blockquote>

Arbitrary compositions, up to four deep, are provided.
There are twenty-eight of these procedures in all.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="null-"></a><a name="--index-entry-5732"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(null? obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns <code>#t</code> if <code>obj</code> is the empty list, otherwise returns <code>#f</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="pair-mutable-"></a><a name="--index-entry-5754"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(pair-mutable? obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns <code>#t</code> if <code>obj</code> is a mutable pair, otherwise returns <code>#f</code>. 
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(pair-mutable? '(1 . 2))    &#8658; #f
(pair-mutable? (cons 1 2))  &#8658; #t
(pair-mutable? 12)          &#8658; #f
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="list-"></a><a name="--index-entry-5788"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(list? obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns <code>#t</code> if <code>obj</code> is a list, otherwise returns <code>#f</code>. By definition,
all lists have finite length and are terminated by the empty list.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>   (list? '(a b c))     &#8658;  #t
   (list? '())          &#8658;  #t
   (list? '(a . b))     &#8658;  #f
   (<strong>let</strong> ((x (list 'a)))
     (set-cdr! x x)
     (list? x))         &#8658;  #f
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="list"></a><a name="--index-entry-5829"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(list obj ...)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns a newly allocated list of its arguments.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>   (list 'a (+ 3 4) 'c)            &#8658;  (a 7 c)
   (list)                          &#8658;  ()
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="list-"></a><a name="--index-entry-5858"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(list* obj ...)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br /><code>list*</code> is like <code>list</code> except that the last argument to <code>list*</code> is
used as the <em>cdr</em> of the last pair constructed.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>   (list* 1 2 3)        &#8658; (1 2 . 3)
   (list* 1 2 3 '(4 5)) &#8658; (1 2 3 4 5)
   (list*)              &#8658; ()
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="length"></a><a name="--index-entry-5893"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(length list)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the length of <code>list</code>.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>   (length '(a b c))               &#8658;  3
   (length '(a (b) (c d e)))       &#8658;  3
   (length '())                    &#8658;  0
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="append"></a><a name="--index-entry-5926"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(append list ...)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns a list consisting of the elements of the first list
followed by the elements of the other lists.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>   (append '(x) '(y))              &#8658;  (x y)
   (append '(a) '(b c d))          &#8658;  (a b c d)
   (append '(a (b)) '((c)))        &#8658;  (a (b) (c))
</pre></td></tr>
</tbody></table></blockquote>


The resulting list is always newly allocated, except that it shares
structure with the last list argument. The last argument may actually
be any object; an improper list results if the last argument is not a
proper list.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>   (append '(a b) '(c . d))        &#8658;  (a b c . d)
   (append '() 'a)                 &#8658;  a
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="append-"></a><a name="--index-entry-5968"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(append! list ...)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns a list consisting of the elements of the first list
followed by the elements of the other lists.
Contrarily to <code>append</code>, the parameter lists (except the last one) are 
physically modified: their last pair is changed to the value of the next 
list in the <code>append!</code> formal parameter list.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<strong>let*</strong> ((l1 (list 1 2))
       (l2 (list 3))
       (l3 (list 4 5))
       (l4 (append! l1 l2 l3)))
  (list l1 l2 l3))  &#8658; ((1 2 3 4 5) (3 4 5) (4 5))
</pre></td></tr>
</tbody></table></blockquote>

An error is signaled if one of the given lists is a constant list.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="reverse"></a><a name="--index-entry-6000"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(reverse list)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns a newly allocated list consisting of the elements of <code>list</code> in
reverse order.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>   (reverse '(a b c))              &#8658;  (c b a)
   (reverse '(a (b c) d (e (f))))  &#8658;  ((e (f)) d (b c) a)
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="reverse-"></a><a name="--index-entry-6030"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(reverse! list)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns a list consisting of the elements of <code>list</code> in reverse order.
Contrarily to <code>reverse</code>, the returned value is not newly allocated but
computed &quot;in place&quot;.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<strong>let</strong> ((l '(a b c)))
  (list (reverse! l) l))        &#8658;  ((c b a) (a))
(reverse! '(a constant list))   &#8658;  <font color="red"><strong>error</strong></font>
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="list-tail"></a><a name="--index-entry-6063"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(list-tail list k)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the sublist of <code>list</code> obtained by omitting the first <code>k</code> elements.
It is an error if list has fewer than <code>k</code> elements. List-tail could
be defined by
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>   (<font color="#6959cf"><strong>define</strong></font> list-tail
      (<strong>lambda</strong> (x k)
         (<strong>if</strong> (zero? k)
            x
            (list-tail (cdr x) (- k 1)))))
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="last-pair"></a><a name="--index-entry-6097"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(last-pair list)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the last pair of <code>list</code>.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(last-pair '(1 2 3))   &#8658; (3)
(last-pair '(1 2 . 3)) &#8658; (2 . 3)
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="list-ref"></a><a name="--index-entry-6126"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(list-ref list k)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the <code>k</code>th element of <code>list</code>. (This is the same as the car
of <code>(list-tail list k)</code>.) It is an error if list has fewer than <code>k</code>
elements.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>   (list-ref '(a b c d) 2)                 &#8658;  c
   (list-ref '(a b c d)
             (inexact-&gt;exact (round 1.8))) &#8658;  c
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="member"></a><a name="memv"></a><a name="memq"></a><a name="--index-entry-6162"></a><a name="--index-entry-6166"></a><a name="--index-entry-6170"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(memq obj list)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(memv obj list)</font></strong></code><br /><code><strong><font color="IndianRed">(member obj list)</font></strong></code><br /><br />These procedures return the first sublist of list whose car is <code>obj</code>,
where the sublists of list are the non-empty lists returned by
<code>(list-tail list k)</code> for <code>k</code> less than the length of list.
If <code>obj</code> does not occur in <code>list</code>, then <code>#f</code> (not the empty list) is
returned. <code>Memq</code> uses <code>eq?</code> to compare obj with the elements of list,
while <code>memv</code> uses <code>eqv?</code> and <code>member</code> uses <code>equal?</code>.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>   (memq 'a '(a b c))              &#8658;  (a b c)
   (memq 'b '(a b c))              &#8658;  (b c)
   (memq 'a '(b c d))              &#8658;  #f
   (memq (list 'a) '(b (a) c))     &#8658;  #f
   (member (list 'a)
           '(b (a) c))             &#8658;  ((a) c)
   (memv 101 '(100 101 102))       &#8658;  (101 102)
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="assoc"></a><a name="assv"></a><a name="assq"></a><a name="--index-entry-6234"></a><a name="--index-entry-6238"></a><a name="--index-entry-6242"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(assq obj alist)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(assv obj alist)</font></strong></code><br /><code><strong><font color="IndianRed">(assoc obj alist)</font></strong></code><br /><br /><code>Alist</code> (for &quot;association list&quot;) must be a list of pairs. These procedures
find the first pair in <code>alist</code> whose car field is <code>obj</code>, and returns that
pair. If no pair in <code>alist</code> has <code>obj</code> as its car, then <code>#f</code> (not the empty
list) is returned. <code>Assq</code> uses <code>eq?</code> to compare <code>obj</code> with the car fields
of the pairs in <code>alist</code>, while <code>assv</code> uses <code>eqv?</code> and <code>assoc</code> uses <code>equal?</code>.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>   (<font color="#6959cf"><strong>define</strong></font> e '((a 1) (b 2) (c 3)))
   (assq 'a e)                &#8658;  (a 1)
   (assq 'b e)                &#8658;  (b 2)
   (assq 'd e)                &#8658;  #f
   (assq (list 'a) '(((a)) ((b)) ((c))))
                              &#8658;  #f
   (assoc (list 'a) '(((a)) ((b)) ((c))))
                              &#8658;  ((a))
   (assv 5 '((2 3) (5 7) (11 13)))
                              &#8658;  (5 7)
</pre></td></tr>
</tbody></table></blockquote>


<strong>Rationale:</strong> Although they are ordinarily used as predicates,
<code>memq</code>, <code>memv</code>, <code>member</code>, <code>assq</code>, <code>assv</code>, and <code>assoc</code> do not have question
marks in their names because they return useful values rather than just
<code>#t</code> or #<code>f</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="copy-tree"></a><a name="--index-entry-6319"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(copy-tree obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br /><code>Copy-tree</code> recursively copies trees of pairs. If <code>obj</code> is
not a pair, it is returned; otherwise the result is a new pair whose
<code>car</code> and <code>cdr</code> are obtained by calling <code>copy-tree</code> on
the <code>car</code> and <code>cdr</code> of <code>obj</code>, respectively.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="filter-"></a><a name="filter"></a><a name="--index-entry-6346"></a><a name="--index-entry-6350"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(filter  pred list)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(filter! pred list)</font></strong></code><br /><br /><code>Filter</code> returns all the elements of <code>list</code> that satisfy predicate
<code>pred</code>. The <code>list</code> is not disordered: elements that appear in the
result list occur in the same order as they occur in the argument
list. <code>Filter!</code> does the same job than <code>filter</code> by physically 
modifying its <code>list</code> argument 
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(filter even? '(0 7 8 8 43 -4)) &#8658; (0 8 8 -4)
(<strong>let*</strong> ((l1 (list 0 7 8 8 43 -4))
       (l2 (filter! even? l1)))
   (list l1 l2))                &#8658; ((0 8 8 -4) (0 8 8 -4))
</pre></td></tr>
</tbody></table></blockquote>

An error is signaled if <code>list</code> is a constant list.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="remove-"></a><a name="remove"></a><a name="--index-entry-6394"></a><a name="--index-entry-6398"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(remove pred list)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br /><code>Remove</code> returns <code>list</code> without the elements that satisfy predicate <code>pred</code>: 
<br /><br />
The list is not disordered -- elements that appear in the result list occur
in the same order as they occur in the argument list. <code>Remove!</code> does the
same job than <code>remove</code> by physically modifying its <code>list</code> argument 
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(remove even? '(0 7 8 8 43 -4)) &#8658; (7 43)
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="delete-"></a><a name="delete"></a><a name="--index-entry-6431"></a><a name="--index-entry-6435"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(delete  x list [=])</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(delete! x list [=])</font></strong></code><br /><br /><code>Delete</code> uses the comparison procedure <code>=</code>, which defaults to
<code>equal?</code>, to find all elements of <code>list</code> that are equal to <code>x</code>, and
deletes them from <code>list</code>. The dynamic order in which the various
applications of <code>=</code> are made is not specified.
<br /><br />
The list is not disordered -- elements that appear in the result
list occur in the same order as they occur in the argument list.
<br /><br />
The comparison procedure is used in this way: <code>(= x ei)</code>. That is,
<code>x</code> is always the first argument, and a list element is always the
second argument. The comparison procedure will be used to compare
each element of list exactly once; the order in which it is applied
to the various <code>ei</code> is not specified. Thus, one can reliably remove
all the numbers greater than five from a list with
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(delete 5 list &lt;) 
</pre></td></tr>
</tbody></table></blockquote>


<code>delete!</code> is the linear-update variant of <code>delete</code>. It is allowed, 
but not required, to alter the cons cells in its argument <code>list</code> to 
construct the result.  </td></tr>
</tbody></table><a name="Symbols"></a>
<table width="100%"><tr><td bgcolor="#E6F2E6"><h3 id="Symbols"><font color="#000000">4.5 Symbols</font></h3></table>
<a name="bar-in-symbol"></a><p>The STklos reader can read symbols whose names contain special
characters or letters in the non standard case.  When a symbol is
read, the parts enclosed in bars "|" will be entered
verbatim into the symbol's name. The "|" characters are not
part of the symbol; they only serve to delimit the sequence of
characters that must be entered "as is". In order to maintain
read-write invariance, symbols containing such sequences of special
characters will be written between a pair of "|".</p><blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>'|a|                  &#8658;  a
(string-&gt;symbol <font color="red">&quot;a&quot;</font>)  &#8658;  |A|
(symbol-&gt;string '|A|) &#8658;  <font color="red">&quot;A&quot;</font>
'|a  b|               &#8658;  |a  b|
'a|B|c                &#8658;  |aBc|
(write '|FoO|)        -| |FoO| 
(display '|FoO|)      -| FoO
</pre></td></tr>
</tbody></table></blockquote>
<br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="symbol-"></a><a name="--index-entry-6513"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(symbol? obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns <code>#t</code> if obj is a symbol, otherwise returns <code>#f</code>.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>   (symbol? 'foo)          &#8658;  #t
   (symbol? (car '(a b)))  &#8658;  #t
   (symbol? <font color="red">&quot;bar&quot;</font>)         &#8658;  #f
   (symbol? 'nil)          &#8658;  #t
   (symbol? '())           &#8658;  #f
   (symbol? #f)            &#8658;  #f
   (symbol? <font color="#00cf00">:key</font>)          &#8658;  #f
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="symbol--string"></a><a name="--index-entry-6561"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(symbol-&gt;string string)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the name of <code>symbol</code> as a string. If the symbol was part of an
object returned as the value of a literal expression or by a call to the 
<code>read</code> procedure, and its name contains alphabetic characters, then the
string returned will contain characters in the implementation's preferred 
standard case -- <span style="font-variant: small-caps">STklos</span> prefers lower case. If the symbol was returned 
by <code>string-&gt;symbol</code>, the case of characters in the string returned will be
the same as the case in the string that was passed to <code>string-&gt;symbol</code>. It
is an error to apply mutation procedures like <code>string-set!</code> to strings 
returned by this procedure.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>   (symbol-&gt;string 'flying-fish)  &#8658;  <font color="red">&quot;flying-fish&quot;</font>
   (symbol-&gt;string 'Martin)       &#8658;  <font color="red">&quot;martin&quot;</font>
   (symbol-&gt;string (string-&gt;symbol <font color="red">&quot;Malvina&quot;</font>))
                                  &#8658;  <font color="red">&quot;Malvina&quot;</font>
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="string--symbol"></a><a name="--index-entry-6604"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(string-&gt;symbol string)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the symbol whose name is <code>string</code>. This procedure can create 
symbols with names containing special characters or letters in the 
non-standard case, but it is usually a bad idea to create such symbols 
because in some implementations of Scheme they cannot be read as themselves. 

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>   (eq? 'mISSISSIppi 'mississippi)     &#8658;  #t
   (string-&gt;symbol <font color="red">&quot;mISSISSIppi&quot;</font>)      &#8658;  |mISSISSIppi|
   (eq? 'bitBlt (string-&gt;symbol <font color="red">&quot;bitBlt&quot;</font>))
                                       &#8658;  #f
   (eq? 'JollyWog
        (string-&gt;symbol
          (symbol-&gt;string 'JollyWog))) &#8658;  #t
   (string=? <font color="red">&quot;K. Harper, M.D.&quot;</font>
             (symbol-&gt;string
               (string-&gt;symbol <font color="red">&quot;K. Harper, M.D.&quot;</font>)))
                                       &#8658;  #t
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="string--uninterned-symbol"></a><a name="--index-entry-6653"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(string-&gt;unterned-symbol string)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the symbol whose print name is made from the characters of
<code>string</code>. This symbol is guaranteed to be <em>unique</em> (i.e. not
<code>eq?</code> to any other symbol):
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<strong>let</strong> ((ua (string-&gt;uninterned-symbol <font color="red">&quot;a&quot;</font>)))
  (list (eq? 'a ua)
        (eqv? 'a ua)
        (eq? ua (string-&gt;uninterned-symbol <font color="red">&quot;a&quot;</font>))
        (eqv? ua (string-&gt;uninterned-symbol <font color="red">&quot;a&quot;</font>))))
          &#8658; (#f #t #f #t)
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="gensym"></a><a name="--index-entry-6690"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(gensym)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(gensym prefix)</font></strong></code><br /><br />Creates a new symbol. The print name of the generated symbol 
consists of a prefix (which defaults to "<code>G</code>") followed by the decimal
representation of a number. If <code>prefix</code> is specified, it must be 
either a string or a symbol.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(gensym)        &#8658; |G100|
(gensym <font color="red">&quot;foo-&quot;</font>) &#8658; foo-101
(gensym 'foo-)  &#8658; foo-102
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><a name="Characters"></a>
<table width="100%"><tr><td bgcolor="#E6F2E6"><h3 id="Characters"><font color="#000000">4.6 Characters</font></h3></table>
<a name="--index-entry-6730"></a><a name="--index-entry-6734"></a><p>The following table gives the list of allowed character names with their
ASCII eqivalent expressed in octal. Some chracaters have an alternate name
which is also shown in this table.</p><center><table width="70%" style="border-collapse: collapse;" frame="border" rules="cols"><tbody>
<tr bgcolor="#eeeeee"><th align="center">name</th><th align="center">value</th><th align="center">alt. name</th><th align="center">name</th><th align="center">value</th><th align="center">alt. name</th></tr>
<tr><td align="center">nul</td><td align="center">000</td><td align="center">null</td><td align="center">soh</td><td align="center">001</td><td align="center"></td></tr>
<tr><td align="center">stx</td><td align="center">002</td><td align="center"></td><td align="center">etx</td><td align="center">003</td><td align="center"></td></tr>
<tr><td align="center">eot</td><td align="center">004</td><td align="center"></td><td align="center">enq</td><td align="center">005</td><td align="center"></td></tr>
<tr><td align="center">ack</td><td align="center">006</td><td align="center"></td><td align="center">bel</td><td align="center">007</td><td align="center">bell</td></tr>
<tr><td align="center">bs</td><td align="center">010</td><td align="center">backspace</td><td align="center">ht</td><td align="center">011</td><td align="center">tab</td></tr>
<tr><td align="center">nl</td><td align="center">012</td><td align="center">newline</td><td align="center">vt</td><td align="center">013</td><td align="center"></td></tr>
<tr><td align="center">np</td><td align="center">014</td><td align="center">page</td><td align="center">cr</td><td align="center">015</td><td align="center">return</td></tr>
<tr><td align="center">so</td><td align="center">016</td><td align="center"></td><td align="center">si</td><td align="center">017</td><td align="center"></td></tr>
<tr><td align="center">dle</td><td align="center">020</td><td align="center"></td><td align="center">dc1</td><td align="center">021</td><td align="center"></td></tr>
<tr><td align="center">dc2</td><td align="center">022</td><td align="center"></td><td align="center">dc3</td><td align="center">023</td><td align="center"></td></tr>
<tr><td align="center">dc4</td><td align="center">024</td><td align="center"></td><td align="center">nak</td><td align="center">025</td><td align="center"></td></tr>
<tr><td align="center">syn</td><td align="center">026</td><td align="center"></td><td align="center">etb</td><td align="center">027</td><td align="center"></td></tr>
<tr><td align="center">can</td><td align="center">030</td><td align="center"></td><td align="center">em</td><td align="center">031</td><td align="center"></td></tr>
<tr><td align="center">sub</td><td align="center">032</td><td align="center"></td><td align="center">esc</td><td align="center">033</td><td align="center">escape</td></tr>
<tr><td align="center">fs</td><td align="center">034</td><td align="center"></td><td align="center">gs</td><td align="center">035</td><td align="center"></td></tr>
<tr><td align="center">rs</td><td align="center">036</td><td align="center"></td><td align="center">us</td><td align="center">037</td><td align="center"></td></tr>
<tr><td align="center">sp</td><td align="center">040</td><td align="center">space</td><td align="center">del</td><td align="center">177</td><td align="center">delete</td></tr>
</tbody></table>
</center>
<br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="char-"></a><a name="--index-entry-6869"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(char? obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns <code>#t</code> if <code>obj</code> is a character, otherwise returns <code>#f</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="char---"></a><a name="char---"></a><a name="char--"></a><a name="char--"></a><a name="char--"></a><a name="--index-entry-6895"></a><a name="--index-entry-6899"></a><a name="--index-entry-6903"></a><a name="--index-entry-6907"></a><a name="--index-entry-6911"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(char=? char1 char2)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(char&lt;? char1 char2)</font></strong></code><br /><code><strong><font color="IndianRed">(char&gt;? char1 char2)</font></strong></code><br /><code><strong><font color="IndianRed">(char&lt;=? char1 char2)</font></strong></code><br /><code><strong><font color="IndianRed">(char&gt;=? char1 char2)</font></strong></code><br /><br />These procedures impose a total ordering on the set of characters. 
It is guaranteed that under this ordering:
<ul><li>The upper case characters are in order.</li>
<li>The lower case characters are in order.</li>
<li>The digits are in order.</li>
<li>Either all the digits precede all the upper case letters, or vice versa.</li>
<li>Either all the digits precede all the lower case letters, or vice versa.</li>
</ul></td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="char-ci---"></a><a name="char-ci---"></a><a name="char-ci--"></a><a name="char-ci--"></a><a name="char-ci--"></a><a name="--index-entry-6956"></a><a name="--index-entry-6960"></a><a name="--index-entry-6964"></a><a name="--index-entry-6968"></a><a name="--index-entry-6972"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(char-ci=? char1 char2)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(char-ci&lt;? char1 char2)</font></strong></code><br /><code><strong><font color="IndianRed">(char-ci&gt;? char1 char2)</font></strong></code><br /><code><strong><font color="IndianRed">(char-ci&lt;=? char1 char2)</font></strong></code><br /><code><strong><font color="IndianRed">(char-ci&gt;=? char1 char2)</font></strong></code><br /><br />These procedures are similar to <code>char=?</code> et cetera, but they treat
upper case and lower case letters as the same. For example, 
<code>(char-ci=? #A #a)</code> returns <code>#t</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="char-lower-case-"></a><a name="char-upper-case-"></a><a name="char-whitespace-"></a><a name="char-numeric-"></a><a name="char-alphabetic-"></a><a name="--index-entry-7014"></a><a name="--index-entry-7018"></a><a name="--index-entry-7022"></a><a name="--index-entry-7026"></a><a name="--index-entry-7030"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(char-alphabetic? char)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(char-numeric? char)</font></strong></code><br /><code><strong><font color="IndianRed">(char-whitespace? char)</font></strong></code><br /><code><strong><font color="IndianRed">(char-upper-case? letter)</font></strong></code><br /><code><strong><font color="IndianRed">(char-lower-case? letter)</font></strong></code><br /><br />These procedures return <code>#t</code> if their arguments are alphabetic, numeric,
whitespace, upper case, or lower case characters, respectively, otherwise they
return <code>#f</code>. The following remarks, which are specific to the ASCII character 
set, are intended only as a guide: The alphabetic characters are the 52
upper and lower case letters. The numeric characters are the ten decimal
digits. The whitespace characters are space, tab, line feed, form feed,
and carriage return.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="integer--char"></a><a name="char--integer"></a><a name="--index-entry-7068"></a><a name="--index-entry-7072"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(char-&gt;integer char)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(integer-&gt;char n)</font></strong></code><br /><br />Given a character, <code>char-&gt;integer</code> returns an exact integer
representation of the character. Given an exact integer that is the
image of a character under <code>char-&gt;integer</code>, <code>integer-&gt;char</code> returns
that character. These procedures implement order-preserving
isomorphisms between the set of characters under the <code>char&lt;=?</code>
ordering and some subset of the integers under the <code>&lt;=</code>
ordering. That is, if
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>   (char&lt;=? a b) &#8658; #t  <strong>and</strong>  (&lt;= x y) &#8658; #t
</pre></td></tr>
</tbody></table></blockquote>

and x and y are in the domain of <code>integer-&gt;char</code>, then
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>   (&lt;= (char-&gt;integer a)
       (char-&gt;integer b))         &#8658;  #t

  (char&lt;=? (integer-&gt;char x)
           (integer-&gt;char y))     &#8658;  #t
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="char-downcase"></a><a name="char-upcase"></a><a name="--index-entry-7125"></a><a name="--index-entry-7129"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(char-upcase char)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(char-downcase char)</font></strong></code><br /><br />These procedures return a character <code>char2</code> such that 
<code>(char-ci=? char char2)</code>. In addition, if char is alphabetic, then the 
result of <code>char-upcase</code> is upper case and the result of <code>char-downcase</code> is
lower case. </td></tr>
</tbody></table><a name="Strings"></a>
<table width="100%"><tr><td bgcolor="#E6F2E6"><h3 id="Strings"><font color="#000000">4.7 Strings</font></h3></table>
<a name="--index-entry-7157"></a><p>STklos string constants allow the insertion of arbitrary characters
by encoding them as escape sequences. An escape sequence is introduced
by a backslash "\".  The valid escape sequences are shown in
the following table.</p><center><table style="border-collapse: collapse;" frame="border" rules="cols"><tbody>
<tr bgcolor="#eeeeee"><th align="center">Sequence</th><th align="center">Character inserted</th></tr>
<tr><td align="center">\b</td><td align="center">Backspace</td></tr>
<tr><td align="center">\e</td><td align="center"> Escape</td></tr>
<tr><td align="center">\n</td><td align="center"> Newline</td></tr>
<tr><td align="center">\t</td><td align="center"> Horizontal Tab</td></tr>
<tr><td align="center">\n</td><td align="center"> Carriage Return</td></tr>
<tr><td align="center">\0abc</td><td align="center"> ASCII character with octal value abc</td></tr>
<tr><td align="center">\xab</td><td align="center"> ASCII character with hexadecimal value ab</td></tr>
<tr><td align="center">\&lt;newline&gt;</td><td align="center"> None (permits to enter a string on several lines)</td></tr>
<tr><td align="center">\&lt;other&gt;</td><td align="center"> &lt;other&gt;</td></tr>
</tbody></table>
</center>
<p>For instance, the string</p><blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre><font color="red">&quot;ab040c\nd
e&quot;</font>
</pre></td></tr>
</tbody></table></blockquote>
<p>is the string consisting of the characters 
<code>#\a</code>, <code>#\b</code>, <code>#\space</code>, 
<code>#\c</code>, <code>#\newline</code>, <code>#\d</code> and <code>#\e</code>.</p><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="string-"></a><a name="--index-entry-7212"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(string? obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns <code>#t</code> if <code>obj</code> is a string, otherwise returns <code>#f</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="make-string"></a><a name="--index-entry-7234"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(make-string k)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(make-string k char)</font></strong></code><br /><br /><code>Make-string</code> returns a newly allocated string of length <code>k</code>. If <code>char</code> is
given, then all elements of the string are initialized to <code>char</code>, otherwise
the contents of the string are unspecified.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="string"></a><a name="--index-entry-7261"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(string char ...)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns a newly allocated string composed of the arguments.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="string-length"></a><a name="--index-entry-7280"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(string-length string)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the number of characters in the given <code>string</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="string-ref"></a><a name="--index-entry-7300"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(string-ref string k)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br /><code>String-ref</code> returns character k of string using zero-origin indexing
(<code>k</code> must be a valid index of string).</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="string-set-"></a><a name="--index-entry-7321"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(string-set! string k char)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br /><code>String-set!</code> stores <code>char</code> in element <code>k</code> of <code>string</code> and returns 
<em>void</em> (<code>k</code> must be a valid index of <code>string</code>). 

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<font color="#6959cf"><strong>define</strong></font> (f) (make-string 3 #*))
(<font color="#6959cf"><strong>define</strong></font> (g) <font color="red">&quot;***&quot;</font>)
(string-set! (f) 0 #?)  &#8658;  void
(string-set! (g) 0 #?)  &#8658;  <font color="red"><strong>error</strong></font>
(string-set! (symbol-&gt;string 'immutable) 0 #?)  
                         &#8658;  <font color="red"><strong>error</strong></font>
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="string-ci--"></a><a name="string--"></a><a name="--index-entry-7369"></a><a name="--index-entry-7373"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(string=? string1 string2)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(string-ci=? string1 string2)</font></strong></code><br /><br />Returns <code>#t</code> if the two strings are the same length and contain the same
characters in the same positions, otherwise returns <code>#f</code>. <code>String-ci=?</code>
treats upper and lower case letters as though they were the same character,
but <code>string=?</code> treats upper and lower case as distinct characters.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="string-ci---"></a><a name="string-ci--"></a><a name="string-ci---"></a><a name="string-ci--"></a><a name="string---"></a><a name="string--"></a><a name="string---"></a><a name="string--"></a><a name="--index-entry-7407"></a><a name="--index-entry-7411"></a><a name="--index-entry-7415"></a><a name="--index-entry-7419"></a><a name="--index-entry-7423"></a><a name="--index-entry-7427"></a><a name="--index-entry-7431"></a><a name="--index-entry-7435"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(string&lt;? string1 string2)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(string&gt;? string1 string2)</font></strong></code><br /><code><strong><font color="IndianRed">(string&lt;=? string1 string2)</font></strong></code><br /><code><strong><font color="IndianRed">(string&gt;=? string1 string2)</font></strong></code><br /><code><strong><font color="IndianRed">(string-ci&lt;? string1 string2)</font></strong></code><br /><code><strong><font color="IndianRed">(string-ci&gt;? string1 string2)</font></strong></code><br /><code><strong><font color="IndianRed">(string-ci&lt;=? string1 string2)</font></strong></code><br /><code><strong><font color="IndianRed">(string-ci&gt;=? string1 string2)</font></strong></code><br /><br />These procedures are the lexicographic extensions to strings of the
corresponding orderings on characters. For example, <code>string&lt;?</code> is the
lexicographic ordering on strings induced by the ordering <code>char&lt;?</code> on
characters. If two strings differ in length but are the same up to the
length of the shorter string, the shorter string is considered to be
lexicographically less than the longer string.
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="substring"></a><a name="--index-entry-7484"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(substring string start end)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br /><code>String</code> must be a string, and <code>start</code> and <code>end</code> must be exact integers 
satisfying
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>0 &lt;= start &lt;= end &lt;= (string-length string).
</pre></td></tr>
</tbody></table></blockquote>

<code>Substring</code> returns a newly allocated string formed from the characters
of <code>string</code> beginning with index <code>start</code> (inclusive) and ending with
index <code>end</code> (exclusive).</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="string-append"></a><a name="--index-entry-7515"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(string-append string ...)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns a newly allocated string whose characters form the concatenation
of the given strings.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="list--string"></a><a name="string--list"></a><a name="--index-entry-7535"></a><a name="--index-entry-7539"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(string-&gt;list string)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(list-&gt;string list)</font></strong></code><br /><br /><code>String-&gt;list</code> returns a newly allocated list of the characters that make
up the given string. <code>List-&gt;string</code> returns a newly allocated string 
formed from the characters in the list <code>list</code>, which must be a list of
characters. <code>String-&gt;list</code> and <code>list-&gt;string</code> are inverses so far as
<code>equal?</code> is concerned.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="string-copy"></a><a name="--index-entry-7568"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(string-copy string)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns a newly allocated copy of the given <code>string</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="string-split"></a><a name="--index-entry-7588"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(string-split str)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(string-split str delimiters)</font></strong></code><br /><br />parses <code>string</code> and returns a list of tokens ended by a character of the
<code>delimiters</code> string. If <code>delimiters</code> is omitted, it defaults to a string 
containing a space, a tabulation and a newline characters. 
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(string-split <font color="red">&quot;/usr/local/bin&quot;</font> <font color="red">&quot;/&quot;</font>) 
                       &#8658; (<font color="red">&quot;usr&quot;</font> <font color="red">&quot;local&quot;</font> <font color="red">&quot;bin&quot;</font>)
(string-split <font color="red">&quot;once   upon a time&quot;</font>) 
                       &#8658; (<font color="red">&quot;once&quot;</font> <font color="red">&quot;upon&quot;</font> <font color="red">&quot;a&quot;</font> <font color="red">&quot;time&quot;</font>)
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="string-index"></a><a name="--index-entry-7635"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(string-index str1 str2)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the (first) index where <code>str1</code> is a substring of <code>str2</code> if it exists;
otherwise returns <code>#f</code>.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(string-index <font color="red">&quot;ca&quot;</font> <font color="red">&quot;abracadabra&quot;</font>) &#8658;  4
(string-index <font color="red">&quot;ba&quot;</font> <font color="red">&quot;abracadabra&quot;</font>) &#8658;  #f
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="string-find-"></a><a name="--index-entry-7670"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(string-find? str1 str2)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns <code>#t</code> if <code>str1</code> appears somewhere in <code>str2</code>; otherwise returns <code>#f</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="string-fill-"></a><a name="--index-entry-7692"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(string-fill! string char)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Stores <code>char</code> in every element of the given <code>string</code> and returns <em>void</em>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="string-blit-"></a><a name="--index-entry-7713"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(string-blit! s1 s2 offset)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />This function places the characters of string <code>s2</code> in the string <code>s1</code> 
starting at position <code>offset</code>. The result of <code>string-blit!</code> may modify 
the string <code>s1</code>. Note that the characters of <code>s2</code> can be written after 
the end of <code>s1</code> (in which case a new string is allocated).
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(string-blit! (make-string 6 #X) <font color="red">&quot;abc&quot;</font> 2)
              &#8658; <font color="red">&quot;XXabcX&quot;</font>
(string-blit! (make-string 10 #X) <font color="red">&quot;abc&quot;</font> 5)
              &#8658; <font color="red">&quot;XXXXXabc&quot;</font>
(string-blit! (make-string 6 #X) <font color="red">&quot;a&quot;</font> 10)
              &#8658; <font color="red">&quot;XXXXXX0000a&quot;</font>
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="string-mutable-"></a><a name="--index-entry-7760"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(string-mutable? obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns <code>#t</code> if <code>obj</code> is a mutable string, otherwise returns <code>#f</code>. 
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(string-mutable? <font color="red">&quot;abc&quot;</font>)                &#8658; #f
(string-mutable? (string-copy <font color="red">&quot;abc&quot;</font>))  &#8658; #t
(string-mutable? (string #a #b #c)) &#8658; #t
(string-mutable? 12)                   &#8658; #f
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><a name="--index-entry-7797"></a><p>The following string primitives are compatible with <strong><a href="http://srfi.schemers.org/srfi-13/srfi-13.html">SRFI-13</a></strong>
     (<em>String Library</em>)
and their documentation comes from the SRFI document.</p><p><strong>Note:</strong> The string SRFI is supported by <span style="font-variant: small-caps">STklos</span>. The
function listed below just don't need to load the full SRFI to be used</p><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="string-downcase"></a><a name="--index-entry-7811"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(string-downcase str)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(string-downcase str start)</font></strong></code><br /><code><strong><font color="IndianRed">(string-downcase str start end)</font></strong></code><br /><br />Returns a string in which the upper case letters of string <code>str</code> between the 
<code>start</code> and <code>end</code> indices have been replaced by their lower case equivalent.
If <code>start</code> is omited, it defaults to 0. If <code>end</code> is omited, it defaults to
the length of <code>str</code>. 
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(string-downcase <font color="red">&quot;Foo BAR&quot;</font>)        &#8658; <font color="red">&quot;foo bar&quot;</font>
(string-downcase <font color="red">&quot;Foo BAR&quot;</font> 4)      &#8658; <font color="red">&quot;bar&quot;</font>
(string-downcase <font color="red">&quot;Foo BAR&quot;</font> 4 6)    &#8658; <font color="red">&quot;ba&quot;</font>
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="string-downcase-"></a><a name="--index-entry-7862"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(string-downcase! str)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(string-downcase! str start)</font></strong></code><br /><code><strong><font color="IndianRed">(string-downcase! str start end)</font></strong></code><br /><br />This is the in-place side-effecting variant of <code>string-downcase</code>. 
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(string-downcase! (string-copy <font color="red">&quot;Foo BAR&quot;</font>) 4)    &#8658; <font color="red">&quot;Foo bar&quot;</font>
(string-downcase! (string-copy <font color="red">&quot;Foo BAR&quot;</font>) 4 6)  &#8658; <font color="red">&quot;Foo baR&quot;</font>
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="string-upcase"></a><a name="--index-entry-7903"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(string-upcase str)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(string-upcase str start)</font></strong></code><br /><code><strong><font color="IndianRed">(string-upcase str start end)</font></strong></code><br /><br />Returns a string in which the lower case letters of string <code>str</code> between the 
<code>start</code> and <code>end</code> indices have been replaced by their upper case equivalent.
If <code>start</code> is omited, it defaults to 0. If <code>end</code> is omited, it defaults to
the length of <code>str</code>. </td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="string-upcase-"></a><a name="--index-entry-7935"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(string-upcase! str)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(string-upcase! str start)</font></strong></code><br /><code><strong><font color="IndianRed">(string-upcase! str start end)</font></strong></code><br /><br />This is the in-place side-effecting variant of <code>string-upcase</code>. </td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="string-titlecase"></a><a name="--index-entry-7962"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(string-titlecase str)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(string-titlecase str start)</font></strong></code><br /><code><strong><font color="IndianRed">(string-titlecase str start end)</font></strong></code><br /><br />This function returns a string.  For every character <code>c</code> in the
selected range of <code>str</code>, if <code>c</code> is preceded by a cased character, it
is downcased; otherwise it is titlecased. If <code>start</code> is omited, it 
defaults to 0. If <code>end</code> is omited, it defaults to the length of <code>str</code>. 
Note that if a <code>start</code> index is specified, then the character preceding
<code>s`(start)</code> has no effect on the titlecase decision for character <code>s`(start)</code>.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(string-titlecase <font color="red">&quot;--capitalize tHIS sentence.&quot;</font>) 
         &#8658;  <font color="red">&quot;--Capitalize This Sentence.&quot;</font>
(string-titlecase <font color="red">&quot;see Spot run. see Nix run.&quot;</font>) 
         &#8658;  <font color="red">&quot;See Spot Run. See Nix Run.&quot;</font>
(string-titlecase <font color="red">&quot;3com makes routers.&quot;</font>) 
         &#8658;  <font color="red">&quot;3Com Makes Routers.&quot;</font>
(string-titlecase <font color="red">&quot;greasy fried chicken&quot;</font> 2) 
         &#8658; <font color="red">&quot;Easy Fried Chicken&quot;</font>
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="string-titlecase-"></a><a name="--index-entry-8025"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(string-titlecase! str)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(string-titlecase! str start)</font></strong></code><br /><code><strong><font color="IndianRed">(string-titlecase! str start end)</font></strong></code><br /><br />This is the in-place side-effecting variant of <code>string-titlecase</code>. </td></tr>
</tbody></table><a name="Vectors"></a>
<table width="100%"><tr><td bgcolor="#E6F2E6"><h3 id="Vectors"><font color="#000000">4.8 Vectors</font></h3></table>
<a name="--index-entry-8053"></a><p>Vectors are heterogenous structures whose elements are
indexed by integers.  A vector typically occupies less space than
a list of the same length, and the average time required to
access a randomly chosen element is typically less for the vector
than for the list.</p><p>The length of a vector is the number of elements that it
contains.  This number is a non-negative integer that is fixed
when the vector is created.  The valid indexes of a vector are
the exact non-negative integers less than the length of the
vector.  The first element in a vector is indexed by zero, and
the last element is indexed by one less than the length of the
vector.</p><p>Vectors are written using the notation <code>#(obj ...)</code>.
For example, a vector of length 3 containing the number zero in
element 0, the list <code>(2 2 2 2)</code> in element 1, and the
string <code>&quot;Anna&quot;</code> in element 2 can be written as
following: <blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>#(0 (2 2 2 2) <font color="red">&quot;Anna&quot;</font>)
</pre></td></tr>
</tbody></table></blockquote>
</p><p><strong>Note:</strong> In STklos, vectors constants don't need to be quoted.</p><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="vector-"></a><a name="--index-entry-8073"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(vector? obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns <code>#t</code> if <code>obj</code> is a vector, otherwise returns <code>#f</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="make-vector"></a><a name="--index-entry-8095"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(make-vector k)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(make-vector k fill)</font></strong></code><br /><br />Returns a newly allocated vector of <code>k</code> elements. If a second argument is
given, then each element is initialized to <code>fill</code>. Otherwise the initial 
contents of each element is unspecified.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="vector"></a><a name="--index-entry-8120"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(vector obj ...)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns a newly allocated vector whose elements contain the given arguments. 
Analogous to <code>list</code>.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(vector 'a 'b 'c)               &#8658;  #(a b c)
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="vector-length"></a><a name="--index-entry-8147"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(vector-length vector)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the number of elements in <code>vector</code> as an exact integer.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="vector-ref"></a><a name="--index-entry-8167"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(vector-ref vector k)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br /><code>k</code> must be a valid index of <code>vector</code>. <code>Vector-ref</code> returns the contents of
element <code>k</code> of vector.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(vector-ref '#(1 1 2 3 5 8 13 21)
            5)         &#8658;  8
(vector-ref '#(1 1 2 3 5 8 13 21)
            (<strong>let</strong> ((i (round (* 2 (acos -1)))))
              (<strong>if</strong> (inexact? i)
                  (inexact-&gt;exact i)
                  i))) &#8658; 13
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="vector-set-"></a><a name="--index-entry-8207"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(vector-set! vector k obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br /><code>k</code> must be a valid index of <code>vector</code>. <code>Vector-set!</code> stores <code>obj</code> in element
<code>k</code> of <code>vector</code>. The value returned by <code>vector-set!</code> is <em>void</em>.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<strong>let</strong> ((vec (vector 0 '(2 2 2 2) <font color="red">&quot;Anna&quot;</font>)))
  (vector-set! vec 1 '(<font color="red">&quot;Sue&quot;</font> <font color="red">&quot;Sue&quot;</font>))
  vec)      &#8658;  #(0 (<font color="red">&quot;Sue&quot;</font> <font color="red">&quot;Sue&quot;</font>) <font color="red">&quot;Anna&quot;</font>)

(vector-set! '#(0 1 2) 1 <font color="red">&quot;doe&quot;</font>)  &#8658;  <font color="red"><strong>error</strong></font>  <font color="#ffa600"><i>; constant vector</i></font>
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="list--vector"></a><a name="vector--list"></a><a name="--index-entry-8258"></a><a name="--index-entry-8262"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(vector-&gt;list vector)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(list-&gt;vector list)</font></strong></code><br /><br /><code>Vector-&gt;list</code> returns a newly allocated list of the objects contained in
the elements of <code>vector</code>. <code>List-&gt;vector</code> returns a newly created vector
initialized to the elements of the list <code>list</code>.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(vector-&gt;list '#(dah dah didah))  &#8658;  (dah dah didah)
(list-&gt;vector '(dididit dah))     &#8658;  #(dididit dah)
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="vector-fill-"></a><a name="--index-entry-8299"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(vector-fill! vector fill)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Stores <code>fill</code> in every element of <code>vector</code>. The value returned by
<code>vector-fill!</code> is <em>void</em>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="vector-copy"></a><a name="--index-entry-8322"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(vector-copy v)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Return a copy of vectot <code>v</code>. Note that, if <code>v</code> is a constant vector, 
its copy is not constant. </td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="vector-resize"></a><a name="--index-entry-8342"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(vector-resize v size)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(vector-resize v size fill)</font></strong></code><br /><br />Returns a copy of v of the given <code>size</code>. If <code>size</code> is greater
than the vector size of <code>v</code>, the contents of the newly allocated vector cells
is  set to the value of <code>fill</code>. If <code>fill</code> is omitted the content of the 
new cells is <em>void</em>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="vector-mutable-"></a><a name="--index-entry-8370"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(vector-mutable? obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns <code>#t</code> if <code>obj</code> is a mutable vector, otherwise returns <code>#f</code>. 
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(vector-mutable? '#(1 2 a b))            &#8658; #f
(vector-mutable? (vector-copy '#(1 2)))  &#8658; #t
(vector-mutable? (vector 1 2 3))         &#8658; #t
(vector-mutable? 12)                     &#8658; #f
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="sort"></a><a name="--index-entry-8407"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(sort obj predicate)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br /><code>Obj</code> must be a list or a vector. <code>Sort</code> returns a copy of <code>obj</code> sorted
according to <code>predicate</code>. <code>Predicate</code> must be a procedure which takes
two arguments and returns a true value if the first argument is strictly
``before'' the second.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(sort '(1 2 -4 12 9 -1 2 3) &lt;) 
               &#8658; (-4 -1 1 2 2 3 9 12)
(sort '#(<font color="red">&quot;one&quot;</font> <font color="red">&quot;two&quot;</font> <font color="red">&quot;three&quot;</font> <font color="red">&quot;four&quot;</font>) 
      (<strong>lambda</strong> (x y) (&gt; (string-length x) (string-length y))))
               &#8658; '#(<font color="red">&quot;three&quot;</font> <font color="red">&quot;four&quot;</font> <font color="red">&quot;one&quot;</font> <font color="red">&quot;two&quot;</font>)
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><a name="Structures"></a>
<table width="100%"><tr><td bgcolor="#E6F2E6"><h3 id="Structures"><font color="#000000">4.9 Structures</font></h3></table>
<a name="--index-entry-8453"></a><p>A structure type is a record data type composing a number of slots. A
structure, an instance of a structure type, is a first-class value
that contains a value for each field of the structure type.</p><p>Structures can be created with the <code>define-struct</code> high
level syntax. However, <span style="font-variant: small-caps">STklos</span> also offers some low-level functions
to build and access the internals of a structure.</p><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="define-struct"></a><a name="--index-entry-8463"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(define-struct &lt;name&gt; &lt;slot&gt; ...)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> syntax</i></font></td></tr>
</tbody></table>
<br />Defines a structure type whose name is <code>&lt;name&gt;</code>. Once a structure type is
defined, the following symbols are bound:
<ul><li><code>&lt;name&gt;</code> denotes the structure type.</li>
<li><code>make-&lt;name&gt;</code> is a procedure which takes 0 to <code>n</code> parameters (if there
are <code>n</code> slots defined). Each parameter is assigned to the corresponding
field (in the definition order).</li>
<li><code>&lt;name&gt;?</code> is a predicate which returns <code>#t</code> when applied to an
instance of the <code>&lt;name&gt;</code> structure type and <code>#f</code> otherwise.</li>
<li><code>&lt;name&gt;-&lt;slot&gt;</code> (one for each defined <code>&lt;slot&gt;</code>) to read the
content of an instance of the <code>&lt;name&gt;</code> structure type. Writting the
content of a slot can be done using a generalized <code>set!</code>.</li>
</ul>

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(define-struct point x y)
(<font color="#6959cf"><strong>define</strong></font> p (make-point 1 2))
(point? p)    &#8658; #t
(point? 100)  &#8658; #f
(point-x p)   &#8658; 1
(point-y p)   &#8658; 2
(<strong>set!</strong> (point-x p) 10)
(point-x p)   &#8658; 10
</pre></td></tr>
</tbody></table></blockquote>

</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="make-struct-type"></a><a name="--index-entry-8523"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(make-struct-type name parent slots)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />This form which is more general than <code>define-struct</code> permits to define a 
new structure type whose name is <code>name</code>. Parent is the structure 
type from which is the new structure type is a subtype (or <code>#f</code> is the 
new structure-type has no super type). <code>Slots</code> is the list of the slot 
names which constitute the structure tpe. 
<br /><br />
When a structure type is s subtype of a previous type, its slots are added 
to the ones of the super type. </td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="struct-type-"></a><a name="--index-entry-8546"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(struct-type? obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns <code>#t</code> if <code>obj</code> is a structure type, otherwise return <code>#f</code>.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<strong>let</strong> ((type (make-struct-type 'point #f '(x y))))
  (struct-type? type))         &#8658; #t
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="struct-type-slots"></a><a name="--index-entry-8576"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(struct-type-slots structype)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the slots of the structure type <code>structype</code> as a list.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<font color="#6959cf"><strong>define</strong></font> point  (make-struct-type 'point #f '(x y)))
(<font color="#6959cf"><strong>define</strong></font> circle (make-struct-type 'circle point '(r)))
(struct-type-slots point)   &#8658; (x y) 
(struct-type-slots circle)  &#8658; (x y r)
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="struct-type-parent"></a><a name="--index-entry-8609"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(struct-type-parent structype)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the super type of the structure type <code>structype</code>, if it exists 
or <code>#f</code> otherwise.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="struct-type-name"></a><a name="--index-entry-8629"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(struct-type-name structype)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the name associated to the structure type <code>structype</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="struct-type-change-writer-"></a><a name="--index-entry-8648"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(struct-type-change-writer! structype proc)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Change the default writer associated to structures of type <code>structype</code> to 
to the <code>proc</code> procedure. The <code>proc</code> procedure must accept 2 arguments 
(the structure to write and the port wher the structure must be written 
in that order). The value returned by <code>struct-type-change-writer!</code> is the
old writer associated to <code>structype</code>. To restore the standard wtructure 
writer for <code>structype</code>, use the special value <code>#f</code>.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<font color="#6959cf"><strong>define</strong></font> point (make-struct-type 'point #f '(x y)))

(struct-type-change-writer!
  point
  (<strong>lambda</strong> (s port)
    (<strong>let</strong> ((type (struct-type s)))
      (format port <font color="red">&quot;{~A&quot;</font> (struct-type-name type))
      <font color="#ffa600"><i>;; display the slots and their value</i></font>
      (for-each (<strong>lambda</strong> (x)
		  (format port <font color="red">&quot; ~A=~S&quot;</font> x (struct-ref s x)))
		(struct-type-slots type))
      (format port <font color="red">&quot;}&quot;</font>))))
(display (make-struct point 1 2)) -| {point x=1 y=2}
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="make-struct"></a><a name="--index-entry-8700"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(make-struct structype expr ...)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns a newly allocated instance of the structure type <code>structype</code>, 
whose slots are initialized to <code>expr</code> ... If fewer <code>expr</code> than the number of 
instances are given to <code>make-struct</code>, the remaining slots are inialized with 
the special <em>void</em> value.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="struct-"></a><a name="--index-entry-8723"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(struct? obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns <code>#t</code> if <code>obj</code> is a structure, otherwise return <code>#f#</code>.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<strong>let*</strong> ((type (make-struct-type 'point #f '(x y)))
       (inst (make-struct type 1 2)))
  (struct? inst))         &#8658; #t
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="struct-type"></a><a name="--index-entry-8754"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(struct-type s)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the structure type of the <code>s</code> structure</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="struct-ref"></a><a name="--index-entry-8773"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(struct-ref s slot-name)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the value associated to slot <code>slot-name</code> of the <code>s</code> structure.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<font color="#6959cf"><strong>define</strong></font> point  (make-struct-type 'point #f '(x y)))
(<font color="#6959cf"><strong>define</strong></font> circle (make-struct-type 'circle point '(r)))
(<font color="#6959cf"><strong>define</strong></font> p (make-struct point 1 2))
(<font color="#6959cf"><strong>define</strong></font> c (make-struct circle 10 20 30))
(struct-ref p 'y) &#8658; 2
(struct-ref c 'r) &#8658; 30
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="struct-set-"></a><a name="--index-entry-8811"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(struct-set! s slot-name value)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Stores value in the to slot <code>slot-name</code> of the <code>s</code> structure. The value 
returned by <code>struct-set!</code> is <em>void</em>.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<font color="#6959cf"><strong>define</strong></font> point  (make-struct-type 'point #f '(x y)))
(<font color="#6959cf"><strong>define</strong></font> p (make-struct point 1 2))
(struct-ref p 'x) &#8658; 1
(struct-set! p 'x 0)
(struct-ref p 'x) &#8658; 0
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="struct-is-a-"></a><a name="--index-entry-8848"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(struct-is-a? s structype)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Return a boolean that indicates if the structure <code>s</code> is a of type <code>structype</code>.
Note that if <code>s</code> is an instance of a subtype of <em>S</em>, it is considered
also as an instance of type <em>S</em>.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<font color="#6959cf"><strong>define</strong></font> point  (make-struct-type 'point #f '(x y)))
(<font color="#6959cf"><strong>define</strong></font> circle (make-struct-type 'circle point '(r))) 
(<font color="#6959cf"><strong>define</strong></font> p (make-struct point 1 2))
(<font color="#6959cf"><strong>define</strong></font> c (make-struct circle 10 20 30))
(struct-is-a? p point)   &#8658; #t
(struct-is-a? c point)   &#8658; #t
(struct-is-a? p circle)  &#8658; #f
(struct-is-a? c circle)  &#8658; #t
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="struct--list"></a><a name="--index-entry-8895"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(struct-&gt;list s)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the content of structure <code>s</code> as an A-list whose keys are the 
slots of the structure type of <code>s</code>.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<font color="#6959cf"><strong>define</strong></font> point  (make-struct-type 'point #f '(x y)))
(<font color="#6959cf"><strong>define</strong></font> p (make-struct point 1 2))
(struct-&gt;list p) &#8658; ((x . 1) (y . 2))
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><a name="Control-features"></a>
<table width="100%"><tr><td bgcolor="#E6F2E6"><h3 id="Control-features"><font color="#000000">4.10 Control features</font></h3></table>
<br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="procedure-"></a><a name="--index-entry-8929"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(procedure? obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns <code>#t</code> if <code>obj</code> is a procedure, otherwise returns <code>#f</code>.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(procedure? car)                            &#8658;  #t
(procedure? 'car)                           &#8658;  #f
(procedure? (<strong>lambda</strong> (x) (* x x)))           &#8658;  #t
(procedure? '(<strong>lambda</strong> (x) (* x x)))          &#8658;  #f
(call-with-current-continuation procedure?) &#8658;  #t
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="apply"></a><a name="--index-entry-8972"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(apply proc arg1 ... args)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br /><code>Proc</code> must be a procedure and <code>args</code> must be a list. Calls <code>proc</code> with the
elements of the list 
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(append (list arg1 ...) args)
</pre></td></tr>
</tbody></table></blockquote>
 
as the actual arguments.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(apply + (list 3 4))              &#8658;  7

(<font color="#6959cf"><strong>define</strong></font> compose
  (<strong>lambda</strong> (f g)
     (<strong>lambda</strong> args
       (f (apply g args)))))

((compose sqrt *) 12 75)          &#8658;  30
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="map"></a><a name="--index-entry-9018"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(map proc list1 list2 ...)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />The <code>list</code>s must be lists, and <code>proc</code> must be a procedure taking as many
arguments as there are lists and returning a single value.  
If more than one list is given, then they must all be the same length.  
<code>Map</code> applies <code>proc</code> element-wise to the elements of the <code>list</code>s and returns 
a list of the results, in order.  The dynamic order in which proc is applied
to the elements of the lists is unspecified.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(map cadr '((a b) (d e) (g h)))   &#8658;  (b e h)

(map (<strong>lambda</strong> (n) (expt n n))
     '(1 2 3 4 5))                &#8658;  (1 4 27 256 3125)

(map + '(1 2 3) '(4 5 6))         &#8658;  (5 7 9)

(<strong>let</strong> ((count 0))
  (map (<strong>lambda</strong> (ignored)
      (<strong>set!</strong> count (+ count 1))
      count)
       '(a b)))                   &#8658;  (1 2) <em>or</em> (2 1)
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="for-each"></a><a name="--index-entry-9071"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(for-each proc list1 list2 ...)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />The arguments to <code>for-each</code> are like the arguments to <code>map</code>, but <code>for-each</code>
calls proc for its side effects rather than for its values.
Unlike <code>map</code>, <code>for-each</code> is guaranteed to call proc on the elements of 
the lists in order from the first element(s) to the last, and the value 
returned by <code>for-each</code> is <em>void</em>.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<strong>let</strong> ((v (make-vector 5)))
  (for-each (<strong>lambda</strong> (i)
              (vector-set! v i (* i i)))
            '(0 1 2 3 4))
  v)                                &#8658;  #(0 1 4 9 16)
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="every"></a><a name="--index-entry-9110"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(every pred list1 list2 ...)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br /><code>every</code> applies the predicate <code>pred</code> across the lists, returning true if
the predicate returns true on every application.
<br /><br />
If there are n list arguments <code>list1</code> ... <code>listn</code>, then <code>pred</code> must be
a procedure taking n arguments and returning a boolean result. 
<br /><br />
<code>every</code> applies pred to the first elements of the <code>listi</code> parameters. If
this application returns false, every immediately returns <code>#f</code>. 
Otherwise, it iterates, applying <code>pred</code> to the second elements of the <code>listi</code>
parameters, then the third, and so forth. The iteration stops when a
false value is produced or one of the lists runs out of values. 
In the latter case, <code>every</code> returns the true value produced by its final
application of pred. The application of pred to the last element of the 
lists is a tail call. 
<br /><br />
If one of the <code>listi</code> has no elements, <code>every</code> simply returns <code>#t</code>.
<br /><br />
Like <code>any</code>, every's name does not end with a question mark -- this is to
indicate that it does not return a simple boolean (<code>#t</code> or <code>#f</code>), but a
general value. </td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="any"></a><a name="--index-entry-9149"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(any pred list1 list2 ...)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br /><code>any</code> applies the predicate across the lists, returning true if the
predicate returns true on any application. 
<br /><br />
If there are n list arguments <code>list1</code> ... <code>listn</code>, then <code>pred</code> must be
a procedure taking n arguments. 
<br /><br />
<code>any</code> applies <code>pred</code> to the first elements of the <code>listi</code> parameters. If
this application returns a true value, <code>any</code> immediately returns that value.
Otherwise, it iterates, applying <code>pred</code> to the second elements of the <code>listi</code>
parameters, then the third, and so forth. The iteration stops when a true
value is produced or one of the lists runs out of values; in the latter case, 
any returns <code>#f</code>. The application of <code>pred</code> to the last element of the
lists is a tail call. 
<br /><br />
Like every, <code>any</code>'s name does not end with a question mark -- this is 
to indicate that it does not return a simple boolean (<code>#t</code> or <code>#f</code>), but
a general value. 

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(any integer? '(a 3 b 2.7))   &#8658; #t
(any integer? '(a 3.1 b 2.7)) &#8658; #f
(any &lt; '(3 1 4 1 5)
       '(2 7 1 8 2))          &#8658; #t
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="force"></a><a name="--index-entry-9199"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(force promise)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Forces the value of <code>promise</code> (see <a href="stklos-ref-2.html#delay">???</a>). If no value has been
computed for the promise, then a value is computed and
returned. The value of the promise is cached (or &quot;memoized&quot;) so
that if it is forced a second time, the previously computed value
is returned.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(force (delay (+ 1 2)))        &#8658;  3
(<strong>let</strong> ((p (delay (+ 1 2))))
  (list (force p) (force p)))  &#8658;  (3 3)

(<font color="#6959cf"><strong>define</strong></font> a-stream
  (<strong>letrec</strong> ((next (<strong>lambda</strong> (n)
                   (cons n (delay (next (+ n 1)))))))
    (next 0)))
(<font color="#6959cf"><strong>define</strong></font> head car)
(<font color="#6959cf"><strong>define</strong></font> tail (<strong>lambda</strong> (stream) (force (cdr stream))))

(head (tail (tail a-stream)))  &#8658;  2
</pre></td></tr>
</tbody></table></blockquote>


<code>Force</code> and <code>delay</code> are mainly intended for programs written in
functional style. The following examples should not be considered
to illustrate good programming style, but they illustrate the
property that only one value is computed for a promise, no matter
how many times it is forced.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<font color="#6959cf"><strong>define</strong></font> count 0)
(<font color="#6959cf"><strong>define</strong></font> p (delay (<strong>begin</strong> (<strong>set!</strong> count (+ count 1))
                        (<strong>if</strong> (&gt; count x)
                            count
                            (force p)))))
(<font color="#6959cf"><strong>define</strong></font> x 5)
p                     &#8658;  a promise
(force p)             &#8658;  6
p                     &#8658;  a promise, still
(<strong>begin</strong> (<strong>set!</strong> x 10)
       (force p))     &#8658;  6
</pre></td></tr>
</tbody></table></blockquote>

<strong>Note:</strong> See <span style="font-variant: small-caps">R<sup>5</sup>RS</span> for details on a posssible way to implement 
<code>force</code> and <code>delay</code>. </td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="call-cc"></a><a name="call-with-current-continuation"></a><a name="--index-entry-9288"></a><a name="--index-entry-9292"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(call-with-current-continuation proc)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(call/cc proc)</font></strong></code><br /><br /> <code>Proc</code> must be a procedure of one argument. The procedure
<code>call-with-current-continuation</code> packages up the current continuation
(see the rationale below) as an ``escape procedure'' and passes it as
an argument to <code>proc</code>. The escape procedure is a Scheme procedure that, if
it is later called, will abandon whatever continuation is in effect at
that later time and will instead use the continuation that was in effect
when the escape procedure was created. Calling the escape procedure may cause
the invocation of before and after thunks installed using <code>dynamic-wind</code>.
<br /><br />
The escape procedure accepts the same number of arguments as
the continuation to the original call to
<code>call-with-current-continuation</code>. Except for continuations created
by the <code>call-with-values</code> procedure, all continuations take exactly
one value.
<br /><br />
The escape procedure that is passed to proc has unlimited extent
just like any other procedure in Scheme. It may be stored in variables
or data structures and may be called as many times as desired.
<br /><br />
The following examples show only the most common ways in which
<code>call-with-current-continuation</code> is used. If all real uses were as simple
as these examples, there would be no need for a procedure with the power
of <code>call-with-current-continuation</code>.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(call-with-current-continuation
  (<strong>lambda</strong> (exit)
    (for-each (<strong>lambda</strong> (x)
                (<strong>if</strong> (negative? x)
                    (exit x)))
              '(54 0 37 -3 245 19))
    #t))                                &#8658;  -3

(<font color="#6959cf"><strong>define</strong></font> list-length
  (<strong>lambda</strong> (obj)
    (call-with-current-continuation
      (<strong>lambda</strong> (return)
        (<strong>letrec</strong> ((r
                  (<strong>lambda</strong> (obj)
                    (<strong>cond</strong> ((null? obj) 0)
                          ((pair? obj)
                           (+ (r (cdr obj)) 1))
                          (<strong>else</strong> (return #f))))))
          (r obj))))))

(list-length '(1 2 3 4))                &#8658;  4
(list-length '(a b . c))                &#8658;  #f
</pre></td></tr>
</tbody></table></blockquote>


<strong>Rationale:</strong> A common use of <code>call-with-current-continuation</code>
is for structured, non-local exits from loops or procedure bodies,
but in fact <code>call-with-current-continuation</code> is extremely useful
for implementing a wide variety of advanced control structures.
<br /><br />
Whenever a Scheme expression is evaluated there is a continuation
wanting the result of the expression. The continuation represents
an entire (default) future for the computation. If the expression
is evaluated at top level, for example, then the continuation
might take the result, print it on the screen, prompt for the
next input, evaluate it, and so on forever. Most of the time the
continuation includes actions specified by user code, as in a
continuation that will take the result, multiply it by the value
stored in a local variable, add seven, and give the answer to the
top level continuation to be printed. Normally these ubiquitous
continuations are hidden behind the scenes and programmers do not
think much about them. On rare occasions, however, a programmer
may need to deal with continuations explicitly.
<code>Call-with-current-continuation</code> allows Scheme
programmers to do that by creating a procedure that acts just
like the current continuation.
<br /><br />
<strong>Note:</strong> <code>call/cc</code> is just another name for 
<code>call-with-current-continuation</code>. </td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="call-ec"></a><a name="--index-entry-9377"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(call/ec proc)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br /><code>call/ec</code> is an short name for <code>call-with-escape-continuation</code>. <code>call/ec</code>
calls <code>proc</code> with one parameter, which is the current escape continuation
(a continuation which can only be used to abort a computation and hence 
cannot be &quot;re-enterered&quot;.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(list 1
      (call/ec (<strong>lambda</strong> (return) (list 'a (return 'b) 'c)))
      3)        &#8658; (1 b 3)
</pre></td></tr>
</tbody></table></blockquote>

<code>call/ec</code> is cheaper than the full call/ec. It is particularily useful
whence all the power of <code>call/cc</code> is not needded. </td></tr>
</tbody></table><a name="--index-entry-9409"></a><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="values"></a><a name="--index-entry-9415"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(values obj ...)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Delivers all of its arguments to its continuation. 
<strong>Note:</strong> <span style="font-variant: small-caps">R<sup>5</sup>RS</span> imposes to use multiple values in the context of 
of a <code>call-with-values</code>. In <span style="font-variant: small-caps">STklos</span>, if <code>values</code> is not used with 
<code>call-with-values</code>, only the first value is used (i.e. others values are 
<em>ignored</em>).
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="call-with-values"></a><a name="--index-entry-9442"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(call-with-values producer consumer)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Calls its producer argument with no values and a continuation that, 
when passed some values, calls the consumer procedure with those values 
as arguments. The continuation for the call to consumer is the 
continuation of the call to call-with-values. 
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(call-with-values (<strong>lambda</strong> () (values 4 5))
                  (<strong>lambda</strong> (a b) b))                &#8658;  5

(call-with-values * -)                             &#8658;  -1
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="receive"></a><a name="--index-entry-9475"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(receive &lt;formals&gt; &lt;expression&gt; &lt;body&gt;)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> syntax</i></font></td></tr>
</tbody></table>
<br />This form is defined in <strong><a href="http://srfi.schemers.org/srfi-8/srfi-8.html">SRFI-8</a></strong>
     (<em>Receive: Binding to multiple values</em>). It simplifies
the usage of multiple values. Specifically, <code>&lt;formals&gt;</code> can have any
of three forms:
<ul><li>(<code>&lt;variable1&gt;</code> ... <code>&lt;variablen&gt;</code>):
<br />
The environment in which the
receive-expression is evaluated is extended by binding <code>&lt;variable1&gt;</code>, ...,
<code>&lt;variablen&gt;</code> to fresh locations.
<br /><br />
The <code>&lt;expression&gt;</code> is evaluated, and its
values are stored into those locations. (It is an error if <code>&lt;expression&gt;</code>
does not have exactly n values.)
</li>
<li><code>&lt;variable&gt;</code>:
<br />
The environment in which the receive-expression is
evaluated is extended by binding <code>&lt;variable&gt;</code> to a fresh location.
The <code>&lt;expression&gt;</code> is evaluated, its values are converted into a newly
allocated list, and the list is stored in the location bound to <code>&lt;variable&gt;</code>.
</li>
<li>(<code>&lt;variable1&gt;</code> ... <code>&lt;variablen&gt;</code> . <code>&lt;variablen + 1&gt;</code>):
<br />
The environment
in which the receive-expression is evaluated is extended by binding
<code>&lt;variable1&gt;</code>, ..., <code>&lt;variablen + 1&gt;</code> to fresh locations.
The <code>&lt;expression&gt;</code> is evaluated. Its first n values are stored into the
locations bound to <code>&lt;variable1&gt;</code> ... <code>&lt;variablen&gt;</code>. Any remaining values
are converted into a newly allocated list, which is stored into the location
bound to <code>&lt;variablen + 1&gt;</code>. (It is an error if <code>&lt;expression&gt;</code> does not have
at least n values.)</li>
</ul>

In any case, the expressions in <code>&lt;body&gt;</code> are evaluated sequentially in
the extended environment. The results of the last expression in the body
are the values of the receive-expression.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<strong>let</strong> ((n 123))
  (receive (q r)
     (values (quotient n 10) (modulo n 10))
     (cons q r)))
              &#8658; (12 . 3)
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="dynamic-wind"></a><a name="--index-entry-9539"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(dynamic-wind before thunk after)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Current version of <code>dynamic-wind</code> mimics the <span style="font-variant: small-caps">R<sup>5</sup>RS</span> one. In particular, it 
does not yet interact with <code>call-with-current-continuation</code> as required by 
<span style="font-variant: small-caps">R<sup>5</sup>RS</span>.
<br /><br />
Calls <code>thunk</code> without arguments, returning the result(s) of this call.  
<code>Before</code> and <code>after</code> are called, also without arguments, as required by
the following rules (note that in the absence of calls to continuations 
captured using <code>call-with-current-continuation</code> the three arguments are
called once each, in order).  <code>Before</code> is called whenever execution enters
the dynamic extent of the call to <code>thunk</code> and <code>after</code> is called whenever 
it exits that dynamic extent.  The dynamic extent of a procedure call is
the period between when the call is initiated and when it returns. 
In Scheme, because of <code>call-with-current-continuation</code>, the dynamic 
extent of a call may not be a single, connected time period. It is
defined as follows:
<ul><li>The dynamic extent is entered when execution of the body of
the called procedure begins.</li>
<li>The dynamic extent is also entered when execution is not
within the dynamic extent and a continuation is invoked that was
captured (using <code>call-with-current-continuation</code>) during the dynamic extent.</li>
<li>It is exited when the called procedure returns.</li>
<li>It is also exited when execution is within the dynamic
extent and a continuation is invoked that was captured while not within
the dynamic extent.</li>
</ul>
<br /><br />
If a second call to <code>dynamic-wind</code> occurs within the dynamic extent
of the call to thunk and then a continuation is invoked in such a
way that the afters from these two invocations of <code>dynamic-wind</code>
are both to be called, then the after associated with the
second (inner) call to <code>dynamic-wind</code> is called first.

If a second call to <code>dynamic-wind</code> occurs within the dynamic extent
of the call to <code>thunk</code> and then a continuation is invoked in such a
way that the befores from these two invocations of <code>dynamic-wind</code>
are both to be called, then the before associated with the
first (outer) call to <code>dynamic-wind</code> is called first.

If invoking a continuation requires calling the <code>before</code> from one
call to <code>dynamic-wind</code> and the <code>after</code> from another, then the <code>after</code>
is called first.

The effect of using a captured continuation to enter or exit the
dynamic extent of a call to <code>before</code> or <code>after</code> is undefined.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<strong>let</strong> ((path '())
      (c #f))
  (<strong>let</strong> ((add (<strong>lambda</strong> (s)
               (<strong>set!</strong> path (cons s path)))))
    (dynamic-wind
      (<strong>lambda</strong> () (add 'connect))
      (<strong>lambda</strong> ()
        (add (call-with-current-continuation
               (<strong>lambda</strong> (c0)
                 (<strong>set!</strong> c c0)
                 'talk1))))
      (<strong>lambda</strong> () (add 'disconnect)))
    (<strong>if</strong> (&lt; (length path) 4)
        (c 'talk2)
        (reverse path))))
                  &#8658;  (connect talk1 disconnect
                       connect talk2 disconnect)
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="eval"></a><a name="--index-entry-9626"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(eval expression environment)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(eval expression) </font></strong></code><br /><br />Current form of <span style="font-variant: small-caps">STklos</span> <code>eval</code> is not conform to <span style="font-variant: small-caps">R<sup>5</sup>RS</span>. 
<br /><br />
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="eval-from-string"></a><a name="--index-entry-9656"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(eval-from-string str)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(eval-from-string str module)</font></strong></code><br /><br />Read an expression from <code>str</code> and evaluates it with <code>eval</code>. If a <code>module</code>
is passed, the evaluation takes place in the enviroment of this module.
Otherwise, the evaluation takes palce in the environmebnt returned by
<code>current-module</code>.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<font color="#6959cf"><strong>define</strong></font> x 10)
(<font color="#6959cf"><strong>define-module</strong></font> M
  (<font color="#6959cf"><strong>define</strong></font> x 100))
(eval-from-string <font color="red">&quot;(+ x x)&quot;</font>)                   &#8658; 20
(eval-from-string <font color="red">&quot;(+ x x)&quot;</font> (find-module 'M))  &#8658; 200
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><a name="Input-and-Output"></a>
<table width="100%"><tr><td bgcolor="#E6F2E6"><h3 id="Input-and-Output"><font color="#000000">4.11 Input and Output</font></h3></table>
<a name="--index-entry-9703"></a><a name="--index-entry-9707"></a><a name="--index-entry-9711"></a><a name="--index-entry-9715"></a><p><span style="font-variant: small-caps">R<sup>5</sup>RS</span> states that ports represent input and output
devices.  However, it defines only ports which are attached to
files.  In <span style="font-variant: small-caps">STklos</span>, ports can also be attached to strings, to a
external command input or output, or even be virtual (i.e. the
behavior of the port is given by the user).</p><ul><li>String ports are similar to file ports, except that characters
are read from (or written to) a string rather than a file.</li>
<li>External command input or output ports are implemented
with Unix pipes and are called <em>pipe ports</em>. A pipe port
is created by specifying the command to execute prefixed with the
string <code>"| "</code> (that is a pipe bar followed by a space). 
Specification of a pipe port can occur everywhere a file name is needed.</li>
<li>Virtual ports are created by supplying basic I/O functions at
port creation time. These functions will be used to simulate low
level accesses to a ``virtual device''. This kind of port is
particularly convenient for reading or writing in a graphical
window as if it was a file. Once a virtual port is created, it can
be accessed as a normal port with the standard Scheme primitives.</li>
</ul><a name="Ports"></a>
<h4 id="Ports"><font color="darkolivegreen">4.11.1 Ports</font></h4>
<br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="call-with-output-file"></a><a name="call-with-input-file"></a><a name="--index-entry-9733"></a><a name="--index-entry-9737"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(call-with-input-file string proc)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(call-with-output-file string proc)</font></strong></code><br /><br /><code>String</code> should be a string naming a file, and <code>proc</code> should be a procedure 
that accepts one argument. For <code>call-with-input-file</code>, the file should 
already exist. These procedures call <code>proc</code> with one argument: the port 
obtained by opening the named file for input or output. If the file cannot
be opened, an error is signaled. If <code>proc</code> returns, then the port is closed
automatically and the value(s) yielded by the proc is(are) returned. 
If proc does not return, then the port will not be closed automatically.
<br /><br />
<strong>Rationale:</strong> Because Scheme's escape procedures have unlimited extent, 
it is possible to escape from the current continuation but later to escape 
back in. If implementations were permitted to close the port on any escape
from the current continuation, then it would be impossible to write portable
code using both <code>call-with-current-continuation</code> and <code>call-with-input-file</code>
or <code>call-with-output-file</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="call-with-input-string"></a><a name="--index-entry-9770"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(call-with-input-string string proc)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />behaves as <code>call-with-input-file</code> except that the port passed to <code>proc</code>
is the sting port obtained from <code>port</code>.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(call-with-input-string <font color="red">&quot;123 456&quot;</font> 
  (<strong>lambda</strong> (x)
     (<strong>let*</strong> ((n1 (read x))
            (n2 (read x)))
        (cons n1 n2))))          &#8658; (123 . 456)
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="call-with-output-string"></a><a name="--index-entry-9805"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(call-with-output-string proc)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br /><code>Proc</code> should be a procedure of one argument. <code>Call-with-output-string</code> 
calls <code>proc</code> with a freshly opened output string port. The result of 
this procedure is a string containing all the text that has been written
on the string port.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(call-with-output-string
  (<strong>lambda</strong> (x) (write 123 x) (display <font color="red">&quot;Hello&quot;</font> x))) &#8658; <font color="red">&quot;123Hello&quot;</font>
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="output-port-"></a><a name="input-port-"></a><a name="--index-entry-9838"></a><a name="--index-entry-9842"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(input-port? obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(output-port? obj)</font></strong></code><br /><br />Returns <code>#t</code> if <code>obj</code> is an input port or output port respectively, 
otherwise returns #f.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="output-string-port-"></a><a name="input-string-port-"></a><a name="--index-entry-9868"></a><a name="--index-entry-9872"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(input-string-port? obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(output-string-port? obj)</font></strong></code><br /><br />Returns <code>#t</code> if <code>obj</code> is an input string port or output string port 
respectively, otherwise returns #f.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="output-file-port-"></a><a name="input-file-port-"></a><a name="--index-entry-9897"></a><a name="--index-entry-9901"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(input-file-port? obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(output-file-port? obj)</font></strong></code><br /><br />Returns <code>#t</code> if <code>obj</code> is a file input port or a file output port respectively, 
otherwise returns #f.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="output-virtual-port-"></a><a name="input-virtual-port-"></a><a name="--index-entry-9926"></a><a name="--index-entry-9930"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(input-virtual-port? obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(output-virtual-port? obj)</font></strong></code><br /><br />Returns <code>#t</code> if <code>obj</code> is a virtual input port or a virtual output port 
respectively, otherwise returns #f.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="interactive-port-"></a><a name="--index-entry-9954"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(interactive-port? port)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns <code>#t</code> if <code>port</code> is connected to a terminal and <code>#f</code> otherwise.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="current-output-port"></a><a name="current-input-port"></a><a name="--index-entry-9976"></a><a name="--index-entry-9980"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(current-input-port obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(current-output-port obj)</font></strong></code><br /><br />Returns the current default input or output port.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="current-error-port"></a><a name="--index-entry-10003"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(current-error-port obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the current default error port.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="with-output-to-file"></a><a name="with-input-from-file"></a><a name="--index-entry-10022"></a><a name="--index-entry-10026"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(with-input-from-file string thunk)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(with-output-to-file string thunk)</font></strong></code><br /><br /><code>String</code> should be a string naming a file, and <code>proc</code> should be a 
procedure of no arguments. For <code>with-input-from-file</code>, the file should 
already exist. The file is opened for input or output, an input or output
port connected to it is made the default value returned by 
<code>current-input-port</code> or <code>current-output-port</code> (and is used by <code>(read)</code>, 
<code>(write obj)</code>, and so forth), and the thunk is called with no arguments. 
When the thunk returns, the port is closed and the previous default is
restored. <code>With-input-from-file</code> and <code>with-output-to-file</code> return(s) 
the value(s) yielded by thunk. 
<br /><br />
The following example uses a pipe port opened for reading. It permits to 
read all the lines produced by an external <em>ls</em> command (i.e. the 
output of the <em>ls</em> command is <em>redirected</em> to the Scheme pipe 
port).
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre> 
(with-input-from-file <font color="red">&quot;| ls -ls&quot;</font> 
  (<strong>lambda</strong> ()
    (<strong>do</strong> ((l (read-line) (read-line)))
        ((eof-object? l))
      (display l)
      (newline))))
</pre></td></tr>
</tbody></table></blockquote>


Hereafter is another example of Unix command redirection. This time,
it is the standard input of the Unix command which is redirected.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(with-output-to-file <font color="red">&quot;| mail root&quot;</font>
  (<strong>lambda</strong> ()
    (display <font color="red">&quot;A simple mail from Scheme&quot;</font>)
    (newline)))
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="with-error-to-file"></a><a name="--index-entry-10087"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(with-error-to-file string thunk)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />This procedure is similar to with-output-to-file, excepted that it uses the 
current error port instead of the output port.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="with-input-from-string"></a><a name="--index-entry-10105"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(with-input-from-string string thunk)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />A string port is opened for input from <code>string</code>. <code>Current-input-port</code>
is set to the port and <code>thunk</code> is called. When <code>thunk</code> returns,
the previous default input port is restored. <code>With-input-from-string</code>
returns the value(s) computed by <code>thunk</code>.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(with-input-from-string <font color="red">&quot;123 456&quot;</font> 
  (<strong>lambda</strong> () (read)))                       &#8658;  123
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="with-output-to-string"></a><a name="--index-entry-10139"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(with-output-to-string thunk)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />A string port is opened for output. <code>Current-output-port</code>
is set to it and <code>thunk</code> is called. When <code>thunk</code> returns,
the previous default output port is restored. <code>With-output-to-string</code>
returns the string containing the text written on the string port.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(with-output-to-string 
   (<strong>lambda</strong> () (write 123) (write <font color="red">&quot;Hello&quot;</font>))) &#8658; <font color="red">&quot;123\&quot;</font>Hello\<font color="red">&quot;&quot;</font>
</pre></td></tr>
</tbody></table></blockquote>
 </td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="with-error-to-port"></a><a name="with-output-to-port"></a><a name="with-input-from-port"></a><a name="--index-entry-10175"></a><a name="--index-entry-10179"></a><a name="--index-entry-10183"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(with-input-from-port port thunk)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(with-output-to-port port thunk)</font></strong></code><br /><code><strong><font color="IndianRed">(with-error-to-port port thunk)</font></strong></code><br /><br /><code>Port</code> should be a port, and <code>proc</code> should be a 
procedure of no arguments. These procedures do a job similar to the 
<code>with-...-file</code> counterparts  excepted that they use an open port instead 
of string specifying a file name</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="open-input-file"></a><a name="--index-entry-10212"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(open-input-file filename)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Takes a string naming an existing file and returns an input port capable
of delivering characters from the file. If the file cannot be opened, 
an error is signalled.
<br /><br />
<strong>Note:</strong> if <code>filename</code> starts with the string <code>"| "</code>, 
this procedure returns a pipe port. Consequently, it is not possible to
open a file whose name starts with those two characters.</td></tr>
</tbody></table><a name="--index-entry-10234"></a><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="open-input-string"></a><a name="--index-entry-10240"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(open-input-string str)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns an input string port capable of delivering characters from
<code>str</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="open-input-virtual"></a><a name="--index-entry-10259"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(open-input-virtual :key  (read-char #f) (ready? #f) (eof? #f) (close #f))</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns a virtual port using the <code>read-char</code> procedure to read a
character from the port, <code>ready?</code> to know if there is any data to
read from the port, <code>eof?</code> to know if the end of file is reached
on the port and finally <code>close</code> to close the port. All theses
procedure takes one parameter which is the port from which the input
takes place.  <code>Open-input-virtual</code> accepts also the special value
<code>#f</code> for the I/O procedures with the following conventions:
<ul><li>if <code>read-char</code> or <code>eof?</code> is <code>#f</code>, any attempt to read
the virtual port will return an eof object;</li>
<li>if <code>ready?</code> is <code>#f</code>, the file is always  ready
for reading;</li>
<li>if <code>close</code> is <code>#f</code>, no action is done when the port is
closed.</li>
</ul>
<br /><br />
Hereafter is a possible implementation of <code>open-input-string</code>
using virtual ports: 
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<font color="#6959cf"><strong>define</strong></font> (open-input-string str)
  (<strong>let</strong> ((index 0))
    (open-input-virtual
       <font color="#00cf00">:read-char</font> (<strong>lambda</strong> (p)
                 <font color="#ffa600"><i>;; test on eof is already done by the system</i></font>
                 (<strong>let</strong> ((res (string-ref str index)))
                   (<strong>set!</strong> index (+ index 1))
                   res))
       <font color="#00cf00">:eof?</font> (<strong>lambda</strong> (p) (&gt;= index (string-length str))))))
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="open-output-file"></a><a name="--index-entry-10318"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(open-output-file filename)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Takes a string naming an output file to be created and returns an output
port capable of writing characters to a new file by that name. If the file 
cannot be opened, an error is signalled. If a file with the given name 
already exists, it is rewritten.
<br /><br />
<strong>Note:</strong> if <code>filename</code> starts with the string <code>"| "</code>, 
this procedure returns a pipe port. Consequently, it is not possible to
open a file whose name starts with those two characters.</td></tr>
</tbody></table><a name="--index-entry-10340"></a><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="open-output-string"></a><a name="--index-entry-10346"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(open-output-string)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns an output string port capable of receiving and collecting characters.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="open-output-virtual"></a><a name="--index-entry-10364"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(open-output-virtual :key  (write-char #f) (write-string #f) (flush #f) (close #f))</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns a virtual port using the <code>write-char</code> procedure to write a
character to the port, <code>write-string</code> to write a string to the port,
<code>flush</code> to (eventuelly) flush the characters on the port and finally 
<code>close</code>to close the port. <code>Write-char</code> takes two parameters: a character and
the port to which the output must be done. <code>write-string</code> takes two
parameters: a string and a port. <code>Flush</code> and <code>Close</code> take one
parameter which is the port on which the action must be done.
<code>Open-output-virtual</code> accepts also the special value <code>#f</code>
for the I/O procedures. If a procedure is <code>#f</code> nothing is done
on the corresponding action.
<br /><br />
Hereafter is an (very inefficient) implementation of a variant of
<code>open-output-string</code> using virtual ports. The value of the output
string is printed when the port is closed:
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<font color="#6959cf"><strong>define</strong></font> (open-output-string)
  (<strong>let</strong> ((str <font color="red">&quot;&quot;</font>))
    (open-output-virtual
       <font color="#00cf00">:write-char</font> (<strong>lambda</strong> (c p)
                  (<strong>set!</strong> str (string-append str (string c))))
       <font color="#00cf00">:write-string</font> (<strong>lambda</strong> (s p)
                    (<strong>set!</strong> str (string-append str s)))
       <font color="#00cf00">:close</font> (<strong>lambda</strong> (p) (write str) (newline)))))
</pre></td></tr>
</tbody></table></blockquote>

<strong>Note:</strong> <code>write-string</code> is mainly used for writing strings and is 
generally more efficient than writing the string character by character. 
However, if <code>write-string</code> is not provided, strings are printed with 
<code>write-char</code>.  On the other hand, if <code>write-char</code> is absent, 
characters are written by successive allocation of one character strings. 
<br /><br />
Hereafter is another example: a virtual file port where all characters 
are converted to upper case:
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<font color="#6959cf"><strong>define</strong></font> (open-output-uppercase-file file)
  (<strong>let</strong> ((out (open-file file <font color="red">&quot;w&quot;</font>)))
    (and out
         (open-output-virtual
             <font color="#00cf00">:write-string</font> (<strong>lambda</strong> (s p)
                             (display (string-upper s) out))
             <font color="#00cf00">:close</font> (<strong>lambda</strong> (p)
                      (close-port out))))))
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="open-file"></a><a name="--index-entry-10443"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(open-file filename mode)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Opens the file whose name is <code>filename</code> with the specified string
<code>mode</code> which can be: 
<ul><li><code>&quot;r&quot;</code> to open file for reading. The stream is positioned at
the beginning of the file.</li>
<li><code>&quot;r+&quot;</code> to open file for reading and writing.  The stream is
positioned at the beginning of the file.</li>
<li><code>&quot;w&quot;</code> to truncate file to zero length or create file for writing.
The stream is positioned at the beginning of the file.</li>
<li><code>&quot;w+&quot;</code> to open  file for reading and writing. The file is created
if it does not exist, otherwise it is truncated. The stream is positioned
at the beginning of the file.</li>
<li><code>&quot;a&quot;</code> to open for writing.  The file is created if  it  does
not exist. The stream is positioned at the end of the file.</li>
<li><code>&quot;a+&quot;</code> to open file for reading and writing. The file is created
if it does not exist. The stream is positioned at the end of the file.</li>
</ul>
If the file can be opened, <code>open-file</code> returns the port associated with
the given file, otherwise it returns <code>#f</code>. Here again, the ``magic'' 
string &quot;| &quot; permits to open a pipe port (in this case mode can only be 
<code>&quot;r&quot;</code> or <code>&quot;w&quot;</code>).</td></tr>
</tbody></table><a name="--index-entry-10478"></a><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="get-output-string"></a><a name="--index-entry-10484"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(get-output-string port)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns a string containing all the text that has been written on the
output string <code>port</code>.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre> (<strong>let</strong> ((p (open-output-string)))
    (display <font color="red">&quot;Hello, world&quot;</font> p)
    (get-output-string p))         &#8658; <font color="red">&quot;Hello, world&quot;</font>
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="close-output-port"></a><a name="close-input-port"></a><a name="--index-entry-10516"></a><a name="--index-entry-10520"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(close-input-port port)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(close-output-port port)</font></strong></code><br /><br />Closes the port associated with <code>port</code>, rendering the port incapable of
delivering or accepting characters. These routines have no effect if the
port has already been closed. The value returned is <em>void</em>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="close-port"></a><a name="--index-entry-10545"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(close-port port)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Closes the port associated with <code>port</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="port-rewind"></a><a name="--index-entry-10564"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(port-rewind port)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Sets the port position to the beginning of <code>port</code>. The value returned by 
<code>port-rewind</code> is <em>void</em>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="seek-file-port"></a><a name="--index-entry-10585"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(port-seek port pos)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(port-seek port pos whence)</font></strong></code><br /><br />Sets the file position for the given <code>port</code> to the position <code>pos</code>.
The new position, measured in bytes, is obtained by adding <code>pos</code>
bytes to the position specified by <code>whence</code>. If passed, <code>whence</code>
must be one of <code>:start</code>, <code>:current</code> or <code>:end</code>. The resulting
position is relative to the start of the file, the current position
indicator, or end-of-file, respectively. If <code>whence</code> is omitted, it
defaults to <code>:start</code>.
<br /><br />
<strong>Note</strong>: After using port-seek, the value returned by 
<code>port-current-line</code> may be incorrect. </td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="port-current-line"></a><a name="--index-entry-10620"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(port-current-line)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(port-current-line port)</font></strong></code><br /><br />Returns the current line number associated to the given input <code>port</code> as an
integer. The <code>port</code> argument may be omitted, in which case it defaults to
the value returned by <code>current-input-port</code>. 
<br /><br />
<strong>Note</strong>: The <code>port-seek</code>, <code>read-chars</code> and <code>read-chars!</code> procedures
generally break the line-number. After using one of theses procedures, the 
value returned by <code>port-current-line</code> will be <code>-1</code> (except a <code>port-seek</code> 
at the beginning of the port reinitializes the line counter).</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="port-current-position"></a><a name="--index-entry-10653"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(port-current-position)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(port-current-position port)</font></strong></code><br /><br />Returns the position associated to the given input <code>port</code> as an
integer (i.e. number of characters from the beginning of the port). 
The <code>port</code> argument may be omitted, in which case it defaults to
the value returned by <code>current-input-port</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="port-file-name"></a><a name="--index-entry-10678"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(port-file-name port)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the file name used to open <code>port</code>; <code>port</code> must be a file port. </td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="port-idle-reset-"></a><a name="port-idle-unregister-"></a><a name="port-idle-register-"></a><a name="--index-entry-10700"></a><a name="--index-entry-10704"></a><a name="--index-entry-10708"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(port-idle-register! port thunk)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(port-idle-unregister! port thunk)</font></strong></code><br /><code><strong><font color="IndianRed">(port-idle-reset! port)</font></strong></code><br /><br /><code>port-idle-register!</code> allows to register <code>thunk</code> as an idle handler
when reading on port. That means that <code>thunk</code> will be called continuously
while waiting  an input on <code>port</code> (and only while using a reading
primitive on this port). <code>port-idle-unregister!</code> can be used to
unregister a handler previously set by <code>port-idle-register!</code>. The
primitive <code>port-idle-reset!</code> unregisters all the handlers set on
<code>port</code>.

Hereafter is a (not too realistic) example: a message will be displayed
repeatedly until a <em>sexpr</em> is read on the current input port.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<strong>let</strong> ((idle (<strong>lambda</strong> () (display <font color="red">&quot;Nothing to read!\n&quot;</font>))))
  (port-idle-register! (current-input-port) idle)
  (<strong>let</strong> ((result (read)))
    (port-idle-unregister! (current-input-port) idle)
    result))
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="port-closed-"></a><a name="--index-entry-10756"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(port-closed? port)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns <code>#t</code> if <code>port</code> is closed and <code>#f</code> otherwise.</td></tr>
</tbody></table><a name="Input"></a>
<h4 id="Input"><font color="darkolivegreen">4.11.2 Input</font></h4>
<br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="read"></a><a name="--index-entry-10780"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(read)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(read port)</font></strong></code><br /><br /><code>Read</code> converts external representations of Scheme objects into the
objects themselves. <code>Read</code> returns the next object parsable from the given
input port, updating port to point to the first character past the end of
the external representation of the object.
<br /><br />
If an end of file is encountered in the input before any characters are found
that can begin an object, then an end of file object is returned. The port
remains open, and further attempts to read will also return an end of file
object. If an end of file is encountered after the beginning of an object's
external representation, but the external representation is incomplete 
and therefore not parsable, an error is signalled.
<br /><br />
The port argument may be omitted, in which case it defaults to the value
returned by <code>current-input-port</code>. It is an error to read from a closed port.
<br /><br />
<span style="font-variant: small-caps">STklos</span> <code>read</code> supports the <strong><a href="http://srfi.schemers.org/srfi-10/srfi-10.html">SRFI-10</a></strong>
     (<em>Sharp Comma External Form</em>) <code>#</code> form that can be used
to denote values that do not have a convenient printed representation. See 
the SRFI document for more information.</td></tr>
</tbody></table><a name="--index-entry-10814"></a><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="read-with-shared-structure"></a><a name="--index-entry-10820"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(read-with-shared-structure)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(read-with-shared-structure  port)</font></strong></code><br /><code><strong><font color="IndianRed">(read/ss)</font></strong></code><br /><code><strong><font color="IndianRed">(read/ss port)</font></strong></code><br /><br /><code>read-with-shared-structure</code> is identical to <code>read</code>. It has been added to 
be compatible with <strong><a href="http://srfi.schemers.org/srfi-38/srfi-38.html">SRFI-38</a></strong>
     (<em>External representation of shared structures</em>). <span style="font-variant: small-caps">STklos</span> always knew how to deal with 
recursive input data. <code>read/ss</code> is only a shorter name for 
<code>read-with-shared-structure</code>.
</td></tr>
</tbody></table><a name="--index-entry-10857"></a><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="define-reader-ctor"></a><a name="--index-entry-10863"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(define-reader-ctor tag proc)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />This procedure permits to define a new user to reader constructor procedure
at run-time. It is defined in <strong><a href="http://srfi.schemers.org/srfi-10/srfi-10.html">SRFI-10</a></strong>
     (<em>Sharp Comma External Form</em>) document. See  SRFI document 
for more information.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(define-reader-ctor 'rev (<strong>lambda</strong> (x y) (cons y x)))
(with-input-from-string <font color="red">&quot;#,(rev 1 2)&quot;</font> read)
                             &#8658; (2 . 1)
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="read-char"></a><a name="--index-entry-10896"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(read-char)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(read-char port)</font></strong></code><br /><br />Returns the next character available from the input <code>port</code>, updating the <code>port</code>
to point to the following character. If no more characters are available, 
an end of file object is returned. <code>Port</code> may be omitted, in which case 
it defaults to the value returned by <code>current-input-port</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="read-chars"></a><a name="--index-entry-10923"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(read-chars size)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(read-chars size port)</font></strong></code><br /><br />Returns a newly allocated string made of <code>size</code> characters read from <code>port</code>.
If less than <code>size</code> characters are available on the input port, the returned
string is smaller than <code>size</code> and its size is the number of available 
characters. <code>Port</code> may be omitted, in which case it defaults to the
value returned by <code>current-input-port</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="read-chars-"></a><a name="--index-entry-10951"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(read-chars! str)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(read-chars! str port)</font></strong></code><br /><br />This function reads the characters available from <code>port</code> in the string <code>str</code>
by chuncks whose size is equal to the length of <code>str</code>.
The value returned by <code>read-chars!</code>is an integer indicating the number
of characters read. <code>Port</code> may be omitted, in which case it defaults to the
value returned by <code>current-input-port</code>. 
<br /><br />
This function is similar to <code>read-chars</code> except that it avoids to allocate 
a new string for each read. 
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<font color="#6959cf"><strong>define</strong></font> (copy-file from to)
  (<strong>let*</strong> ((size 1024)
         (in  (open-input-file from))
         (out (open-output-file to))
         (s   (make-string size)))
    (<strong>let</strong> Loop ()
      (<strong>let</strong> ((n (read-chars! s in)))
        (<strong>cond</strong>
          ((= n size)
             (write-chars s out)
             (Loop))
          (<strong>else</strong>
             (write-chars (substring s 0 n) out)
             (close-port out)))))))
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="peek-char"></a><a name="--index-entry-11005"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(peek-char)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(peek-char port)</font></strong></code><br /><br />Returns the next character available from the input <code>port</code>, without updating 
the port to point to the following character. If no more characters are
available, an end of file object is returned. <code>Port</code> may be omitted, in
which case it defaults to the value returned by <code>current-input-port</code>.
<br /><br />
<strong>Note:</strong> The value returned by a call to <code>peek-char</code> is the same as the
value that would have been returned by a call to <code>read-char</code> with the same
port. The only difference is that the very next call to <code>read-char</code> or 
<code>peek-char</code> on that port will return the value returned by the preceding
call to <code>peek-char</code>. In particular, a call to <code>peek-char</code> on an interactive
port will hang waiting for input whenever a call to <code>read-char</code> would have
hung.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="eof-object-"></a><a name="--index-entry-11040"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(eof-object? obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns <code>#t</code> if <code>obj</code> is an end of file object, otherwise returns <code>#f</code>. </td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="eof-object"></a><a name="--index-entry-11062"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(eof-object)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br /><a name="--index-entry-11077"></a>
Returns an end of file object. Note that the special notation <code>#eof</code> is 
another way to return such an end of file object.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="char-ready-"></a><a name="--index-entry-11085"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(char-ready?)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(char-ready? port)</font></strong></code><br /><br />Returns <code>#t</code> if a character is ready on the input port and returns <code>#f</code>
otherwise. If char-ready returns <code>#t</code> then the next read-char operation on
the given port is guaranteed not to hang. If the port is at end of file
then <code>char-ready?</code> returns <code>#t</code>. Port may be omitted, in which case it
defaults to the value returned by <code>current-input-port</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="read-line"></a><a name="--index-entry-11114"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(read-line)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(read-line port)</font></strong></code><br /><br />Reads the next line available from the input port <code>port</code>. This function
returns 2 values: the first one is is the string which contains the line
read, and the second one is the end of line delimiter. The end of line
delimiter can be an end of file object, a character or a string in case 
of a multiple character delimiter. If no more characters are available 
on <code>port</code>, an end of file object is returned.  <code>Port</code> may be omitted, 
in which case it defaults to the value returned by <code>current-input-port</code>.
<br /><br />
<strong>Note:</strong> As said in <a href="stklos-ref-4.html#values">???</a>, if <code>read-line</code> is not
used in  the context of <code>call-with-values</code>, the second value returned by 
this procedure is ignored.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="read-from-string"></a><a name="--index-entry-11145"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(read-from-string str)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Performs a read from the given <code>str</code>. If <code>str</code> is the empty string,
an end of file object is returned.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(read-from-string <font color="red">&quot;123 456&quot;</font>) &#8658; 123
(read-from-string <font color="red">&quot;&quot;</font>)        &#8658; an eof object
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="port--string-list"></a><a name="port--sexp-list"></a><a name="port--string"></a><a name="--index-entry-11179"></a><a name="--index-entry-11183"></a><a name="--index-entry-11187"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(port-&gt;string port)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(port-&gt;sexp-list port)</font></strong></code><br /><code><strong><font color="IndianRed">(port-&gt;string-list port) </font></strong></code><br /><br />All these procedure take a port opened for reading. <code>Port-&gt;string</code> reads
<code>port</code> until the it reads an end of file object and returns all the 
characters read as a string. <code>Port-&gt;sexp-list)</code> and <code>port-&gt;string-list</code> 
do the same things except that they return a list of S-expressions and
a list of strings respectively. For the following example we suppose that 
file <code>&quot;foo&quot;</code> is formed of two lines which contains respectively the number 
<code>100</code> and the string <code>&quot;bar&quot;</code>.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(port-&gt;sexp-list (open-input-file <font color="red">&quot;foo&quot;</font>))   &#8658; (100 <font color="red">&quot;bar&quot;</font>)
(port-&gt;string-list (open-input-file <font color="red">&quot;foo&quot;</font>)) &#8658; (<font color="red">&quot;100&quot;</font> <font color="red">&quot;&quot;</font>bar<font color="red">&quot;&quot;</font>)
</pre></td></tr>
</tbody></table></blockquote>
 </td></tr>
</tbody></table><a name="Output"></a>
<h4 id="Output"><font color="darkolivegreen">4.11.3 Output</font></h4>
<br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="write"></a><a name="--index-entry-11239"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(write obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(write obj port)</font></strong></code><br /><br />Writes a written representation of <code>obj</code> to the given <code>port</code>. Strings that
appear in the written representation are enclosed in doublequotes, and 
within those strings backslash and doublequote characters are escaped
by backslashes. Character objects are written using the <em>#\</em> notation. 
<code>Write</code> returns an unspecified value. The <code>port</code> argument may be omitted, in
which case it defaults to the value returned by <code>current-output-port</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="write-"></a><a name="--index-entry-11268"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(write* obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(write* obj port)</font></strong></code><br /><br />Writes a written representation of <code>obj</code> to the given port.  The
main difference with the <code>write</code> procedure is that <code>write*</code>
handles data structures with cycles. Circular structure written by 
this procedure use the <code>"#n="</code> and <code>"#n#"</code>
notations (see <a href="stklos-ref-1.html#Circular-structure">???</a>).
</td></tr>
</tbody></table><a name="--index-entry-11296"></a><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="write-with-shared-structure"></a><a name="--index-entry-11302"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(write-with-shared-structure obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(write-with-shared-structure obj port)</font></strong></code><br /><code><strong><font color="IndianRed">(write-with-shared-structure obj port optarg)</font></strong></code><br /><code><strong><font color="IndianRed">(write/ss obj)</font></strong></code><br /><code><strong><font color="IndianRed">(write/ss obj port)</font></strong></code><br /><code><strong><font color="IndianRed">(write/ss obj port optarg)</font></strong></code><br /><br /><code>write-with-shared-structure</code> has been added to be compatible with 
<strong><a href="http://srfi.schemers.org/srfi-38/srfi-38.html">SRFI-38</a></strong>
     (<em>External representation of shared structures</em>). It is is identical to <code>write*</code>, except that it accepts one 
more parameter (<code>optarg</code>). This parameter, which is not specified 
in <strong>SRFI-38</strong> (External representation of shared structures), is always ignored. <code>write/ss</code> is only a shorter name for
<code>write-with-shared-structure</code>.
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="display"></a><a name="--index-entry-11350"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(display obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(display obj port)</font></strong></code><br /><br />Writes a representation of <code>obj</code> to the given <code>port</code>. Strings that
appear in the written representation are not enclosed in
doublequotes, and no characters are escaped within those
strings. Character objects appear in the representation as if
written by <code>write-char</code> instead of by <code>write</code>. <code>Display</code> returns an
unspecified value. The <code>port</code> argument may be omitted, in which
case it defaults to the value returned by <code>current-output-port</code>.
<br /><br />
<strong>Rationale:</strong> <code>Write</code> is intended for producing machine-readable
output and <code>display</code> is for producing human-readable output. </td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="newline"></a><a name="--index-entry-11384"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(newline)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(newline port)</font></strong></code><br /><br />Writes an end of line to <code>port</code>. Exactly how this is done differs from
one operating system to another. Returns an unspecified value. The <code>port</code>
argument may be omitted, in which case it defaults to the value returned
by <code>current-output-port</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="write-char"></a><a name="--index-entry-11410"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(write-char char)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(write-char char port)</font></strong></code><br /><br />Writes the character <code>char</code> (not an external representation of the
character) to the given <code>port</code> and returns an unspecified value. 
The <code>port</code> argument may be omitted, in which case it defaults to the
value returned by <code>current-output-port</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="write-chars"></a><a name="--index-entry-11437"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(write-chars str)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(write-char str port)</font></strong></code><br /><br />Writes the character of string <code>str</code> to the given <code>port</code> and
returns an unspecified value.  The <code>port</code> argument may be omitted,
in which case it defaults to the value returned by
<code>current-output-port</code>. <strong>Note:</strong> This function is generally 
faster than <code>display</code> for strings. Furthermore, this primitive does 
not use the buffer associated to <code>port</code>.
</td></tr>
</tbody></table><a name="--index-entry-11464"></a><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="format"></a><a name="--index-entry-11470"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(format port str obj ...)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(format str obj)</font></strong></code><br /><br />Writes the <code>obj</code>s to the given <code>port</code>, according to the format
string <code>str</code>. <code>Str</code> is written literally, except for the following 
sequences:

<ul><li><code>~a</code> or <code>~A</code> is replaced by the printed representation
of the next <code>obj</code>.</li>
<li><code>~s</code> or <code>~S</code> is replaced by the ``slashified'' printed
representation of the next <code>obj</code>.</li>
<li><code>~w</code> or <code>~W</code> is replaced by the printed representation
of the next <code>obj</code> (circular structures are correctly handled and
printed using <code>write*</code>).</li>
<li><code>~d</code> or <code>~D</code> is replaced by the decimal printed representation
of the next <code>obj</code> (which must be a number).</li>
<li><code>~x</code> or <code>~X</code> is replaced by the hexadecimal printed representation
of the next <code>obj</code> (which must be a number).</li>
<li><code>~o</code> or <code>~O</code> is replaced by the octal printed representation
of the next <code>obj</code> (which must be a number).</li>
<li><code>~b</code> or <code>~B</code> is replaced by the binary printed representation
of the next <code>obj</code> (which must be a number).</li>
<li><code>~c</code> or <code>~C</code> is replaced by the printed representation
of the next <code>obj</code> (which must be a character).</li>
<li><code>~y</code> or <code>~Y</code> is replaced by the pretty-printed representation
of the next <code>obj</code>. The standard pretty-printer is used here.</li>
<li><code>~?</code> is replaced by the result of the recursive call of <code>format</code>
with the two next <code>obj</code>.</li>
<li><code>~k</code> or <code>~K</code> is another name for <code>~?</code></li>
<li><code>~[w[,d]]f</code> or <code>~[w[,d]]F</code> is replaced by the printed
representation of next <code>obj</code> (which must be a number) with width <code>w</code>
and <code>d</code> digits after the decimal. Eventually, <code>d</code> may be omitted.</li>
<li><code>~~</code> is replaced by a single tilde character.</li>
<li><code>~%</code> is replaced by a newline</li>
<li><code>~t</code> or <code>~t</code> is replaced by a tabulation character.</li>
<li><code>~&amp;</code> is replaced by a newline character if it is known that the
previous character was not a newline</li>
<li><code>~_</code> is replaced by a space</li>
<li><code>~h</code> or <code>~H</code> provides some help</li>
</ul>

<code>Port</code> can be a boolean or a port. If <code>port</code> is <code>#t</code>, output goes to
the current output port; if <code>port</code> is <code>#f</code>, the output is returned as a
string.  Otherwise, the output is printed on the specified port.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>   (format #f <font color="red">&quot;A test.&quot;</font>)        &#8658; <font color="red">&quot;A test.&quot;</font>
   (format #f <font color="red">&quot;A ~a.&quot;</font> <font color="red">&quot;test&quot;</font>)   &#8658; <font color="red">&quot;A test.&quot;</font>
   (format #f <font color="red">&quot;A ~s.&quot;</font> <font color="red">&quot;test&quot;</font>)   &#8658; <font color="red">&quot;A \&quot;</font>test\<font color="red">&quot;.&quot;</font>
   (format <font color="red">&quot;~8,2F&quot;</font> 1/3)         &#8658; <font color="red">&quot;    0.33&quot;</font>
   (format <font color="red">&quot;~6F&quot;</font> 32)            &#8658; <font color="red">&quot;    32&quot;</font>
   (format <font color="red">&quot;~1,2F&quot;</font> 4321)        &#8658; <font color="red">&quot;4321.00&quot;</font>
   (format <font color="red">&quot;~1,2F&quot;</font> (sqrt -3.9)) &#8658; <font color="red">&quot;0.00+1.97i&quot;</font>
   (format <font color="red">&quot;#d~d #x~x #o~o #b~b~%&quot;</font> 32 32 32 32)
                                &#8658; <font color="red">&quot;#d32 #x20 #o40 #b100000\n&quot;</font>
   (format #f <font color="red">&quot;~&amp;1~&amp;~&amp;2~&amp;~&amp;~&amp;3~%&quot;</font>)
                                &#8658; <font color="red">&quot;1\n2\n3\n&quot;</font>
   (format <font color="red">&quot;~a ~? ~a&quot;</font> 'a <font color="red">&quot;~s&quot;</font> '(new) 'test)
                                &#8658; <font color="red">&quot;a new test&quot;</font>
</pre></td></tr>
</tbody></table></blockquote>


<strong>Note:</strong> The second form of <code>format</code> is compliant with 
<strong><a href="http://srfi.schemers.org/srfi-28/srfi-28.html">SRFI-28</a></strong>
     (<em>Basic Format Strings</em>). That is, when
<code>port</code> is omitted, the output is returned as a string as if <code>port</code> was 
given the value <code>#f</code>.
<br /><br />
<strong>Note:</strong> Since version 0.58, <code>format</code> is also compliant with 
<strong><a href="http://srfi.schemers.org/srfi-48/srfi-48.html">SRFI-48</a></strong>
     (<em>Intermediate Format Strings</em>).</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="flush-output-port"></a><a name="--index-entry-11645"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(flush-output-port)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(flush-output-port port)</font></strong></code><br /><br />Flushes the buffer associated with the given output <code>port</code>. The
<code>port</code> argument may be omitted, in which case it defaults to the value
returned by <code>current-output-port</code></td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="printerr"></a><a name="print"></a><a name="--index-entry-11671"></a><a name="--index-entry-11675"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(print obj ...)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(printerr obj ...)</font></strong></code><br /><br />These procedures display all their arguments followed by a newline. The
procedure <code>print</code> uses the standard output port, whereas <code>printerr</code> uses the
current error port</td></tr>
</tbody></table><a name="System-interface"></a>
<h4 id="System-interface"><font color="darkolivegreen">4.11.4 System interface</font></h4>
<a name="--index-entry-11700"></a><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="load"></a><a name="--index-entry-11706"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(load filename)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br /><code>Filename</code> should be a string naming an existing file containing Scheme 
expressions. <code>Load</code> has been extended in <span style="font-variant: small-caps">STklos</span> to allow loading of
file containing Scheme compiled code as well as object files 
(<em>aka</em> shared objects). The loading of object files is not available on 
all architectures. The value returned by <code>load</code> is <em>void</em>.
<br /><br /> 
If the file whose name is <code>filename</code> cannot be located, <code>load</code> will try 
to find it in one of the directories given by <code><a href="stklos-ref-9.html#load-path">???</a></code>
with the suffixes given by <code><a href="stklos-ref-9.html#load-suffixes">???</a></code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="try-load"></a><a name="--index-entry-11738"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(try-load filename)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br /><code>try-load</code> tries to load the file named <code>filename</code>. As <code>load</code>, 
<code>try-load</code> tries to find the file given the current load path 
and a set of suffixes if <code>filename</code> cannot be loaded. If <code>try-load</code>
is able to find a readable file, it is loaded, and <code>try-load</code> returns 
<code>#t</code>. Otherwise,  <code>try-load</code> retuns <code>#f</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="find-path"></a><a name="--index-entry-11766"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(find-path str)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(find-path str path)</font></strong></code><br /><code><strong><font color="IndianRed">(find-path str path suffixes)</font></strong></code><br /><br />In its first form, <code>find-path</code> returns the path name of the file
that should be loaded by the procedure  <code>load</code> given the name <code>str</code>.
The string returned depends of the current  load path and of the
currently accepted suffixes.
<br /><br />
The other forms of <code>find-path</code> are more general and allow to give a path
list (a list of strings representing supposed directories) and a set
of suffixes (given as a list of strings too) to try for finding a file.
If no file is found, <code>find-path</code> returns <code>#f</code>.
<br /><br />
For instance, on a &quot;classical&quot; Unix box:
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(find-path <font color="red">&quot;passwd&quot;</font> '(<font color="red">&quot;/bin&quot;</font> <font color="red">&quot;/etc&quot;</font> <font color="red">&quot;/tmp&quot;</font>))
            &#8658; <font color="red">&quot;/etc/passwd&quot;</font>
(find-path <font color="red">&quot;stdio&quot;</font> '(<font color="red">&quot;/usr&quot;</font> <font color="red">&quot;/usr/include&quot;</font>) '(<font color="red">&quot;c&quot;</font> <font color="red">&quot;h&quot;</font> <font color="red">&quot;stk&quot;</font>))
            &#8658; <font color="red">&quot;/usr/include/stdio.h&quot;</font>
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="current-loading-file"></a><a name="--index-entry-11824"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(current-loading-file)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the path of the file that is currently being load.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="provided-"></a><a name="require-provide"></a><a name="provide"></a><a name="require"></a><a name="--index-entry-11845"></a><a name="--index-entry-11849"></a><a name="--index-entry-11853"></a><a name="--index-entry-11857"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(require string)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(provide string)</font></strong></code><br /><code><strong><font color="IndianRed">(require/provide string)</font></strong></code><br /><code><strong><font color="IndianRed">(provided? string)</font></strong></code><br /><br /><code>Require</code> loads the file whose name is <code>string</code> if it was not
previously "<em>provided</em>". <code>Provide</code> permits to store <code>string</code> in
the list of already provided files. Providing a file permits to avoid
subsequent loads of this file. <code>Require/provide</code> is more or less equivalent to
a <code>require</code> followed by a <code>provide</code>. <code>Provided?</code> returns <code>#t</code> if
<code>string</code> was already provided; it returns <code>#f</code> otherwise.</td></tr>
</tbody></table><a name="Keywords"></a>
<table width="100%"><tr><td bgcolor="#E6F2E6"><h3 id="Keywords"><font color="#000000">4.12 Keywords</font></h3></table>
<a name="--index-entry-11906"></a><p>Keywords are symbolic constants which evaluate to themselves. 
A keyword is a symbol whose first (or last) character is a colon 
(<em>":"</em>).</p><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="keyword-"></a><a name="--index-entry-11915"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(keyword obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns <code>#t</code> if <code>obj</code> is a keyword, otherwise returns <code>#f</code>.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(keyword? 'foo)     &#8658; #f
(keyword? ':foo)    &#8658; #t
(keyword? <font color="#00cf00">'foo:</font>)    &#8658; #t
(keyword? <font color="#00cf00">:foo</font>)     &#8658; #t
(keyword? <font color="#00cf00">foo:</font>)     &#8658; #t
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="make-keyword"></a><a name="--index-entry-11958"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(make-keyword s)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Builds a keyword from the given <code>s</code>. The parameter <code>s</code> must be a symbol
or a string. 
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(make-keyword <font color="red">&quot;test&quot;</font>)    &#8658; <font color="#00cf00">:test</font>
(make-keyword 'test)     &#8658; <font color="#00cf00">:test</font>
(make-keyword <font color="red">&quot;:hello&quot;</font>)  &#8658; <font color="#00cf00">::hello</font>
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="keyword--string"></a><a name="--index-entry-11996"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(keyword-&gt;string key)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the name of <code>key</code> as a string. The result does not contain a colon.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="key-get"></a><a name="--index-entry-12015"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(key-get list key)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(key-get list key default)</font></strong></code><br /><br /><code>List</code> must be a list of keywords and their respective values.
<code>key-get</code> scans the <code>list</code> and returns the value
associated with the given <code>key</code>. If  <code>key</code> does
not appear in an odd position in <code>list</code>, the specified
<code>default</code> is returned, or an error is raised if no <code>default</code> was
specified.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(key-get '(<font color="#00cf00">:one</font> 1 <font color="#00cf00">:two</font> 2) <font color="#00cf00">:one</font>)     &#8658; 1
(key-get '(<font color="#00cf00">:one</font> 1 <font color="#00cf00">:two</font> 2) <font color="#00cf00">:four</font> #f) &#8658; #f
(key-get '(<font color="#00cf00">:one</font> 1 <font color="#00cf00">:two</font> 2) <font color="#00cf00">:four</font>)    &#8658; <font color="red"><strong>error</strong></font>
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="key-set-"></a><a name="--index-entry-12068"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(key-set! list key value)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br /><code>List</code> must be a list of keywords and their respective values.
<code>key-set!</code> sets the value associated to <code>key</code> in the keyword list. 
If the key is already present in <code>list</code>, the keyword list is 
<em>physically</em> changed. 
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<strong>let</strong> ((l (list <font color="#00cf00">:one</font> 1 <font color="#00cf00">:two</font> 2)))
  (<strong>set!</strong> l (key-set! l <font color="#00cf00">:three</font> 3))
  (cons (key-get l <font color="#00cf00">:one</font>) 
        (key-get l <font color="#00cf00">:three</font>)))            &#8658; (1 . 3)
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="key-delete-"></a><a name="key-delete"></a><a name="--index-entry-12109"></a><a name="--index-entry-12113"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(key-delete  list key)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(key-delete! list key)</font></strong></code><br /><br /><code>List</code> must be a list of keywords and their respective values.
<code>key-delete</code> remove the <code>key</code> and its associated value of the keyword 
list. The key can be absent of the list. 
<br /><br />
<code>key-delete!</code> does the
same job than <code>key-delete</code> by physically modifying its <code>list</code> argument.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(key-delete '(<font color="#00cf00">:one</font> 1 <font color="#00cf00">:two</font> 2) <font color="#00cf00">:two</font>)    &#8658; (<font color="#00cf00">:one</font> 1)
(key-delete '(<font color="#00cf00">:one</font> 1 <font color="#00cf00">:two</font> 2) <font color="#00cf00">:three</font>)  &#8658; (<font color="#00cf00">:one</font> 1 <font color="#00cf00">:two</font> 2)
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><a name="Hash-Tables"></a>
<table width="100%"><tr><td bgcolor="#E6F2E6"><h3 id="Hash-Tables"><font color="#000000">4.13 Hash Tables</font></h3></table>
<a name="--index-entry-12162"></a><p>A hash table consists of zero or more entries, each consisting of a key
and a value. Given the key for an entry, the hashing function can very
quickly locate the entry, and hence the corresponding value. There may
be at most one entry in a hash table with a particular key, but many
entries may have the same value.</p><p><span style="font-variant: small-caps">STklos</span> hash tables grow gracefully as the number of entries
increases, so that there are always less than three entries per hash
bucket, on average.  This allows for fast lookups regardless of the
number of entries in a table.</p><p><span style="font-variant: small-caps">STklos</span> hash tables procedures are identical to the ones
defined in <strong><a href="http://srfi.schemers.org/srfi-69/srfi-69.html">SRFI-69</a></strong>
     (<em>Basic Hash Tables</em>). Note that the default comparison function
is <code>eq?</code> whereas it is <code>equal?</code> in this SRFI. See
<a href="stklos-ref-11.html#SRFIs">SRFIs</a> for more information.</p><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="make-hash-table"></a><a name="--index-entry-12180"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(make-hash-table)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(make-hash-table comparison)</font></strong></code><br /><code><strong><font color="IndianRed">(make-hash-table comparison hash)</font></strong></code><br /><br /><code>Make-hash-table</code> admits three different forms.  The most general form
admit two arguments. The first argument is a comparison function which
determines how keys are compared; the second argument is a function which
computes a hash code for an object and returns the hash code as a non
negative integer. Objets with the same hash code are stored in an A-list
registered in the bucket corresponding to the key.
<br /><br /> 
If omitted, 
<ul><li><code>hash</code> defaults to the <code>hash-table-hash</code> procedure (see
<a href="stklos-ref-4.html#hash-table-hash">???</a>).</li>
<li><code>comparison</code> defaults to the <code>eq?</code> procedure (see <a href="stklos-ref-4.html#eq-">???</a>).</li>
</ul>
Consequently, 
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<font color="#6959cf"><strong>define</strong></font> h (make-hash-table))
</pre></td></tr>
</tbody></table></blockquote>

is equivalent to
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<font color="#6959cf"><strong>define</strong></font> h (make-hash-table eq? hash-table-hash))
</pre></td></tr>
</tbody></table></blockquote>


An interesting example is 
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<font color="#6959cf"><strong>define</strong></font> h (make-hash-table string-ci=? string-length))
</pre></td></tr>
</tbody></table></blockquote>

which defines a new hash table which uses <code>string-ci=?</code> for
comparing keys. Here, we use the string-length as a (very simple) 
hashing function. Of course, a function which gives a key depending 
of the characters composing the string gives a better repartition
and should probably enhance performances. For instance, the following
call to <code>make-hash-table</code> should return a more efficient, even if
not perfect, hash table:
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(make-hash-table 
   string-ci=? 
   (<strong>lambda</strong> (s)
     (<strong>let</strong> ((len (string-length s)))
       (<strong>do</strong> ((h 0)  (i 0 (+ i 1)))
           ((= i len) h)
         (<strong>set!</strong> h
               (+ h (char-&gt;integer 
                      (char-downcase (string-ref s i)))))))))
</pre></td></tr>
</tbody></table></blockquote>


<strong>Note:</strong> Hash tables with a comparison function equal to <code>eq?</code> or
<code>string=?</code> are handled in an more efficient way (in fact, they don't use
the <code>hash-table-hash</code> function to speed up hash table retrievals).</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="hash-table-"></a><a name="--index-entry-12258"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(hash-table? obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns <code>#t</code> if <code>obj</code> is a hash table, returns <code>#f</code> otherwise.</td></tr>
</tbody></table><a name="--index-entry-12277"></a><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="hash-table-hash"></a><a name="--index-entry-12283"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(hash-table-hash obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Computes a hash code for an object and returns this hash code as a
non negative integer. A property of <code>hash-table-hash</code> is that 
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(equal? x y) &#8658; (equal? (hash-table-hash x) (hash-table-hash y)
</pre></td></tr>
</tbody></table></blockquote>


as the the Common Lisp <code>sxhash</code> function from which this procedure is
modeled.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="alist--hash-table"></a><a name="--index-entry-12310"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(alist-&gt;hash-table alist)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(alist-&gt;hash-table alist comparison)</font></strong></code><br /><code><strong><font color="IndianRed">(alist-&gt;hash-table alist comparison hash)</font></strong></code><br /><br />Returns hash-table built from the ``association list''
<code>alist</code>. This function maps the <code>car</code> of every element in <code>alist</code>
to the <code>cdr</code> of corresponding elements in <code>alist</code>. the <code>comparison</code> and
<code>hash</code> functions are interpreted as in <code>make-hash-table</code>. If some key
occurs multiple times in <code>alist</code>, the value in the first
association will take precedence over later ones. 
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="hash-table--alist"></a><a name="--index-entry-12345"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(hash-table-&gt;alist hash)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns an ``association list'' built from the entries in <code>hash</code>.  
Each entry in <code>hash</code> will be represented as a pair whose <code>car</code> is the
entry's key and whose <code>cdr</code> is its value.
<br /><br />
<strong>Note:</strong> the order of pairs in the resulting list is unspecified.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre> 
(<strong>let</strong> ((h (make-hash-table)))
  (<strong>dotimes</strong> (i 5) 
    (hash-table-set! h i (number-&gt;string i)))
  (hash-table-&gt;alist h))    
       &#8658; ((3 . <font color="red">&quot;3&quot;</font>) (4 . <font color="red">&quot;4&quot;</font>) (0 . <font color="red">&quot;0&quot;</font>)
           (1 . <font color="red">&quot;1&quot;</font>) (2 . <font color="red">&quot;2&quot;</font>))
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="hash-table-set-"></a><a name="--index-entry-12389"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(hash-table-set! hash key value)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Enters an association between <code>key</code> and <code>value</code> in the<code>hash</code> table. 
The value returned by <code>hash-table-set!</code> is <em>void</em>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="hash-table-ref"></a><a name="--index-entry-12412"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(hash-table-ref hash key)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(hash-table-ref hash key thunk)</font></strong></code><br /><br />Returns the value associated with <code>key</code> in the given <code>hash</code> table. If no 
value has been associated with <code>key</code> in <code>hash</code>, the specified <code>thunk</code> is 
called and its value is returned; otherwise an error is raised.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre> 
(<font color="#6959cf"><strong>define</strong></font> h1 (make-hash-table))
(hash-table-set! h1 'foo (list 1 2 3))
(hash-table-ref  h1 'foo)                 &#8658;  (1 2 3)
(hash-table-ref  h1 'bar 
                    (<strong>lambda</strong> () 'absent))  &#8658;  absent
(hash-table-ref  h1 'bar)                 &#8658;  <font color="red"><strong>error</strong></font>
(hash-table-set! h1 '(a b c) 'present)
(hash-table-ref  h1 '(a b c) 
                     (<strong>lambda</strong> () 'absent)) &#8658; absent

(<font color="#6959cf"><strong>define</strong></font> h2 (make-hash-table equal?))
(hash-table-set! h2 '(a b c) 'present)
(hash-table-ref  h2 '(a b c))             &#8658; present
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="hash-table-ref-default"></a><a name="--index-entry-12472"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(hash-table-ref/default hash key)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />This function is equivalent to 
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(hash-table-ref hash key (<strong>lambda</strong> () default))
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="hash-table-delete-"></a><a name="--index-entry-12496"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(hash-table-delete! hash key)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Deletes the entry for <code>key</code> in <code>hash</code>, if it exists. Result of 
<code>hash-table-delete!</code> is <em>void</em>.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<font color="#6959cf"><strong>define</strong></font> h (make-hash-table))
(hash-table-set! h 'foo (list 1 2 3))
(hash-table-ref h 'foo)                &#8658; (1 2 3)
(hash-table-delete! h 'foo) 
(hash-table-ref h 'foo 
                  (<strong>lambda</strong> () 'absent)  &#8658; absent
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="hash-table-exists-"></a><a name="--index-entry-12534"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(hash-table-exists? hash key)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns <code>#t</code> if there is any association of <code>key</code> in
<code>hash</code>. Returns <code>#f</code> otherwise.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="hash-table-update-"></a><a name="hash-table-update--default"></a><a name="--index-entry-12557"></a><a name="--index-entry-12561"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(hash-table-update! hash key update-fun thunk)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(hash-table-update!/default hash key update-fun default)</font></strong></code><br /><br />Update the value associated to <code>key</code> in table <code>hash</code> if key is already in
table with the value <code>(update-fun current-value)</code>. If no value is
associated to <code>key</code>, a new entry in the table is first inserted
before updating it (this new entry being the result of calling <code>thunk</code>).
<br /><br />
Note that the expression
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(hash-table-update!/default hash key update-fun default)
</pre></td></tr>
</tbody></table></blockquote>

is equivalent to
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(hash-table-update! hash key update-fun (<strong>lambda</strong> () default))
</pre></td></tr>
</tbody></table></blockquote>


<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<strong>let</strong> ((h   (make-hash-table))
      (1+  (<strong>lambda</strong> (n) (+ n 1))))
  (hash-table-update!/default h 'test 1+ 100)
  (hash-table-update!/default h 'test 1+)
  (hash-table-ref h 'test))             &#8658; 102
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="hash-table-for-each"></a><a name="hash-table-walk"></a><a name="--index-entry-12614"></a><a name="--index-entry-12618"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(hash-table-for-each hash proc)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(hash-table-walk hash proc)</font></strong></code><br /><br /><code>Proc</code> must be a procedure taking two arguments. <code>Hash-table-for-each</code>
calls <code>proc</code> on each key/value association in <code>hash</code>, with the key as 
the first argument and the value as the second.  The value returned by 
<code>hash-table-for-each</code> is <em>void</em>. 
 <br /><br />
<strong>Note:</strong> The order of application of <code>proc</code> is unspecified.
 <br /><br />
<strong>Note:</strong> <code>hash-table-walk</code> is another name for <code>hash-table-for-each</code>
(this is the name used in <strong><a href="http://srfi.schemers.org/srfi-69/srfi-69.html">SRFI-69</a></strong>
     (<em>Basic Hash Tables</em>)).

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<strong>let</strong> ((h   (make-hash-table))
      (sum 0))
  (hash-table-set! h 'foo 2)
  (hash-table-set! h 'bar 3)
  (hash-table-for-each h (<strong>lambda</strong> (key value)
                           (<strong>set!</strong> sum (+ sum value))))
  sum)           &#8658;  5 
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="hash-table-map"></a><a name="--index-entry-12673"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(hash-table-map hash proc)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br /><code>Proc</code> must be a procedure taking two arguments. <code>Hash-table-map</code>
calls <code>proc</code> on each key/value association in <code>hash</code>, with the key as 
the first argument and the value as the second.  The result of 
<code>hash-table-map</code> is a list of the values returned by <code>proc</code>, in an 
unspecified order.
<br /><br />
<strong>Note:</strong> The order of application of <code>proc</code> is unspecified.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<strong>let</strong> ((h (make-hash-table)))
  (<strong>dotimes</strong> (i 5) 
    (hash-table-set! h i (number-&gt;string i)))
  (hash-table-map h (<strong>lambda</strong> (key value)
                       (cons key value))))    
             &#8658; ((3 . <font color="red">&quot;3&quot;</font>) (4 . <font color="red">&quot;4&quot;</font>) (0 . <font color="red">&quot;0&quot;</font>) (1 . <font color="red">&quot;1&quot;</font>) (2 . <font color="red">&quot;2&quot;</font>))
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="hash-table-keys"></a><a name="hash-table-values"></a><a name="--index-entry-12721"></a><a name="--index-entry-12725"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(hash-table-keys hash)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(hash-table-values hash)</font></strong></code><br /><br />Returns the keys or the values of <code>hash</code>. </td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="hash-table-fold"></a><a name="--index-entry-12748"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(hash-table-fold hash func init-value)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />This procedure calls <code>func</code> for every association in <code>hash</code>
with three arguments: the key of the association key, the value
of the association value, and an accumulated value, <code>val</code>. <code>Val</code> is
init-value for the first invocation of <code>func</code>, and for subsequent
invocations of <code>func</code>, the return value of the previous invocation of
<code>func</code>. The value <code>final-value</code> returned by <code>hash-table-fold</code> is the
return value of the last invocation of <code>func</code>. The order in which <code>func</code> is
called for different associations is unspecified.
<br /><br />
For instance, the following expression
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(hash-table-fold ht (<strong>lambda</strong> (k v acc) (+ acc 1)) 0)
</pre></td></tr>
</tbody></table></blockquote>

computes the number of associations present in the <code>ht</code> hash table.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="hash-table-copy"></a><a name="--index-entry-12785"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(hash-table-copy hash)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns a copy of <code>hash</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="hash-table-merge-"></a><a name="--index-entry-12804"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(hash-table-merge! hash1 hash2)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Adds all mappings in <code>hash2</code> into <code>hash1</code> and returns the resulting
hash table. This function may modify <code>hash1</code> destructively.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="hash-table-equivalence-function"></a><a name="--index-entry-12825"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(hash-table-equivalence-function hash)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the equivalence predicate used for keys in <code>hash</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="hash-table-hash-function"></a><a name="--index-entry-12844"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(hash-table-hash-function hash)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the hash function used for keys in <code>hash</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="hash-table-size"></a><a name="--index-entry-12863"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(hash-table-size hash)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the number of entries in the <code>hash</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="hash-table-stats"></a><a name="--index-entry-12882"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(hash-table-stats hash)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(hash-table-stats hash port)</font></strong></code><br /><br />Prints  overall information about <code>hash</code>, such as the number of entries
it contains, the number of buckets in its hash array, and the utilization
of the buckets. Informations are printed on <code>port</code>. If no <code>port</code> is given
to <code>hash-table-stats</code>, information are printed on the current output port 
(see <a href="stklos-ref-4.html#current-output-port">???</a>).</td></tr>
</tbody></table><a name="Dates-and-Times"></a>
<table width="100%"><tr><td bgcolor="#E6F2E6"><h3 id="Dates-and-Times"><font color="#000000">4.14 Dates and Times</font></h3></table>
<p><span style="font-variant: small-caps">STklos</span> stores dates and times with a compact
representation which consists is an integer which represents the
number of seconds elapsed since the <em>Epoch</em> (00:00:00 on
January 1, 1970, Coordinated Universal Time --UTC). Dates can
also be represented with date structures.</p><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="current-time"></a><a name="--index-entry-12915"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(current-time)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the time since the Epoch (that is 00:00:00 UTC, January 1, 1970), 
measured in seconds.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="full-current-time"></a><a name="--index-entry-12933"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(full-current-time)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the time of the day as a pair where 
<ul><li>the  first element is the time since the Epoch 
(that is 00:00:00 UTC, January 1, 1970),  measured in seconds. </li>
<li>the second element is the number of microseconds in the given 
second.</li>
</ul></td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="seconds--date"></a><a name="--index-entry-12954"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(seconds-&gt;date n)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Convert the date <code>n</code> expressed as a number of seconds since the Epoch
to a date.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="seconds--string"></a><a name="--index-entry-12973"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(seconds-&gt;string format n)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Convert a date expressed in seconds using the string <code>format</code> as a
specification. Conventions for <code>format</code> are given below:
<ul><li><strong>~~ </strong>a literal ~</li>
<li><strong>~a </strong>locale's abbreviated weekday name (Sun...Sat)</li>
<li><strong>~A </strong>locale's full weekday name (Sunday...Saturday)</li>
<li><strong>~b </strong>locale's abbreviate month name (Jan...Dec)</li>
<li><strong>~B </strong>locale's full month day (January...December)</li>
<li><strong>~c </strong>locale's date and time
(e.g., <code>Fri Jul 14 20:28:42-0400 2000</code>)</li>
<li><strong>~d </strong>day of month, zero padded (01...31)</li>
<li><strong>~D </strong>date (mm/dd/yy)</li>
<li><strong>~e </strong>day of month, blank padded ( 1...31)</li>
<li><strong>~f </strong>seconds+fractional seconds, using locale's
        decimal separator (e.g. 5.2).</li>
<li><strong>~h </strong>same as ~b</li>
<li><strong>~H </strong>hour, zero padded, 24-hour clock (00...23)</li>
<li><strong>~I </strong>hour, zero padded, 12-hour clock (01...12)</li>
<li><strong>~j </strong>day of year, zero padded</li>
<li><strong>~k </strong>hour, blank padded, 24-hour clock (00...23)</li>
<li><strong>~l </strong>hour, blank padded, 12-hour clock (01...12)</li>
<li><strong>~m </strong>month, zero padded (01...12)</li>
<li><strong>~M </strong>minute, zero padded (00...59)</li>
<li><strong>~n </strong>new line</li>
<li><strong>~p </strong>locale's AM or PM</li>
<li><strong>~r </strong>time, 12 hour clock, same as <code>~I:~M:~S ~p</code></li>
<li><strong>~s </strong>number of full seconds since &quot;the epoch&quot; (in UTC)</li>
<li><strong>~S </strong>second, zero padded (00...61)</li>
<li><strong>~t </strong>horizontal tab</li>
<li><strong>~T </strong>time, 24 hour clock, same as <code>~H:~M:~S</code></li>
<li><strong>~U </strong>week number of year with Sunday as first day of week
        (00...53)</li>
<li><strong>~V </strong>weekISO 8601:1988 week number of year (01...53)
      (week 1 is the first week that has at least 4 days in the current year,
       and  with  Monday  as  the first day of the week)</li>
<li><strong>~w </strong>day of week (1...7, 1 is Monday)</li>
<li><strong>~W </strong>week number of year with Monday as first day of week
        (01...52)</li>
<li><strong>~x </strong>week number of year with Monday as first day of week
        (00...53)</li>
<li><strong>~X </strong>locale's date representation, for example: &quot;07/31/00&quot;</li>
<li><strong>~y </strong>last two digits of year (00...99)</li>
<li><strong>~Y </strong>year</li>
<li><strong>~z </strong>time zone in RFC-822 style</li>
<li><strong>~Z </strong>symbol time zone</li>
</ul></td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="seconds--list"></a><a name="--index-entry-13067"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(seconds-&gt;list sec)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns a keyword list for the date given by <code>sec</code> (a date based on the 
Epoch). The keyed values returned are
<ul><li>second : 0 to 59 (but can be up to 61 to allow for leap seconds)</li>
<li>minute : 0 to 59</li>
<li>hour : 0 to 23</li>
<li>day : 1 to 31</li>
<li>month : 1 to 12</li>
<li>year : e.g., 2002</li>
<li>week-day : 0 (Sunday) to 6 (Saturday)</li>
<li>year-day : 0 to 365 (365 in leap years)</li>
<li>dst : indication about daylight savings time. See <a href="stklos-ref-4.html#date-dst">???</a></li>
<li>tz : the difference between Coordinated Universal Time
(UTC) and local standard time in seconds.</li>
</ul>
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(seconds-&gt;list (current-time))   
       &#8658; (<font color="#00cf00">:second</font> 51 <font color="#00cf00">:minute</font> 26 <font color="#00cf00">:hour</font> 19
           <font color="#00cf00">:day</font> 5 <font color="#00cf00">:month</font> 11 <font color="#00cf00">:year</font> 2004
           <font color="#00cf00">:week-day</font> 5 <font color="#00cf00">:year-day</font> 310
           <font color="#00cf00">:dst</font> 0 <font color="#00cf00">:tz</font> -3600)
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="current-date"></a><a name="--index-entry-13119"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(current-date)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the current system date.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="make-date"></a><a name="--index-entry-13137"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(make-date :key second minute hour day month year)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Build a date from its argument. <code>hour</code>, <code>minute</code>, <code>second</code> default to 0;
<code>day</code> and <code>month</code> default to 1; <code>year</code> defaults to 1970</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="date-"></a><a name="--index-entry-13161"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(date? obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Return <code>#t</code> if <code>obj</code> is a date, and otherwise returns <code>#f</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="date-second"></a><a name="--index-entry-13182"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(date-second d)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Return the second of date <code>d</code>, in the range 0 to 59.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="date-minute"></a><a name="--index-entry-13201"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(date-minute d)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Return the minute of date <code>d</code>, in the range 0 to 59.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="date-hour"></a><a name="--index-entry-13220"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(date-hour d)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Return the hour of date <code>d</code>, in the range 0 to 23.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="date-day"></a><a name="--index-entry-13239"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(date-day d)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Return the day of date <code>d</code>, in the range 1 to 31</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="date-month"></a><a name="--index-entry-13258"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(date-month d)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Return the month of date <code>d</code>, in the range 1 to 12</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="date-year"></a><a name="--index-entry-13277"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(date-year d)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Return the year of date <code>d</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="date-week-day"></a><a name="--index-entry-13296"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(date-week-day d)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Return the week day of date <code>d</code>, in the range 0 to 6 (0 is Sunday).</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="date-year-day"></a><a name="--index-entry-13315"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(date-year-day d)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Return the the number of days since January 1 of date <code>d</code>, in the range
1 to 366.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="date-dst"></a><a name="--index-entry-13334"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(date-dst d)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Return an indication about daylight saving adjustment:
<ul><li>0 if no daylight saving adjustment</li>
<li>1 if daylight saving adjustment</li>
<li>-1 if the information is not available</li>
</ul></td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="date-tz"></a><a name="--index-entry-13356"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(date-tz d)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Return the time zone of date <code>d</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="date--seconds"></a><a name="--index-entry-13375"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(date-&gt;seconds d)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Convert the date <code>d</code> to the number of seconds since the <em>Epoch</em>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="date--string"></a><a name="--index-entry-13395"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(date-&gt;string format d)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Convert the date <code>d</code>using the string <code>format</code> as a
specification. Conventions for format are the same as the one
of <a href="stklos-ref-4.html#seconds--string">???</a>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="date"></a><a name="--index-entry-13416"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(date)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the current date in a string</td></tr>
</tbody></table><a name="Processes"></a>
<table width="100%"><tr><td bgcolor="#E6F2E6"><h3 id="Processes"><font color="#000000">4.15 Processes</font></h3></table>
<a name="--index-entry-13435"></a><a name="--index-entry-13439"></a><p><span style="font-variant: small-caps">STklos</span> provides access to Unix processes as first class objects. 
Basically, a process contains several informations such as the standard
system process identification (aka PID on Unix Systems), the files where
the standard files of the process are redirected.</p><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="run-process"></a><a name="--index-entry-13447"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(run-process command p1 p2 ...)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br /><code>run-process</code> creates a new process and run the executable
specified in <code>command</code>. The <code>p</code> correspond to the command line
arguments. The following values of <code>p</code> have a special meaning:
<ul><li><code>:input</code> permits to redirect the standard input file of the
process. Redirection can come from a file or from a pipe. To redirect
the standard input from a file, the name of this file must be
specified after <code>:input</code>. Use the special keyword <code>:pipe</code> to
redirect the standard input from a pipe.</li>
<li><code>:output</code> permits to redirect the standard output file of the
process. Redirection can go to a file or to a pipe. To redirect
the standard output to a file, the name of this file must be
specified after <code>:output</code>. Use the special keyword <code>:pipe</code> to
redirect the standard output to a pipe.</li>
<li><code>:error</code> permits to redirect the standard error file of the
process. Redirection can go to a file or to a pipe. To redirect
the standard error to a file, the name of this file must be
specified after <code>error</code>. Use the special keyword <code>:pipe</code> to
redirect the standard error to a pipe.</li>
<li><code>:wait</code> must be followed by a boolean value. This value
specifies if the process must be run asynchronously or not. By
default, the process is run asynchronously (i.e. <code>:wait</code> is <code>#f</code>).</li>
<li><code>:host</code> must be followed by a string. This string represents
the name of the machine on which the command must be executed. This
option uses the external command <code>rsh</code>. The shell variable 
<code>PATH</code> must be correctly set for accessing it without specifying its
abolute path.</li>
<li><code>:fork</code> must be followed by a boolean value. This value
specifies if a <em>fork</em> system call must be done before running
the process. If the process is run without <em>fork</em> the Scheme
program is lost. This feature mimics the ``<code>exec</code>'' primitive of the
Unix shells. By default, a fork is executed before running the process 
(i.e. <code>:fork</code> is <code>#t</code>). This option works on Unix implementations only.</li>
</ul>

The following example launches a process which executes the
Unix command <code>ls</code> with the arguments <code>-l</code> and <code>/bin</code>. The lines 
printed by this command are stored in the file <code>/tmp/X</code>
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(run-process <font color="red">&quot;ls&quot;</font> <font color="red">&quot;-l&quot;</font> <font color="red">&quot;/bin&quot;</font> <font color="#00cf00">:output</font> <font color="red">&quot;/tmp/X&quot;</font>)
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="process-"></a><a name="--index-entry-13511"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(process? obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns <code>#t</code> if <code>obj</code> is a process , otherwise returns <code>#f</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="process-alive-"></a><a name="--index-entry-13532"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(process-alive? proc)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns <code>#t</code> if process <code>proc</code> is currently running, otherwise returns <code>#f</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="process-pid"></a><a name="--index-entry-13553"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(process-pid proc)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns an integer which represents the Unix identification (PID) of the 
processus.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="process-error"></a><a name="process-output"></a><a name="process-input"></a><a name="--index-entry-13573"></a><a name="--index-entry-13577"></a><a name="--index-entry-13581"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(process-input proc)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(process-output proc)</font></strong></code><br /><code><strong><font color="IndianRed">(process-error proc)</font></strong></code><br /><br />Returns the file port associated to the standard input, output or error
of <code>proc</code>, if it is redirected in (or to) a pipe; otherwise
returns <code>#f</code>. Note that the returned port is opened for reading
when calling <code>process-output</code> or <code>process-error</code>; it is opened
for writing when calling <code>process-input</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="process-wait"></a><a name="--index-entry-13612"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(process-wait proc)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Stops the current process (the Scheme process) until <code>proc</code> completion. 
<code>Process-wait</code> returns <code>#f</code> when <code>proc</code> is already terminated; it returns
<code>#t</code> otherwise. </td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="process-exit-status"></a><a name="--index-entry-13635"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(process-exit-status proc)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the exit status of <code>proc</code> if it has finished its execution; 
returns <code>#f</code> otherwise.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="process-send-signal"></a><a name="--index-entry-13655"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(process-send-signal proc sig)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Sends the integer signal <code>sig</code> to <code>proc</code>. Since value of <code>sig</code> is system
dependant, use the symbolic defined signal constants to make your program 
independant of the running system (see <a href="stklos-ref-4.html#signals">???</a>). 
The result of <code>process-send-signal</code> is <em>void</em>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="process-kill"></a><a name="--index-entry-13679"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(process-kill proc)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Kills (brutally) <code>process</code>. The result of <code>process-kill</code>
is <em>void</em>. This procedure is equivalent to
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(process-send-signal process 'SIGTERM)
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="process-continue"></a><a name="process-stop"></a><a name="--index-entry-13706"></a><a name="--index-entry-13710"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(process-stop proc)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(process-continue proc)</font></strong></code><br /><br /><code>Process-stop</code> stops the execution of <code>proc</code> and <code>process-continue</code> resumes 
its execution. They are equivalent, respectively, to 
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(process-send-signal process 'SIGSTOP)
(process-send-signal process 'SIGCONT)
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="process-list"></a><a name="--index-entry-13741"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(process-list)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the list of processes which are currently running (i.e. alive).</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="fork"></a><a name="--index-entry-13759"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(fork)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(fork thunk)</font></strong></code><br /><br />This procedure is a wrapper around the standard Unix <code>fork</code> system
call which permits to create a new (heavy) process. 
When called without parameter, this procedure returns two times 
(one time in the parent process and one time in the child process). 
The value returned in the parent process is a process object 
representing the child process and the value returned in the child 
process is always the value <code>#f</code>.
When called with a parameter (which must be a thunk), the new process
excutes <code>thunk</code> and terminate it execution when <code>thunk</code> returns. The 
value returned in the parent process is a process object representing
the child process.</td></tr>
</tbody></table><a name="Sockets"></a>
<table width="100%"><tr><td bgcolor="#E6F2E6"><h3 id="Sockets"><font color="#000000">4.16 Sockets</font></h3></table>
<a name="--index-entry-13786"></a><p><span style="font-variant: small-caps">STklos</span> defines <strong>sockets</strong>, on systems which support them, 
as first class objects. Sockets permits processes to communicate even if
they are on different machines. Sockets are useful for creating client-server
applications.</p><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="make-client-socket"></a><a name="--index-entry-13795"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed"> (make-client-socket hostname port-number)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed"> (make-client-socket hostname port_number line-buffered) </font></strong></code><br /><br /><code>make-client-socket</code> returns a new socket object. This socket
establishes a link between the running program and the application
listening on port <code>port-number</code> of <code>hostname</code>.  If  the optional argument
<code>line-buffered</code> has a true value, a line buffered policy is used when writing 
to the client socket (i.e. characters on the socket are tranmitted as soon 
as a <code>#\newline</code> character is encountered). The default value of 
<code>line-buffered</code> is <code>#t</code>.
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="make-server-socket"></a><a name="--index-entry-13824"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(make-server-socket)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(make-server-socket port-number)</font></strong></code><br /><br /><code>make-server-socket</code> returns a new socket object. If <code>port-number</code>
is specified, the socket is listening on the specified port; 
otherwise, the communication port is chosen by the system. </td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="socket-shutdown"></a><a name="--index-entry-13848"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(socket-shutdown sock)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(socket-shutdown sock close)</font></strong></code><br /><br /><code>Socket-shutdown</code> shutdowns the connection associated to
<code>socket</code>. If the socket is a server socket, <code>socket-shutdown</code> is called
on all the client sockets connected to this server.
<code>Close</code> indicates if the the socket must be closed or not, when
the connection is destroyed. Closing the socket forbids further 
connections on the same port with the <code>socket-accept</code> procedure.
Omitting a value for <code>close</code> implies the closing of socket.
<br /><br />
The following example shows a simple server: when there is 
a new connection on the port number 12345, the server displays 
the first line sent to it by the client, discards the others and
go back waiting for further client connections.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<strong>let</strong> ((s (make-server-socket 12345)))
   (<strong>let</strong> loop ()
      (<strong>let</strong> ((ns (socket-accept s)))
        (format #t <font color="red">&quot;I've read: ~A\n&quot;</font> 
                (read-line (socket-input ns)))
        (socket-shutdown ns #f)
        (loop))))
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="socket-accept"></a><a name="--index-entry-13892"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(socket-accept socket)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(socket-accept socket line-buffered)</font></strong></code><br /><br /><code>socket-accept</code> waits for a client connection on the given
<code>socket</code>. If no client is already waiting for a connection, this
procedure blocks its caller; otherwise, the first connection request 
on the queue of pending connections is connected and <code>socket-accept</code> 
returns a new client socket to serve this request. 
This procedure must be called on a server socket created
with <code>make-server-socket</code>. The result of <code>socket-accept</code> is undefined. 
<code>Line-buffered</code> indicates if the port should be considered as a 
line buffered. If <code>line-buffered</code> is omitted, it defaults to <code>#t</code>.
<br /><br />
The following example is a simple server which waits for a connection
on the port 12345 <a href="#fn--footnote-13926"><sup><small>1</small></sup></a>.
 Once the connection with the
distant program is established, we read a line on the input port
associated to the socket and we write the length of this line on its
output port. 
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<strong>let*</strong> ((server (make-server-socket 13345))
       (client (socket-accept server))
       (l      (read-line (socket-input client))))
  (format (socket-output client) 
          <font color="red">&quot;Length is: ~an&quot;</font> (string-length l))
  (socket-shutdown server))
</pre></td></tr>
</tbody></table></blockquote>


 Note that shutting down the <code>server</code> socket suffices here to close
also the connection to <code>client</code>. </td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="socket-"></a><a name="--index-entry-13944"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(socket? obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns <code>#t</code> if <code>socket</code> is a socket, otherwise returns <code>#f</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="socket-server-"></a><a name="--index-entry-13965"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(socket-server? obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns <code>#t</code> if <code>socket</code> is a server socket, otherwise returns <code>#f</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="socket-client-"></a><a name="--index-entry-13986"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(socket-client? obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns <code>#t</code> if <code>socket</code> is a client socket, otherwise returns <code>#f</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="socket-host-name"></a><a name="--index-entry-14007"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(socket-host-name socket)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns a string which contains the name of the distant host
attached to <code>socket</code>. If <code>socket</code> has been created with
<code>make-client-socket</code> this procedure returns the official name of
the distant machine used for connection. If <code>socket</code> has been
created with <code>make-server-socket</code>, this function returns the
 official name of the client connected to the socket. If no client
has used yet <code>socket</code>, this function returns <code>#f</code>.  </td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="socket-host-address"></a><a name="--index-entry-14032"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(socket-host-address socket)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns a string which contains the IP number of the distant host
attached to <code>socket</code>. If <code>socket</code> has been created with
<code>make-client-socket</code> this procedure returns the IP number of the
distant machine used for connection. If <code>socket</code> has been created
with <code>make-server-socket</code>, this function returns the address of the
client connected to the socket.  If no client has used yet
<code>socket</code>, this function returns <code>#f</code>.  </td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="socket-local-address"></a><a name="--index-entry-14057"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(socket-local-address socket)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns a string which contains the IP number of the local host 
attached to <code>socket</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="socket-port-number"></a><a name="--index-entry-14076"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(socket-port-number socket)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the integer number of the port used for <code>socket</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="socket-output"></a><a name="socket-input"></a><a name="--index-entry-14096"></a><a name="--index-entry-14100"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(socket-input socket)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(socket-output socket)</font></strong></code><br /><br />Returns the file port associated for reading or writing with the
program connected with <code>socket</code>. If no connection has already been
established, these functions return <code>#f</code>.

The following example shows how to make a client socket. Here we
create a socket on port 13 of the machine <code>kaolin.unice.fr</code><a href="#fn--footnote-14122"><sup><small>2</small></sup></a>:
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<strong>let</strong> ((s (make-client-socket <font color="red">&quot;kaolin.unice.fr&quot;</font> 13)))
  (format #t <font color="red">&quot;Time is: ~A~%&quot;</font> (read-line (socket-input s)))
  (socket-shutdown  s))
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><a name="System-Procedures"></a>
<table width="100%"><tr><td bgcolor="#E6F2E6"><h3 id="System-Procedures"><font color="#000000">4.17 System Procedures</font></h3></table>
<a name="File-Primitives"></a>
<h4 id="File-Primitives"><font color="darkolivegreen">4.17.1 File Primitives</font></h4>
<br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="temporary-file-name"></a><a name="--index-entry-14139"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(temporary-file-name)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Generates a unique temporary file name. The value returned by
<code>temporary-file-name</code> is the newly generated name of <code>#f</code>
if a unique name cannot be generated.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="rename-file"></a><a name="--index-entry-14159"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(rename-file string1 string2)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Renames the file whose path-name is <code>string1</code> to a file whose path-name is
<code>string2</code>. The result of <code>rename-file</code> is <em>void</em>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="remove-file"></a><a name="--index-entry-14181"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(remove-file string)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Removes the file whose path name is given in <code>string</code>.
The result of <code>remove-file</code> is <em>void</em>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="copy-file"></a><a name="--index-entry-14202"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(copy-file string1 string2)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Copies the file whose path-name is <code>string1</code> to a file whose path-name is
<code>string2</code>. If the file <code>string2</code> already exists, its content prior 
the call to <code>copy-file</code> is lost. The result of <code>copy-file</code> is <em>void</em>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="copy-port"></a><a name="--index-entry-14226"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(copy-port in out)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(copy-port in out max)</font></strong></code><br /><br />Copy the content of port <code>in</code>, which must be opened for readind, on
port <code>out</code>, which must be opened for writing. If <code>max</code> is nont specified,
All the characters from the input port are copied on ouput port. If <code>max</code>
is specified, it must be an integer indicatin the maximum number of characters
which are copied from <code>in</code> to <code>out</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="file-exists-"></a><a name="file-is-executable-"></a><a name="file-is-readable-"></a><a name="file-is-writable-"></a><a name="file-is-regular-"></a><a name="file-is-directory-"></a><a name="--index-entry-14259"></a><a name="--index-entry-14263"></a><a name="--index-entry-14267"></a><a name="--index-entry-14271"></a><a name="--index-entry-14275"></a><a name="--index-entry-14279"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(file-is-directory?  string)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(file-is-regular?    string)</font></strong></code><br /><code><strong><font color="IndianRed">(file-is-readable?   string)</font></strong></code><br /><code><strong><font color="IndianRed">(file-is-writable?   string)</font></strong></code><br /><code><strong><font color="IndianRed">(file-is-executable? string)</font></strong></code><br /><code><strong><font color="IndianRed">(file-exists?        string)</font></strong></code><br /><br />Returns <code>#t</code> if the predicate is true for the path name given in
<code>string</code>; returns <code>#f</code> otherwise (or if <code>string</code> denotes a file
which does not exist).</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="file-size"></a><a name="--index-entry-14321"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(file-size string)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the size of the file whose path name is given in
<code>string</code>.If <code>string</code> denotes a file which does not exist, 
<code>file-size</code> returns <code>#f</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="getcwd"></a><a name="--index-entry-14343"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(getcwd)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns a string containing the current working directory.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="chmod"></a><a name="--index-entry-14361"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(chmod str)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(chmod str option1 ...)</font></strong></code><br /><br />Change the access mode of the file whose path name is given in <code>string</code>. 
The options must be composed of either an integer or one of the 
following symbols <code>read</code>, <code>write</code> or <code>execute</code>. Giving no option to <code>chmod</code>
is equivalent to pass it the integer <code>0</code>. If the operation succeeds, 
<code>chmod</code> returns <code>#t</code>; otherwise it returns <code>#f</code>.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(chmod <font color="red">&quot;~/.stklos/stklosrc&quot;</font> 'read 'execute)
(chmod <font color="red">&quot;~/.stklos/stklosrc&quot;</font> #o644)
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="chdir"></a><a name="--index-entry-14400"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(chdir dir)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Changes the current directory to the directory given in string <code>dir</code>.</td></tr>
</tbody></table><a name="--index-entry-14417"></a><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="expand-file-name"></a><a name="--index-entry-14423"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(expand-file-name path)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br /><code>Expand-file-name</code> expands the filename given in <code>path</code> to
an absolute path. 
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>  <font color="#ffa600"><i>;; Current directory is ~eg/stklos (i.e. /users/eg/stklos)</i></font>
  (expand-file-name <font color="red">&quot;..&quot;</font>)            &#8658; <font color="red">&quot;/users/eg&quot;</font>
  (expand-file-name <font color="red">&quot;~eg/../eg/bin&quot;</font>) &#8658; <font color="red">&quot;/users/eg/bin&quot;</font>
  (expand-file-name <font color="red">&quot;~/stklos)&quot;</font>      &#8658; <font color="red">&quot;/users/eg/stk&quot;</font>
</pre></td></tr>
</tbody></table></blockquote>
 </td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="canonical-file-name"></a><a name="--index-entry-14464"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(canonical-file-name path)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Expands all symbolic links in <code>path</code> and returns its canonicalized
absolute path name. The resulting path does not have symbolic links. 
If <code>path</code> doesn't designate a valid path name, <code>canonical-file-name</code> 
returns <code>#f</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="decompose-file-name"></a><a name="--index-entry-14486"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(decompose-file-name string)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns an ``exploded'' list of the path name components given in
<code>string</code>.
The first element in the list denotes if the given <code>string</code> is an
absolute path or a relative one, being &quot;/&quot; or &quot;.&quot; respectively.
Each component of this list is a string.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(decompose-file-name <font color="red">&quot;/a/b/c.stk&quot;</font>) &#8658; (<font color="red">&quot;/&quot;</font> <font color="red">&quot;a&quot;</font> <font color="red">&quot;b&quot;</font> <font color="red">&quot;c.stk&quot;</font>)
(decompose-file-name <font color="red">&quot;a/b/c.stk&quot;</font>)  &#8658; (<font color="red">&quot;.&quot;</font> <font color="red">&quot;a&quot;</font> <font color="red">&quot;b&quot;</font> <font color="red">&quot;c.stk&quot;</font>)
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="winify-file-name"></a><a name="--index-entry-14526"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(winify-file-name fn)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />On Win32 system, when compiled with the Cygwin environment,
file names are internally represented in a POSIX-like internal form.
<code>Winify-file-bame</code> permits to obtain back the Win32 name of an interned 
file name
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(winify-file-name <font color="red">&quot;/tmp&quot;</font>)
    &#8658; <font color="red">&quot;C:\\cygwin\\tmp&quot;</font>
(list (getcwd) (winify-file-name (getcwd)))
    &#8658; (<font color="red">&quot;//saxo/homes/eg/Projects/,(stklos)&quot;</font>
        <font color="red">&quot;\\\\saxo\\homes\\eg\\Projects\\,(stklos)&quot;</font>)
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="posixify-file-name"></a><a name="--index-entry-14562"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(posixify-file-name fn)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />On Win32 system, when compiled with the Cygwin environment,
file names are internally represented in a POSIX-like internal form.
<code>posixify-file-bame</code> permits to obtain the interned file name from 
its external form.
file name
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(posixify-file-name <font color="red">&quot;C:\\cygwin\\tmp&quot;</font>)
       &#8658; <font color="red">&quot;/tmp&quot;</font>
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="basename"></a><a name="--index-entry-14591"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(basename str)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns a string containing the last component of the path name
given in <code>str</code>.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(basename <font color="red">&quot;/a/b/c.stk&quot;</font>) &#8658; <font color="red">&quot;c.stk&quot;</font>
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="dirname"></a><a name="--index-entry-14619"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(dirname str)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns a string containing all but the last component of the path
name given in <code>str</code>.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(dirname <font color="red">&quot;/a/b/c.stk&quot;</font>) &#8658; <font color="red">&quot;/a/b&quot;</font>
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="file-separator"></a><a name="--index-entry-14647"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(file-separator)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Retuns the operating system file separator as a character. This is typically 
#\/ on Unix (or Cygwin) systems and #\\ on Windows.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="make-path"></a><a name="--index-entry-14665"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(make-path dirname name)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Builds a file name from the directory <code>dirname</code> and <code>name</code>.
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="glob"></a><a name="--index-entry-14685"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(glob pattern ...)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br /><code>Glob</code> performs file name ``globbing'' in a fashion similar to the 
csh shell. <code>Glob</code> returns a list of the filenames that match at least
one of <code>pattern</code> arguments.  The <code>pattern</code> arguments may contain
the following special characters:
<ul><li><code>?</code> Matches any single character.</li>
<li><code>*</code> Matches any sequence of zero or more characters.</li>
<li><code>[chars]</code> Matches any single character in <code>chars</code>. 
If chars contains a sequence of the form <code>a-b</code> then any character 
between <code>a</code> and <code>b</code> (inclusive) will match.</li>
<li><code>\x</code> Matches the character <code>x</code>.</li>
<li><code>{a,b,...}</code> Matches any of the strings <code>a</code>, <code>b</code>, etc.</li>
</ul>

As with csh, a '.' at the beginning of a file's name or just after 
a '/ must be matched explicitly or with a <code>&#x40;{&#x40;}</code> construct.  
In addition, all '/' characters must be matched explicitly.
<br /><br />
If the first character in a pattern is '~' then it refers to
the home directory of the user whose name follows the '~'.
If the '~' is followed immediately by `/' then the value of
the environment variable HOME is used.
<br /><br />
<code>Glob</code> differs from csh globbing in two ways.  First, it does not
sort its result list (use the <code>sort</code> procedure if you want the list
sorted).
Second, <code>glob</code> only returns the names of files that actually exist; 
in csh no check for existence is made unless a pattern contains a 
<code>?</code>, <code>*</code>, or <code>[]</code> construct.</td></tr>
</tbody></table><a name="Environment"></a>
<h4 id="Environment"><font color="darkolivegreen">4.17.2 Environment</font></h4>
<br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="getenv"></a><a name="--index-entry-14737"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(getenv str)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(getenv)</font></strong></code><br /><br />Looks for the environment variable named <code>str</code> and returns its
value as a string, if it exists. Otherwise, <code>getenv</code> returns <code>#f</code>.
If <code>getenv</code> is called without parameter, it returns the list of 
all the environment variables accessible from the program as an 
A-list.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(getenv <font color="red">&quot;SHELL&quot;</font>)   
     &#8658; <font color="red">&quot;/bin/zsh&quot;</font>
(getenv)
     &#8658; ((<font color="red">&quot;TERM&quot;</font> . <font color="red">&quot;xterm&quot;</font>) (<font color="red">&quot;PATH&quot;</font> . <font color="red">&quot;/bin:/usr/bin&quot;</font>) ...)
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="setenv-"></a><a name="--index-entry-14781"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(setenv! var value)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Sets the environment variable <code>var</code> to <code>value</code>. <code>Var</code> and
<code>value</code> must be strings. The result of <code>setenv!</code> is <em>void</em>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="unsetenv-"></a><a name="--index-entry-14805"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(setenv! var)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Unsets the environment variable <code>var</code>. <code>Var</code>   must be a strings. 
The result of <code>unsetenv!</code> is <em>void</em>.</td></tr>
</tbody></table><a name="System-Informations"></a>
<h4 id="System-Informations"><font color="darkolivegreen">4.17.3 System Informations</font></h4>
<br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="running-os"></a><a name="--index-entry-14830"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(running-os)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the name of the underlying Operating System which is running 
the program. 
The value returned by <code>runnin-os</code> is a symbol. For now, this procedure 
returns either <code>unix</code>, <code>windows</code>, or <code>cygwin-windows</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="hostname"></a><a name="--index-entry-14852"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(hostname)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Return the  host name of the current processor as a string.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="argc"></a><a name="--index-entry-14870"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(argc)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the number of argument present on the command line</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="argv"></a><a name="--index-entry-14888"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(argv)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns a list of the arguments given on the shell command line. The 
interpreter options are no included in the result</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="program-name"></a><a name="--index-entry-14906"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(program-name)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the invocation name of the current program as a string.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="version"></a><a name="--index-entry-14924"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(version)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns a string identifying the current version of the system. A version is 
constituted of three numbers separated by a point: the version, the release
and sub-release numbers.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="machine-type"></a><a name="--index-entry-14942"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(machine-type)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns a string identifying the kind of machine which is running the
program. The result string is of the form 
<code>`(os-name)-`(os-version)-`(processor-type)</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="clock"></a><a name="--index-entry-14961"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(clock)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns an approximation of processor time, in milliseconds, used so far by the
program.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="sleep"></a><a name="--index-entry-14979"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(sleep n)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Suspend the execution of the program for at <code>ms</code> milliseconds. Note that due 
to system clock resolution, the pause may be a little bit longer. If a
signal arrives during the pause, the execution may be resumed. 
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="time"></a><a name="--index-entry-14998"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(time expr1 expr2 ...)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> syntax</i></font></td></tr>
</tbody></table>
<br />Evaluates the expressions <code>expr1</code>, <code>expr2</code>, ... and returns the
result of the last expression. This form prints also the time spent
for this evaluation on the current error port.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="getpid"></a><a name="--index-entry-15018"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(getpid)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the system process number of the current program (i.e. the
Unix <em>pid</em>) as an integer.</td></tr>
</tbody></table><a name="Program-Arguments-Parsing"></a>
<h4 id="Program-Arguments-Parsing"><font color="darkolivegreen">4.17.4 Program Arguments Parsing</font></h4>
<a name="--index-entry-15038"></a><p><span style="font-variant: small-caps">STklos</span> provides a simple way to parse program arguments with the 
|parse-arguments| special form. This form is generally used into
the |main| function in a Scheme script. See <strong><a href="http://srfi.schemers.org/srfi-22/srfi-22.html">SRFI-22</a></strong>
     (<em>Running Scheme Scripts on Unix</em>) on how to 
use a |main| function in a Scheme program.</p><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="parse-arguments"></a><a name="--index-entry-15050"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(parse-arguments &lt;args&gt; &lt;clause1&gt; &lt;clause2&gt; ...)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />The <code>parse-arguments</code> special form is used to parse the
command line arguments of a Scheme script. The implementation of
this form internally uses the GNU C <code>getopt</code> function. As a
consequence <code>parse-arguments</code> accepts options which start with
the '-' (short option) or '--' characters (long option).
<br /><br />
The first argument of <code>parse-arguments</code> is a list of the arguments
given to the program (comprising the program name in the CAR of this
list). Following arguments are clauses. Clauses are described later.
<br /><br />
By  default, <code>parse-arguments</code> permutes the contents of (a copy) of
the arguments as it scans, so that eventually all the non-options are
at the end. However, if the shell environment variable <code>POSIXLY_CORRECT</code>
is set, then option processing stops as soon as a non-option argument
is encountered. 
<br /><br />
A clause must follow the syntax: 
<blockquote><table cellspacing="0" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>&lt;clause&gt;       &#8658; string | &lt;list-clause&gt;
&lt;list clause&gt;  &#8658; (&lt;option descr&gt; &lt;expr&gt; ...) | (else &lt;expr&gt; ...)
&lt;option descr&gt; &#8658; (&lt;option name&gt; `(&lt;keyword&gt; value)*)
&lt;option name&gt;  &#8658; string
&lt;keyword&gt;      &#8658; :alternate | :arg | :help
</pre></td></tr>
</tbody></table></blockquote>


A string clause is used to build the  help associated to the command.
A list clause must follow the syntax describes an option. The <code>&lt;expr&gt;</code>s
associated to a list clauses are executed when the option is recognized.
The <code>else</code> clauses is executed when all parameters have been parsed.
The <code>:alternate</code> key permits to have an alternate name for an option
(generally a short or long name if the option name is a
short or long name).  The <code>:help</code> is used to provide help about the
the option. The <code>:arg</code> is used when the option admit a parameter: 
the symbol given after <code>:arg</code> will be bound to the value of the option
argument when the corresponding <code>&lt;expr&gt;</code>s will be executed.
<br /><br />
In an <code>else</code> clause the symbol <code>other-arguments</code> is bound to the
list of the arguments which are not options.
<br /><br />
The following example shows a rather complete usage of the
<code>parse-arguments</code> form

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>#!/usr/bin/env stklos-script

(<font color="#6959cf"><strong>define</strong></font> (main args)
  (parse-arguments args
     <font color="red">&quot;Usage: foo [options] [parameter ...]&quot;</font>
     <font color="red">&quot;General options:&quot;</font>
       ((<font color="red">&quot;verbose&quot;</font> <font color="#00cf00">:alternate</font> <font color="red">&quot;v&quot;</font> <font color="#00cf00">:help</font> <font color="red">&quot;be more verbose&quot;</font>)
         (format #t <font color="red">&quot;Seen the verbose option~%&quot;</font>))
       ((<font color="red">&quot;long&quot;</font> <font color="#00cf00">:help</font> <font color="red">&quot;a long option alone&quot;</font>)
         (format #t <font color="red">&quot;Seen the long option~%&quot;</font>))
       ((<font color="red">&quot;s&quot;</font> <font color="#00cf00">:help</font> <font color="red">&quot;a short option alone&quot;</font>)
         (format #t <font color="red">&quot;Seen the short option~%&quot;</font>))
     <font color="red">&quot;File options:&quot;</font>
       ((<font color="red">&quot;input&quot;</font> <font color="#00cf00">:alternate</font> <font color="red">&quot;f&quot;</font> <font color="#00cf00">:arg</font> file
                 <font color="#00cf00">:help</font> <font color="red">&quot;use &lt;file&gt; as input&quot;</font>)
         (format #t <font color="red">&quot;Seen the input option with ~S argument~%&quot;</font> file))
       ((<font color="red">&quot;output&quot;</font> <font color="#00cf00">:alternate</font> <font color="red">&quot;o&quot;</font> <font color="#00cf00">:arg</font> file
                  <font color="#00cf00">:help</font> <font color="red">&quot;use &lt;file&gt; as output&quot;</font>)
         (format #t <font color="red">&quot;Seen the output option with ~S argument~%&quot;</font> file))
     <font color="red">&quot;Misc:&quot;</font>
       ((<font color="red">&quot;help&quot;</font> <font color="#00cf00">:alternate</font> <font color="red">&quot;h&quot;</font>
                <font color="#00cf00">:help</font> <font color="red">&quot;provides help for the command&quot;</font>)
         (arg-usage (current-error-port))
         (exit 1))
       (<strong>else</strong> 
     (format #t
             <font color="red">&quot;All options parsed. Remaining arguments are ~S~%&quot;</font>
             other-arguments))))
</pre></td></tr>
</tbody></table></blockquote>


The following program invocation
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>foo -vs --input in -o out arg1 arg2
</pre></td></tr>
</tbody></table></blockquote>


produces the following output
<blockquote><table cellspacing="0" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>Seen the verbose option
Seen the short option
Seen the input option with &quot;in&quot; argument
Seen the output option with &quot;out&quot; argument
All options parsed. Remaining arguments are (&quot;arg1&quot; &quot;arg2&quot;)
</pre></td></tr>
</tbody></table></blockquote>


Finally, the program invocation
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>foo --help
</pre></td></tr>
</tbody></table></blockquote>

produces the following output
<blockquote><table cellspacing="0" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>Usage: foo `(options) `(parameter ...)
General options:
  --verbose, -v               be more verbose
  --long                      a long option alone
  -s                          a short option alone
File options:
  --input=&lt;file&gt;, -f &lt;file&gt;   use &lt;file&gt; as input
  --output=&lt;file&gt;, -o &lt;file&gt;  use &lt;file&gt; as output
Misc:
  --help, -h                  provides help for the command
</pre></td></tr>
</tbody></table></blockquote>


<strong>Note:</strong>
<ul><li>Short option can be concatenated. That is,
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>prog -abc
</pre></td></tr>
</tbody></table></blockquote>

is equivalent to the following program call
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>prog -a -b -c
</pre></td></tr>
</tbody></table></blockquote>
</li>
<li>Any argument following a '--' argument is no more considered as
an option, even if it starts with a '-' or '--'.</li>
<li>Option with a parameter can be written in several ways. For instance
to set the output in the <code>bar</code> file for the previous example can be expressed as
<ul><li><code>--output=bar</code></li>
<li><code>-o bar</code></li>
<li><code>-obar</code></li>
</ul></li>
</ul></td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="arg-usage"></a><a name="--index-entry-15236"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(arg-usage port)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(arg-usage port as-sexpr)</font></strong></code><br /><br />This procedure is only bound inside a <code>parse-arguments</code> form.
It pretty prints the help associated to the clauses of the
<code>parse-arguments</code> form on the given port. If the argument
<code>as-sexpr</code> is passed and is not <code>#f</code>, the help strings are
printed on <code>port</code> as <em>S-expr</em>s. This is useful if the help
strings need to be manipulated by a program.
</td></tr>
</tbody></table><a name="Misc--System-Procedures"></a>
<h4 id="Misc--System-Procedures"><font color="darkolivegreen">4.17.5 Misc. System Procedures</font></h4>
<br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="system"></a><a name="--index-entry-15267"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(system string)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Sends the given <code>string</code> to the system shell <code>/bin/sh</code>. The result of
<code>system</code> is the integer status code the shell returns.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="exec-list"></a><a name="exec"></a><a name="--index-entry-15289"></a><a name="--index-entry-15293"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(exec str)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(exec-list str)</font></strong></code><br /><br />These procedures execute the command given in <code>str</code>. The command given 
in <code>str</code> is passed to <code>/bin/sh</code>. <code>Exec</code> returns a strings which contains 
all the characters that the command <code>str</code> has printed on it's standard
output, whereas <code>exec-list</code> returns a list of the lines which constitute
the output of <code>str</code>.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(exec <font color="red">&quot;echo A; echo B&quot;</font>)                &#8658; <font color="red">&quot;A\nB\n&quot;</font>
(exec-list <font color="red">&quot;echo A; echo B&quot;</font>)           &#8658; (<font color="red">&quot;A&quot;</font> <font color="red">&quot;B&quot;</font>)
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="address-of"></a><a name="--index-entry-15337"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(address-of obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the address of the object <code>obj</code> as an integer.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="exit"></a><a name="--index-entry-15357"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(exit) </font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(exit ret-code)</font></strong></code><br /><br />Exits the program with the specified integer return code. If <code>ret-code</code>
is omitted, the program terminates with a return code of 0.
If  program has registerd exit functions with <code>register-exit-function!</code>, 
they are called (in an order which is the reverse of their call order).</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="die"></a><a name="--index-entry-15381"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(die message)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(die message status)</font></strong></code><br /><br /><code>Die</code> prints the given <code>message</code> on the current error port and exits
the program with the <code>status</code> value. If <code>status</code> is omitted, it
defaults to 1.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="get-password"></a><a name="--index-entry-15407"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(get-password)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />This primitive permits to enter a password (character echoing 
being turned off). The value returned by <code>get-password</code> is the entered
password as a string.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="register-exit-function-"></a><a name="--index-entry-15426"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(register-exit-function! proc)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />This function registers <code>proc</code> as an exit function. This function will 
be called when the program exits. When called, <code>proc</code> will be passed one 
parmater which is the status given to the <code>exit</code> function. The result of 
<code>register-exit-function!</code> is undefined. 
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<strong>let*</strong> ((tmp (temporary-file-name))
       (out (open-output-file tmp)))
  (register-exit-function! (<strong>lambda</strong> (n)
                             (when (zero? n)
                               (remove-file tmp))))
  out)
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><a name="Signals"></a>
<table width="100%"><tr><td bgcolor="#E6F2E6"><h3 id="Signals"><font color="#000000">4.18 Signals</font></h3></table>
<a name="signals"></a><a name="Parameter-Objects"></a>
<table width="100%"><tr><td bgcolor="#E6F2E6"><h3 id="Parameter-Objects"><font color="#000000">4.19 Parameter Objects</font></h3></table>
<p><span style="font-variant: small-caps">STklos</span> parameters correspond to the ones defined in <strong><a href="http://srfi.schemers.org/srfi-39/srfi-39.html">SRFI-39</a></strong>
     (<em>Parameters objects</em>). 
See SRFI document for more information.</p><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="make-parameter"></a><a name="--index-entry-15478"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(make-parameter init)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(make-parameter init converter)</font></strong></code><br /><br />Returns a new parameter object which is bound in the global dynamic
environment to a cell containing the value returned by the call
<code>(converter init)</code>. If the conversion procedure <code>converter</code> is not
specified the identity function is used instead.
<br /><br />
The parameter object is a procedure which accepts zero or one
argument. When it is called with no argument, the content of the
cell bound to this parameter object in the current dynamic
environment is returned. When it is called with one argument, the
content of the cell bound to this parameter object in the current
dynamic environment is set to the result of the call 
<code>(converter arg)</code>, where <code>arg</code> is the argument passed to the
parameter object, and
an unspecified value is returned.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<font color="#6959cf"><strong>define</strong></font> radix
    (make-parameter 10))

(<font color="#6959cf"><strong>define</strong></font> write-shared
   (make-parameter
      #f
      (<strong>lambda</strong> (x)
        (<strong>if</strong> (boolean? x)
            x
            (<font color="red"><strong>error</strong></font> 'write-shared <font color="red">&quot;bad boolean ~S&quot;</font> x)))))

 (radix)           &#8658;  10
 (radix 2)
 (radix)           &#8658;  2
 (write-shared 0)  &#8658; <font color="red"><strong>error</strong></font>

 (<font color="#6959cf"><strong>define</strong></font> prompt
   (make-parameter
     123
     (<strong>lambda</strong> (x)
       (<strong>if</strong> (string? x)
           x
           (with-output-to-string (<strong>lambda</strong> () (write x)))))))

 (prompt)       &#8658;  <font color="red">&quot;123&quot;</font>
 (prompt <font color="red">&quot;&gt;&quot;</font>)
 (prompt)       &#8658;  <font color="red">&quot;&gt;&quot;</font>
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="parameterize"></a><a name="--index-entry-15560"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(parameterize ((expr1 expr2) ...) &lt;body&gt;)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> syntax</i></font></td></tr>
</tbody></table>
<br />The expressions <code>expr1</code> and <code>expr2</code> are evaluated in an unspecified order.
The value of the <code>expr1</code> expressions must be parameter objects.
For each <code>expr1</code> expression and in an unspecified order, the local
dynamic environment is extended with a binding of the parameter object
<code>expr1</code> to a new cell whose content is the result of the call
<code>(converter val)</code>, where <code>val</code> is the value of <code>expr2</code> and converter
is the conversion procedure of the parameter object. The resulting
dynamic environment is then used for the evaluation of <code>&lt;body&gt;</code>
(which refers to the <span style="font-variant: small-caps">R<sup>5</sup>RS</span> grammar nonterminal of that name).
The result(s) of the parameterize form are the result(s) of
the <code>&lt;body&gt;</code>.

<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(radix)                                              &#8658;  2
(parameterize ((radix 16)) (radix))                  &#8658;  16
(radix)                                              &#8658;  2

(<font color="#6959cf"><strong>define</strong></font> (f n) (number-&gt;string n (radix)))

(f 10)                                               &#8658;  <font color="red">&quot;1010&quot;</font>
(parameterize ((radix 8)) (f 10))                    &#8658;  <font color="red">&quot;12&quot;</font>
(parameterize ((radix 8) (prompt (f 10))) (prompt))  &#8658;  <font color="red">&quot;1010&quot;</font>
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="parameter-"></a><a name="--index-entry-15619"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(parameter? obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br /> Returns <code>#t</code> if <code>obj</code> is a parameter object, otherwise returns <code>#f</code>.</td></tr>
</tbody></table><a name="Misc"></a>
<table width="100%"><tr><td bgcolor="#E6F2E6"><h3 id="Misc"><font color="#000000">4.20 Misc</font></h3></table>
<br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="gc"></a><a name="--index-entry-15643"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(gc)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">R<sup>5</sup>RS</span> procedure</i></font></td></tr>
</tbody></table>
<br />Returns the address of the object <code>obj</code> as an integer.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="void"></a><a name="--index-entry-15663"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(void)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(void arg1 ...)</font></strong></code><br /><br />Returns the special <em>void</em> object. If arguments are passed to <code>void</code>,
they are evalued and simply ignored.</td></tr>
</tbody></table><a name="--index-entry-15685"></a><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="error"></a><a name="--index-entry-15691"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(error str obj ...)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(error name str obj ...)</font></strong></code><br /><br /><code>error</code> is used to signal an error to the user. The second form 
of <code>error</code> takes  a symbol as first parameter; it is generally used for the 
name of the procedure which raises the error.
<br /><br />
<strong>Note:</strong> The specification string may follow the 
<em>tilde conventions</em> 
of <code>format</code> (see <a href="stklos-ref-4.html#format">???</a>); in this case this procedure builds an 
error message according to the specification given in <code>str</code>. Otherwise, 
this procedure is conform to the <code>error</code> procedure defined in 
<strong><a href="http://srfi.schemers.org/srfi-23/srfi-23.html">SRFI-23</a></strong>
     (<em>Error reporting mechanism</em>) and  <code>str</code> is printed with the <code>display</code> procedure, 
whereas the <code>obj</code>s are printed  with the <code>write</code> procedure. 

<br /><br />
Hereafter, are some calls of the <code>error</code> procedure using a formatted string
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<font color="red"><strong>error</strong></font> <font color="red">&quot;bad integer ~A&quot;</font> <font color="red">&quot;a&quot;</font>)
                     -| bad integer a
(<font color="red"><strong>error</strong></font> 'vector-ref <font color="red">&quot;bad integer ~S&quot;</font> <font color="red">&quot;a&quot;</font>) 
                     -| <font color="#00cf00">vector-ref:</font> bad integer <font color="red">&quot;a&quot;</font>
(<font color="red"><strong>error</strong></font> 'foo <font color="red">&quot;~A is not between ~A and ~A&quot;</font> <font color="red">&quot;bar&quot;</font> 0 5)
                     -| <font color="#00cf00">foo:</font> bar is not between 0 and 5
</pre></td></tr>
</tbody></table></blockquote>


and some conform to <strong>SRFI-23</strong> (Error reporting mechanism)
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(<font color="red"><strong>error</strong></font> <font color="red">&quot;bad integer&quot;</font> <font color="red">&quot;a&quot;</font>)
                    -| bad integer <font color="red">&quot;a&quot;</font>
(<font color="red"><strong>error</strong></font> 'vector-ref <font color="red">&quot;bad integer&quot;</font> <font color="red">&quot;a&quot;</font>)
                   -| <font color="#00cf00">vector-ref:</font> bad integer <font color="red">&quot;a&quot;</font>
(<font color="red"><strong>error</strong></font> <font color="red">&quot;bar&quot;</font> <font color="red">&quot;is not between&quot;</font> 0 <font color="red">&quot;and&quot;</font> 5)
                   -| bar <font color="red">&quot;is not between&quot;</font> 0 <font color="red">&quot;and&quot;</font> 5
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="require-extension"></a><a name="--index-entry-15792"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(require-extension &lt;clause&gt; ...)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> syntax</i></font></td></tr>
</tbody></table>
<br />The syntax of require-extension is as follows:
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(require-extension <font color="#1919af"><strong>&lt;clause&gt;</strong></font> ...)
</pre></td></tr>
</tbody></table></blockquote>

A clause has the form:
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre> (srfi <font color="#1919af"><strong>&lt;extension-argument&gt;</strong></font> ...)
</pre></td></tr>
</tbody></table></blockquote>

where <code>&lt;extension-argument&gt;</code>s may be any Scheme-values.
<br /><br />
If an <code>&lt;extension-argument&gt;</code> is a nonnegative integer, the functionality
of the indicated SRFIs is made available in the context in
which the require-extension form appears. For instance,
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre> 
(require-extension (srfi 1 2))
               <font color="#ffa600"><i>; Make the SRFI 1 and 2 available</i></font>
</pre></td></tr>
</tbody></table></blockquote>

This form is compatible with <strong><a href="http://srfi.schemers.org/srfi-55/srfi-55.html">SRFI-55</a></strong>
     (<em>Require-extension</em>). However, <span style="font-variant: small-caps">STklos</span>
accepts also some symbolic names for requiring some extensions.
For instance,
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(require-extension (srfi lists and-let*))
</pre></td></tr>
</tbody></table></blockquote>

is equivalent to the previous <code>require-extension</code>. A list of available
 symbols as  <code>&lt;extension-argument&gt;</code> is given in chapter
<a href="stklos-ref-11.html#SRFIs">SRFIs</a>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="repl"></a><a name="--index-entry-15846"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(repl)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(repl :in inport :out outport :err errport)</font></strong></code><br /><br />This procedure launches a new Read-Eval-Print-Loop. Calls to <code>repl</code> can be
embedded. The ports used for input/output as well as the error port can
be passed when <code>repl</code> is called. If not passed, they default to
<code>current-input-port</code>, <code>current-output-port</code> and <code>current-error-port</code>.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="apropos"></a><a name="--index-entry-15873"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(apropos obj)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(apropos obj module)</font></strong></code><br /><br /><code>Apropos</code> returns a list of symbols whose print name contains the
characters of <code>obj</code> as a substring . The given <code>obj</code> can be a string or
symbol. This function returns the list of matched symbols which can
be accessed from the given <code>module</code> (defaults to the current module if not
provided).
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="trace"></a><a name="--index-entry-15899"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(trace f-name ...)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> syntax</i></font></td></tr>
</tbody></table>
<br />Invoking <code>trace</code> with one or more function names causes the functions
named to be traced. Henceforth, whenever such a function is invoked,
information about the call and the returned values, if any, will be
printed on the current error port.

Calling <code>trace</code> with no argument returns the list of traced functions.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="untrace"></a><a name="--index-entry-15919"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(untrace f-name ...)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> syntax</i></font></td></tr>
</tbody></table>
<br />Invoking <code>untrace</code> with one or more function names causes the functions
named not to be traced anymore.

Calling <code>untrace</code> with no argument will untrace all the functions 
currently traced.</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="pp"></a><a name="pretty-print"></a><a name="--index-entry-15940"></a><a name="--index-entry-15944"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(pretty-print sexpr :key port width)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<code><strong><font color="IndianRed">(pp sexpr :key port width)</font></strong></code><br /><br />This function tries to obtain a pretty-printed representation of <code>sexpr</code>.
The pretty-printed form is written on <code>port</code> with lines which are no
more long than <code>width</code> characters. If <code>port</code> is omitted if defaults to
the current error port. As a special convention, if <code>port</code> is <code>#t</code>,
output goes to the current output port and if <code>port</code> is <code>#f</code>, the output
is returned as a string by <code>pretty-print</code>.
Note that <code>pp</code> is another name for <code>pretty-print</code>.
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="uri-parse"></a><a name="--index-entry-15977"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(uri-parse str)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />Parses the string <code>str</code> as a RFC-2396 URI and return a keyed list with the 
following components
<ul><li><code>scheme</code> : the scheme used as a string (defaults to <code>&quot;file&quot;</code>)</li>
<li><code>host</code> : the host as a string (defaults to &quot;&quot;)</li>
<li><code>port</code> : the port as an integer (0 if no port specified)</li>
<li><code>path</code> : the path </li>
<li><code>query</code> : the qury part of the URI as a string (defaults to the 
empty string)</li>
<li><code>fragment</code> : the fragment of the URI as a string (defaults to the 
empty string)</li>
</ul>
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(uri-parse <font color="red">&quot;http://google.com&quot;</font>)
    &#8658; (<font color="#00cf00">:scheme</font> <font color="red">&quot;http&quot;</font> <font color="#00cf00">:host</font> <font color="red">&quot;google.com&quot;</font> <font color="#00cf00">:port</font> 80 <font color="#00cf00">:path</font> <font color="red">&quot;/&quot;</font> 
        <font color="#00cf00">:query</font> <font color="red">&quot;&quot;</font> <font color="#00cf00">:fragment</font> <font color="red">&quot;&quot;</font>)
(uri-parse <font color="red">&quot;http://stklos.net:8080/a/file?x=1;y=2#end&quot;</font>)
    &#8658; (<font color="#00cf00">:scheme</font> <font color="red">&quot;http&quot;</font> <font color="#00cf00">:host</font> <font color="red">&quot;stklos.net&quot;</font> <font color="#00cf00">:port</font> 8080 
        <font color="#00cf00">:path</font> <font color="red">&quot;/a/file&quot;</font> <font color="#00cf00">:query</font> <font color="red">&quot;x=1;y=2&quot;</font> <font color="#00cf00">:fragment</font> <font color="red">&quot;end&quot;</font>)
(uri-parse <font color="red">&quot;/a/file&quot;</font>)           
   &#8658; (<font color="#00cf00">:scheme</font> <font color="red">&quot;file&quot;</font> <font color="#00cf00">:host</font> <font color="red">&quot;&quot;</font> <font color="#00cf00">:port</font> 0 <font color="#00cf00">:path</font> <font color="red">&quot;/a/file&quot;</font> 
       <font color="#00cf00">:query</font> <font color="red">&quot;&quot;</font> <font color="#00cf00">:fragment</font> <font color="red">&quot;&quot;</font>)
(uri-parse <font color="red">&quot;&quot;</font>)
   &#8658; (<font color="#00cf00">:scheme</font> <font color="red">&quot;file&quot;</font> <font color="#00cf00">:host</font> <font color="red">&quot;&quot;</font> <font color="#00cf00">:port</font> 0 <font color="#00cf00">:path</font> <font color="red">&quot;&quot;</font> 
       <font color="#00cf00">:query</font> <font color="red">&quot;&quot;</font> <font color="#00cf00">:fragment</font> <font color="red">&quot;&quot;</font>)
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br /><table cellspacing="0" cellpadding="0" width="100%"><tbody>
<tr><td bgcolor="#dddddd"><a name="string--html"></a><a name="--index-entry-16082"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td align="left"><code><strong><font color="IndianRed">(string-&gt;html str)</font></strong></code></td><td align="right"><font color="darkolivegreen"><i><span style="font-variant: small-caps">STklos</span> procedure</i></font></td></tr>
</tbody></table>
<br />This primitive is a convenience function; it returns a string where 
the HTML special chars are properly translated. It can easily written 
in Scheme, but this version is fast.
<blockquote><table cellspacing="0" class="code" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>(string-&gt;html <font color="red">&quot;Just a &lt;test&gt;&quot;</font>)
   &#8658; <font color="red">&quot;Just a &amp;lt;test&amp;gt;&quot;</font>
</pre></td></tr>
</tbody></table></blockquote>
</td></tr>
</tbody></table><br><br><hr width='20%' size='2' align='left'>
<a name="fn--footnote-13926"><sup><small>1</small></sup></a>: Under Unix, you can simply connect to
a listening socket with the <code>telnet</code> command. With the given
example, this can be achieved by typing the following command in a 
window shell: 
<blockquote><table cellspacing="0" cellpadding="4" width="90%"><tbody>
<tr><td bgcolor="#eee8bf"><pre>$ telnet localhost 12345
</pre></td></tr>
</tbody></table></blockquote>

<br>
<a name="fn--footnote-14122"><sup><small>2</small></sup></a>: Port 13 is generally used for testing:
making a connection to it permits to know the distant system's idea
of the time of day.
<br>
</td>
</tr></table><small><hr>This <span style="font-variant: small-caps">Html</span> page has been produced by 
				     <a href="http://www.inria.fr/mimosa/fp/Skribe">Skribe</a>.<br />Last update <em>Wed Jan  4 14:05:36 2006</em></small>
</body>
</html>
